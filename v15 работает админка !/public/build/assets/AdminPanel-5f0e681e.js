import{_ as Tt,g,h as L,p as Mt,o as St,r as Pt,a as l,c as a,b as t,t as i,m as b,F as p,l as f,d as $,w as tt,e as G,j as v,v as A,k as Z,s as M,z as Ut,y as It,n as c,q as H}from"./main-91539cd7.js";const Dt={name:"AdminPanel",setup(){const J=It(),o=g("products"),V=g(!1),e=g(!1),S=g({data:[],current_page:1,last_page:1}),K=g([]),P=g([]),U=g([]),w=g([]),s=g(null),u=g([]),h=g(null),Q=g(""),W=g(""),X=g("created_at"),D=g(!1),O=g(!1),z=g(!1),q=g(!1),y=L({id:null,name:"",parent_id:null,sort_order:0}),k=L({id:null,name:""}),C=L({id:null,name:""}),_=L({id:null,attribute_id:null,value:"",sort_order:0,is_active:!0}),et=[{id:"products",name:"Товары"},{id:"categories",name:"Категории"},{id:"themes",name:"Темы"},{id:"attributes",name:"Атрибуты"},{id:"images",name:"Изображения"}],st=Mt(()=>{const r=[],n=S.value.current_page,x=S.value.last_page;for(let d=Math.max(1,n-2);d<=Math.min(x,n+2);d++)r.push(d);return r}),j=async()=>{try{const r=await c.get("/admin/stats");h.value=r.data}catch(r){console.error("Ошибка загрузки статистики:",r)}},I=async(r=1)=>{var n,x;try{V.value=!0;const d={page:r,search:Q.value||"",theme_id:W.value||"",sort_by:X.value||"created_at",per_page:15},m=await c.get("/admin/products",{params:d});S.value=m.data}catch(d){console.error("Ошибка загрузки товаров:",d),((n=d.response)==null?void 0:n.status)===500?alert("Ошибка сервера при загрузке товаров. Проверьте логи сервера."):((x=d.response)==null?void 0:x.status)===404?alert("API метод не найден. Проверьте маршруты."):alert("Ошибка загрузки товаров: "+(d.message||"Неизвестная ошибка"))}finally{V.value=!1}},N=async()=>{try{const r=await c.get("/admin/categories");K.value=r.data}catch(r){console.error("Ошибка загрузки категорий:",r)}},B=async()=>{try{const r=await c.get("/admin/themes");P.value=r.data}catch(r){console.error("Ошибка загрузки тем:",r)}},T=async()=>{try{const r=await c.get("/admin/attributes");U.value=r.data}catch(r){console.error("Ошибка загрузки атрибутов:",r)}},E=async r=>{try{const n=await c.get(`/admin/attributes/${r}/values`);w.value=n.data.values}catch(n){console.error("Ошибка загрузки значений атрибутов:",n),w.value=[]}},R=async()=>{try{V.value=!0;const r=await c.get("/admin/images");u.value=r.data.data||r.data}catch(r){console.error("Ошибка загрузки изображений:",r)}finally{V.value=!1}},ot=async r=>{if(confirm("Удалить этот товар? Это действие нельзя отменить."))try{await c.delete(`/admin/products/${r}`),alert("Товар удален!"),I(),j()}catch(n){console.error("Ошибка удаления товара:",n),alert("Ошибка удаления товара")}},rt=()=>{Object.assign(y,{id:null,name:"",parent_id:null,sort_order:0}),D.value=!0},lt=r=>{Object.assign(y,{id:r.id,name:r.name,parent_id:r.parent_id,sort_order:r.sort_order||0}),D.value=!0},at=async()=>{var r,n,x;if(!y.name.trim()){alert("Название категории обязательно");return}if(y.id&&y.parent_id===y.id){alert("Категория не может быть родителем самой себе");return}try{e.value=!0;const d={name:y.name.trim(),parent_id:y.parent_id||null,sort_order:y.sort_order||0,meta_title:y.meta_title||null,meta_description:y.meta_description||null};let m;y.id?m=await c.put(`/admin/categories/${y.id}`,d):m=await c.post("/admin/categories",d),alert(m.data.message||"Категория сохранена!"),D.value=!1,N(),j()}catch(d){if(console.error("Ошибка сохранения категории:",d),((r=d.response)==null?void 0:r.status)===422&&d.response.data.errors){const m=d.response.data.errors,F=Object.values(m).flat();alert(`Ошибки валидации:
`+F.join(`
`))}else alert("Ошибка сохранения категории: "+(((x=(n=d.response)==null?void 0:n.data)==null?void 0:x.message)||d.message))}finally{e.value=!1}},it=async r=>{if(confirm("Удалить эту категорию? Все товары в ней потеряют категорию."))try{await c.delete(`/admin/categories/${r}`),alert("Категория удалена!"),N(),j()}catch(n){console.error("Ошибка удаления категории:",n),alert("Ошибка удаления категории")}},nt=()=>{Object.assign(k,{id:null,name:""}),O.value=!0},dt=r=>{Object.assign(k,{id:r.id,name:r.name}),O.value=!0},ct=async()=>{try{e.value=!0,k.id?(await c.put(`/admin/themes/${k.id}`,k),alert("Тема обновлена!")):(await c.post("/admin/themes",k),alert("Тема создана!")),O.value=!1,B(),j()}catch(r){console.error("Ошибка сохранения темы:",r),alert("Ошибка сохранения темы")}finally{e.value=!1}},ut=async r=>{if(confirm("Удалить эту тему? Все товары в ней потеряют тему."))try{await c.delete(`/admin/themes/${r}`),alert("Тема удалена!"),B(),j()}catch(n){console.error("Ошибка удаления темы:",n),alert("Ошибка удаления темы")}},mt=r=>{s.value=r,E(r.id)},gt=()=>{Object.assign(C,{id:null,name:""}),z.value=!0},bt=r=>{Object.assign(C,{id:r.id,name:r.name}),z.value=!0},xt=async()=>{try{e.value=!0,C.id?(await c.put(`/admin/attributes/${C.id}`,C),alert("Атрибут обновлен!")):(await c.post("/admin/attributes",C),alert("Атрибут создан!")),z.value=!1,T()}catch(r){console.error("Ошибка сохранения атрибута:",r),alert("Ошибка сохранения атрибута")}finally{e.value=!1}},yt=async r=>{var n;if(confirm("Удалить этот атрибут? Все связанные товары потеряют этот атрибут."))try{await c.delete(`/admin/attributes/${r}`),alert("Атрибут удален!"),T(),((n=s.value)==null?void 0:n.id)===r&&(s.value=null,w.value=[])}catch(x){console.error("Ошибка удаления атрибута:",x),alert("Ошибка удаления атрибута")}},vt=()=>{if(!s.value){alert("Сначала выберите атрибут");return}Object.assign(_,{id:null,attribute_id:s.value.id,value:"",sort_order:0,is_active:!0}),q.value=!0},ht=r=>{Object.assign(_,{id:r.id,attribute_id:r.attribute_id,value:r.value,sort_order:r.sort_order||0,is_active:r.is_active}),q.value=!0},pt=async()=>{try{e.value=!0,_.id?(await c.put(`/admin/attribute-values/${_.id}`,_),alert("Значение обновлено!")):(await c.post(`/admin/attributes/${_.attribute_id}/values`,_),alert("Значение создано!")),q.value=!1,E(s.value.id),T()}catch(r){console.error("Ошибка сохранения значения:",r),alert("Ошибка сохранения значения")}finally{e.value=!1}},ft=async r=>{if(confirm("Удалить это значение?"))try{await c.delete(`/admin/attribute-values/${r}`),alert("Значение удалено!"),E(s.value.id),T()}catch(n){console.error("Ошибка удаления значения:",n),alert("Ошибка удаления значения")}},_t=async r=>{var x,d;const n=r.target.files;if(n.length)try{e.value=!0;for(let m=0;m<n.length;m++){const F=new FormData;F.append("image",n[m]),F.append("type","product");try{const Y=await c.post("/admin/images",F,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4});console.log(`Файл ${m+1}/${n.length} загружен:`,Y.data.filename)}catch(Y){console.error(`Ошибка загрузки файла ${n[m].name}:`,Y)}}alert(`Загрузка завершена! Обработано файлов: ${n.length}`),R()}catch(m){console.error("Общая ошибка загрузки изображений:",m),alert("Ошибка загрузки изображений: "+(((d=(x=m.response)==null?void 0:x.data)==null?void 0:d.message)||m.message))}finally{e.value=!1,r.target.value=""}},wt=async r=>{if(confirm("Удалить это изображение?"))try{await c.delete(`/admin/images/${r}`),alert("Изображение удалено!"),R()}catch(n){console.error("Ошибка удаления изображения:",n),alert("Ошибка удаления изображения")}},kt=r=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(r),Ct=r=>new Date(r).toLocaleDateString("ru-RU"),Ft=()=>{Q.value="",W.value="",X.value="created_at",I()},At=Vt(()=>{I()},500);function Vt(r,n){let x;return function(...m){const F=()=>{clearTimeout(x),r(...m)};clearTimeout(x),x=setTimeout(F,n)}}const jt=async()=>{try{await c.post("/admin/logout")}catch(r){console.error("Ошибка выхода:",r)}finally{localStorage.removeItem("auth_token"),delete c.defaults.headers.common.Authorization,J.push("/admin/login")}};return St(()=>{j(),I(),N(),B(),T(),R()}),{activeTab:o,loading:V,saving:e,tabs:et,products:S,categories:K,themes:P,attributes:U,attributeValues:w,selectedAttribute:s,images:u,stats:h,productSearch:Q,productThemeFilter:W,productSort:X,showCategoryModal:D,showThemeModal:O,showAttributeModal:z,showAttributeValueModal:q,categoryForm:y,themeForm:k,attributeForm:C,attributeValueForm:_,paginationPages:st,loadProducts:I,loadCategories:N,loadThemes:B,loadAttributes:T,loadAttributeValues:E,loadImages:R,deleteProduct:ot,createCategory:rt,editCategory:lt,saveCategoryForm:at,deleteCategory:it,createTheme:nt,editTheme:dt,saveThemeForm:ct,deleteTheme:ut,selectAttribute:mt,createAttribute:gt,editAttribute:bt,saveAttributeForm:xt,deleteAttribute:yt,createAttributeValue:vt,editAttributeValue:ht,saveAttributeValueForm:pt,deleteAttributeValue:ft,uploadImages:_t,deleteImage:wt,formatPrice:kt,formatDate:Ct,clearFilters:Ft,debouncedSearch:At,logout:jt}}},Ot={class:"admin-panel min-h-screen bg-gray-900 p-6"},zt={class:"max-w-7xl mx-auto"},qt={class:"flex justify-between items-center mb-8"},Nt={class:"hidden lg:flex space-x-4"},Bt={key:0,class:"bg-gray-800 rounded-lg p-4 text-center"},Et={class:"text-2xl font-bold text-blue-400"},Rt={key:1,class:"bg-gray-800 rounded-lg p-4 text-center"},Lt={class:"text-2xl font-bold text-green-400"},Gt={key:2,class:"bg-gray-800 rounded-lg p-4 text-center"},Ht={class:"text-2xl font-bold text-purple-400"},Jt={class:"bg-gray-800 rounded-lg p-2 mb-8"},Kt={class:"flex flex-wrap space-x-1"},Qt=["onClick"],Wt={class:"bg-gray-800 rounded-lg p-6"},Xt={key:0},Yt={class:"flex justify-between items-center mb-6"},Zt={class:"flex space-x-2"},$t=["disabled"],te={class:"bg-gray-700 rounded-lg p-4 mb-6"},ee={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},se=["value"],oe={class:"flex items-end"},re={class:"bg-gray-700 rounded-lg overflow-hidden"},le={class:"overflow-x-auto"},ae={class:"w-full"},ie={class:"px-4 py-3"},ne={class:"flex items-center space-x-3"},de={class:"w-12 h-12 bg-gray-500 rounded-lg flex items-center justify-center"},ce=["src"],ue={key:1,class:"text-gray-400 text-xs"},me={class:"text-white font-medium"},ge={class:"text-gray-400 text-sm"},be={class:"px-4 py-3 text-white"},xe={class:"px-4 py-3 text-gray-300"},ye={class:"px-4 py-3"},ve={class:"px-4 py-3 text-gray-300"},he={class:"px-4 py-3"},pe={class:"flex justify-center space-x-2"},fe=["onClick"],_e={key:0,class:"bg-gray-600 px-4 py-3 flex justify-between items-center"},we={class:"text-gray-300 text-sm"},ke={class:"flex space-x-2"},Ce=["onClick"],Fe={key:1},Ae={class:"flex justify-between items-center mb-6"},Ve={class:"bg-gray-700 rounded-lg overflow-hidden"},je={class:"w-full"},Te={class:"px-4 py-3"},Me={class:"text-white font-medium"},Se={class:"text-gray-400 text-sm"},Pe={class:"px-4 py-3 text-gray-300"},Ue={class:"px-4 py-3 text-gray-300"},Ie={class:"px-4 py-3 text-gray-300"},De={class:"px-4 py-3"},Oe={class:"flex justify-center space-x-2"},ze=["onClick"],qe=["onClick"],Ne={key:2},Be={class:"flex justify-between items-center mb-6"},Ee={class:"bg-gray-700 rounded-lg overflow-hidden"},Re={class:"w-full"},Le={class:"px-4 py-3 text-white font-medium"},Ge={class:"px-4 py-3 text-gray-300"},He={class:"px-4 py-3 text-gray-300"},Je={class:"px-4 py-3"},Ke={class:"flex justify-center space-x-2"},Qe=["onClick"],We=["onClick"],Xe={key:3},Ye={class:"flex justify-between items-center mb-6"},Ze={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},$e={class:"bg-gray-700 rounded-lg overflow-hidden"},ts={class:"max-h-96 overflow-y-auto"},es=["onClick"],ss={class:"flex justify-between items-center"},os={class:"text-white font-medium"},rs={class:"text-gray-400 text-sm"},ls={key:0,class:"ml-2 px-2 py-1 bg-purple-600 text-purple-100 rounded-full text-xs"},as={class:"flex space-x-2"},is=["onClick"],ns=["onClick"],ds={class:"bg-gray-700 rounded-lg overflow-hidden"},cs={class:"bg-gray-600 px-4 py-3 flex justify-between items-center"},us={class:"text-white font-medium"},ms={class:"max-h-96 overflow-y-auto"},gs={key:0},bs={class:"flex justify-between items-center"},xs={class:"text-white font-medium"},ys={class:"text-gray-400 text-sm"},vs={key:0,class:"ml-2 px-2 py-1 bg-gray-500 text-gray-200 rounded-full text-xs"},hs={class:"flex space-x-2"},ps=["onClick"],fs=["onClick"],_s={key:1,class:"px-4 py-8 text-center text-gray-400"},ws={key:2,class:"px-4 py-8 text-center text-gray-400"},ks={key:4},Cs={class:"flex justify-between items-center mb-6"},Fs={class:"flex space-x-2"},As=["disabled"],Vs={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},js=["src"],Ts={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity flex items-center justify-center"},Ms=["onClick"],Ss={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-2"},Ps={class:"text-xs truncate"},Us={key:0,class:"text-center py-12 text-gray-400"},Is={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Ds={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},Os={class:"text-xl text-white mb-4"},zs={class:"space-y-4"},qs=["value"],Ns={class:"flex justify-end space-x-3 mt-6"},Bs=["disabled"],Es={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Rs={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},Ls={class:"text-xl text-white mb-4"},Gs={class:"space-y-4"},Hs={class:"flex justify-end space-x-3 mt-6"},Js=["disabled"],Ks={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Qs={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},Ws={class:"text-xl text-white mb-4"},Xs={class:"space-y-4"},Ys={class:"flex justify-end space-x-3 mt-6"},Zs=["disabled"],$s={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},to={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},eo={class:"text-xl text-white mb-4"},so={class:"space-y-4"},oo={class:"flex items-center"},ro={class:"flex justify-end space-x-3 mt-6"},lo=["disabled"];function ao(J,o,V,e,S,K){var U,w;const P=Pt("router-link");return l(),a("div",Ot,[t("div",zt,[t("div",qt,[o[37]||(o[37]=t("div",null,[t("h1",{class:"text-3xl font-bold text-white"},'Админ-панель "Стужа"'),t("p",{class:"text-gray-400 mt-1"},"Управление интернет-магазином украшений")],-1)),t("div",Nt,[e.stats?(l(),a("div",Bt,[t("div",Et,i(((U=e.stats.products)==null?void 0:U.total)||0),1),o[34]||(o[34]=t("div",{class:"text-gray-400 text-sm"},"Товаров",-1))])):b("",!0),e.stats?(l(),a("div",Rt,[t("div",Lt,i(e.stats.categories||0),1),o[35]||(o[35]=t("div",{class:"text-gray-400 text-sm"},"Категорий",-1))])):b("",!0),e.stats?(l(),a("div",Gt,[t("div",Ht,i(((w=e.stats.products)==null?void 0:w.matryoshka)||0),1),o[36]||(o[36]=t("div",{class:"text-gray-400 text-sm"},"Матрёшек",-1))])):b("",!0)]),t("button",{onClick:o[0]||(o[0]=(...s)=>e.logout&&e.logout(...s)),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors"}," Выйти ")]),t("div",Jt,[t("nav",Kt,[(l(!0),a(p,null,f(e.tabs,s=>(l(),a("button",{key:s.id,onClick:u=>e.activeTab=s.id,class:H(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",e.activeTab===s.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"])},i(s.name),11,Qt))),128))])]),t("div",Wt,[e.activeTab==="products"?(l(),a("div",Xt,[t("div",Yt,[o[39]||(o[39]=t("h2",{class:"text-xl font-semibold text-white"},"Управление товарами",-1)),t("div",Zt,[$(P,{to:"/admin/products/create",class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"},{default:tt(()=>o[38]||(o[38]=[G(" + Создать товар ")])),_:1,__:[38]}),t("button",{onClick:o[1]||(o[1]=(...s)=>e.loadProducts&&e.loadProducts(...s)),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.loading},i(e.loading?"Загрузка...":"Обновить"),9,$t)])]),t("div",te,[t("div",ee,[t("div",null,[o[40]||(o[40]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Поиск",-1)),v(t("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>e.productSearch=s),type:"text",placeholder:"Название товара...",class:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white",onInput:o[3]||(o[3]=(...s)=>e.debouncedSearch&&e.debouncedSearch(...s))},null,544),[[A,e.productSearch]])]),t("div",null,[o[42]||(o[42]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Тема",-1)),v(t("select",{"onUpdate:modelValue":o[4]||(o[4]=s=>e.productThemeFilter=s),class:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white",onChange:o[5]||(o[5]=(...s)=>e.loadProducts&&e.loadProducts(...s))},[o[41]||(o[41]=t("option",{value:""},"Все темы",-1)),(l(!0),a(p,null,f(e.themes,s=>(l(),a("option",{key:s.id,value:s.id},i(s.name),9,se))),128))],544),[[Z,e.productThemeFilter]])]),t("div",null,[o[44]||(o[44]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Сортировка",-1)),v(t("select",{"onUpdate:modelValue":o[6]||(o[6]=s=>e.productSort=s),class:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white",onChange:o[7]||(o[7]=(...s)=>e.loadProducts&&e.loadProducts(...s))},o[43]||(o[43]=[t("option",{value:"created_at"},"По дате создания",-1),t("option",{value:"name"},"По названию",-1),t("option",{value:"price"},"По цене",-1)]),544),[[Z,e.productSort]])]),t("div",oe,[t("button",{onClick:o[8]||(o[8]=(...s)=>e.clearFilters&&e.clearFilters(...s)),class:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg transition-colors w-full"}," Сбросить ")])])]),t("div",re,[t("div",le,[t("table",ae,[o[46]||(o[46]=t("thead",{class:"bg-gray-600"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Товар"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Цена"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Тема"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Тип"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Дата"),t("th",{class:"px-4 py-3 text-center text-white font-medium"},"Действия")])],-1)),t("tbody",null,[(l(!0),a(p,null,f(e.products.data,s=>{var u;return l(),a("tr",{key:s.id,class:"border-t border-gray-600 hover:bg-gray-600"},[t("td",ie,[t("div",ne,[t("div",de,[s.main_image?(l(),a("img",{key:0,src:`/storage/images/products/${s.main_image}`,class:"w-full h-full object-cover rounded-lg",onError:o[9]||(o[9]=h=>h.target.style.display="none")},null,40,ce)):(l(),a("span",ue,"Нет фото"))]),t("div",null,[t("div",me,i(s.name),1),t("div",ge,i(s.slug),1)])])]),t("td",be,i(e.formatPrice(s.price)),1),t("td",xe,i(((u=s.theme)==null?void 0:u.name)||"Без темы"),1),t("td",ye,[t("span",{class:H(["px-2 py-1 rounded-full text-xs font-medium",s.use_matryoshka?"bg-purple-600 text-purple-100":"bg-blue-600 text-blue-100"])},i(s.use_matryoshka?"Матрёшка":"Обычный"),3)]),t("td",ve,i(e.formatDate(s.created_at)),1),t("td",he,[t("div",pe,[$(P,{to:`/admin/products/edit/${s.id}`,class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"},{default:tt(()=>o[45]||(o[45]=[G(" Редактировать ")])),_:2,__:[45]},1032,["to"]),t("button",{onClick:h=>e.deleteProduct(s.id),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,fe)])])])}),128))])])]),e.products.last_page>1?(l(),a("div",_e,[t("div",we," Показано "+i(e.products.from)+"-"+i(e.products.to)+" из "+i(e.products.total),1),t("div",ke,[(l(!0),a(p,null,f(e.paginationPages,s=>(l(),a("button",{key:s,onClick:u=>e.loadProducts(s),class:H(["px-3 py-1 rounded text-sm transition-colors",s===e.products.current_page?"bg-blue-600 text-white":"bg-gray-500 text-gray-300 hover:bg-gray-400"])},i(s),11,Ce))),128))])])):b("",!0)])])):b("",!0),e.activeTab==="categories"?(l(),a("div",Fe,[t("div",Ae,[o[47]||(o[47]=t("h2",{class:"text-xl font-semibold text-white"},"Управление категориями",-1)),t("button",{onClick:o[10]||(o[10]=(...s)=>e.createCategory&&e.createCategory(...s)),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Создать категорию ")]),t("div",Ve,[t("table",je,[o[48]||(o[48]=t("thead",{class:"bg-gray-600"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Название"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Родитель"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Товаров"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Порядок"),t("th",{class:"px-4 py-3 text-center text-white font-medium"},"Действия")])],-1)),t("tbody",null,[(l(!0),a(p,null,f(e.categories,s=>{var u;return l(),a("tr",{key:s.id,class:"border-t border-gray-600 hover:bg-gray-600"},[t("td",Te,[t("div",Me,i(s.name),1),t("div",Se,i(s.slug),1)]),t("td",Pe,i(((u=s.parent)==null?void 0:u.name)||"Корневая"),1),t("td",Ue,i(s.products_count||0),1),t("td",Ie,i(s.sort_order||0),1),t("td",De,[t("div",Oe,[t("button",{onClick:h=>e.editCategory(s),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Редактировать ",8,ze),t("button",{onClick:h=>e.deleteCategory(s.id),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,qe)])])])}),128))])])])])):b("",!0),e.activeTab==="themes"?(l(),a("div",Ne,[t("div",Be,[o[49]||(o[49]=t("h2",{class:"text-xl font-semibold text-white"},"Управление темами",-1)),t("button",{onClick:o[11]||(o[11]=(...s)=>e.createTheme&&e.createTheme(...s)),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Создать тему ")]),t("div",Ee,[t("table",Re,[o[50]||(o[50]=t("thead",{class:"bg-gray-600"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Название"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Товаров"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Дата создания"),t("th",{class:"px-4 py-3 text-center text-white font-medium"},"Действия")])],-1)),t("tbody",null,[(l(!0),a(p,null,f(e.themes,s=>(l(),a("tr",{key:s.id,class:"border-t border-gray-600 hover:bg-gray-600"},[t("td",Le,i(s.name),1),t("td",Ge,i(s.products_count||0),1),t("td",He,i(e.formatDate(s.created_at)),1),t("td",Je,[t("div",Ke,[t("button",{onClick:u=>e.editTheme(s),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Редактировать ",8,Qe),t("button",{onClick:u=>e.deleteTheme(s.id),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,We)])])]))),128))])])])])):b("",!0),e.activeTab==="attributes"?(l(),a("div",Xe,[t("div",Ye,[o[51]||(o[51]=t("h2",{class:"text-xl font-semibold text-white"},"Управление атрибутами",-1)),t("button",{onClick:o[12]||(o[12]=(...s)=>e.createAttribute&&e.createAttribute(...s)),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Создать атрибут ")]),t("div",Ze,[t("div",$e,[o[52]||(o[52]=t("div",{class:"bg-gray-600 px-4 py-3"},[t("h3",{class:"text-white font-medium"},"Атрибуты")],-1)),t("div",ts,[(l(!0),a(p,null,f(e.attributes,s=>{var u;return l(),a("div",{key:s.id,class:H(["px-4 py-3 border-b border-gray-600 hover:bg-gray-600 cursor-pointer",((u=e.selectedAttribute)==null?void 0:u.id)===s.id?"bg-gray-600":""]),onClick:h=>e.selectAttribute(s)},[t("div",ss,[t("div",null,[t("div",os,i(s.name),1),t("div",rs,[G(i(s.values_count||0)+" значений, "+i(s.products_count||0)+" товаров ",1),s.is_stone?(l(),a("span",ls," Камень ")):b("",!0)])]),t("div",as,[t("button",{onClick:M(h=>e.editAttribute(s),["stop"]),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Редактировать ",8,is),t("button",{onClick:M(h=>e.deleteAttribute(s.id),["stop"]),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,ns)])])],10,es)}),128))])]),t("div",ds,[t("div",cs,[t("h3",us,i(e.selectedAttribute?`Значения: ${e.selectedAttribute.name}`:"Выберите атрибут"),1),e.selectedAttribute?(l(),a("button",{key:0,onClick:o[13]||(o[13]=(...s)=>e.createAttributeValue&&e.createAttributeValue(...s)),class:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm transition-colors"}," + Добавить ")):b("",!0)]),t("div",ms,[e.selectedAttribute&&e.attributeValues.length>0?(l(),a("div",gs,[(l(!0),a(p,null,f(e.attributeValues,s=>(l(),a("div",{key:s.id,class:"px-4 py-3 border-b border-gray-600 hover:bg-gray-600"},[t("div",bs,[t("div",null,[t("div",xs,i(s.value),1),t("div",ys,[G(i(s.products_count||0)+" товаров ",1),s.is_active?b("",!0):(l(),a("span",vs," Неактивен "))])]),t("div",hs,[t("button",{onClick:u=>e.editAttributeValue(s),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Редактировать ",8,ps),t("button",{onClick:u=>e.deleteAttributeValue(s.id),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,fs)])])]))),128))])):e.selectedAttribute?(l(),a("div",_s," У этого атрибута пока нет значений ")):(l(),a("div",ws," Выберите атрибут для просмотра его значений "))])])])])):b("",!0),e.activeTab==="images"?(l(),a("div",ks,[t("div",Cs,[o[53]||(o[53]=t("h2",{class:"text-xl font-semibold text-white"},"Управление изображениями",-1)),t("div",Fs,[t("input",{ref:"imageUpload",type:"file",multiple:"",accept:"image/*",onChange:o[14]||(o[14]=(...s)=>e.uploadImages&&e.uploadImages(...s)),class:"hidden"},null,544),t("button",{onClick:o[15]||(o[15]=s=>J.$refs.imageUpload.click()),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Загрузить изображения "),t("button",{onClick:o[16]||(o[16]=(...s)=>e.loadImages&&e.loadImages(...s)),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.loading},i(e.loading?"Загрузка...":"Обновить"),9,As)])]),t("div",Vs,[(l(!0),a(p,null,f(e.images,s=>(l(),a("div",{key:s.filename,class:"relative group bg-gray-700 rounded-lg overflow-hidden"},[t("img",{src:s.path,class:"w-full h-32 object-cover",onError:o[17]||(o[17]=u=>u.target.style.display="none")},null,40,js),t("div",Ts,[t("button",{onClick:u=>e.deleteImage(s.filename),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-sm transition-colors opacity-0 group-hover:opacity-100"}," Удалить ",8,Ms)]),t("div",Ss,[t("div",Ps,i(s.filename),1)])]))),128))]),e.images.length===0?(l(),a("div",Us," Нет загруженных изображений ")):b("",!0)])):b("",!0)])]),e.showCategoryModal?(l(),a("div",Is,[t("div",Ds,[t("h3",Os,i(e.categoryForm.id?"Редактировать категорию":"Создать категорию"),1),t("form",{onSubmit:o[22]||(o[22]=M((...s)=>e.saveCategoryForm&&e.saveCategoryForm(...s),["prevent"]))},[t("div",zs,[t("div",null,[o[54]||(o[54]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название",-1)),v(t("input",{"onUpdate:modelValue":o[18]||(o[18]=s=>e.categoryForm.name=s),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[A,e.categoryForm.name]])]),t("div",null,[o[56]||(o[56]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Родительская категория",-1)),v(t("select",{"onUpdate:modelValue":o[19]||(o[19]=s=>e.categoryForm.parent_id=s),class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},[o[55]||(o[55]=t("option",{value:""},"Корневая категория",-1)),(l(!0),a(p,null,f(e.categories,s=>(l(),a("option",{key:s.id,value:s.id},i(s.name),9,qs))),128))],512),[[Z,e.categoryForm.parent_id]])]),t("div",null,[o[57]||(o[57]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Порядок сортировки",-1)),v(t("input",{"onUpdate:modelValue":o[20]||(o[20]=s=>e.categoryForm.sort_order=s),type:"number",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[A,e.categoryForm.sort_order,void 0,{number:!0}]])])]),t("div",Ns,[t("button",{type:"button",onClick:o[21]||(o[21]=s=>e.showCategoryModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.saving},i(e.saving?"Сохранение...":"Сохранить"),9,Bs)])],32)])])):b("",!0),e.showThemeModal?(l(),a("div",Es,[t("div",Rs,[t("h3",Ls,i(e.themeForm.id?"Редактировать тему":"Создать тему"),1),t("form",{onSubmit:o[25]||(o[25]=M((...s)=>e.saveThemeForm&&e.saveThemeForm(...s),["prevent"]))},[t("div",Gs,[t("div",null,[o[58]||(o[58]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название",-1)),v(t("input",{"onUpdate:modelValue":o[23]||(o[23]=s=>e.themeForm.name=s),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[A,e.themeForm.name]])])]),t("div",Hs,[t("button",{type:"button",onClick:o[24]||(o[24]=s=>e.showThemeModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.saving},i(e.saving?"Сохранение...":"Сохранить"),9,Js)])],32)])])):b("",!0),e.showAttributeModal?(l(),a("div",Ks,[t("div",Qs,[t("h3",Ws,i(e.attributeForm.id?"Редактировать атрибут":"Создать атрибут"),1),t("form",{onSubmit:o[28]||(o[28]=M((...s)=>e.saveAttributeForm&&e.saveAttributeForm(...s),["prevent"]))},[t("div",Xs,[t("div",null,[o[59]||(o[59]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название",-1)),v(t("input",{"onUpdate:modelValue":o[26]||(o[26]=s=>e.attributeForm.name=s),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[A,e.attributeForm.name]])])]),t("div",Ys,[t("button",{type:"button",onClick:o[27]||(o[27]=s=>e.showAttributeModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.saving},i(e.saving?"Сохранение...":"Сохранить"),9,Zs)])],32)])])):b("",!0),e.showAttributeValueModal?(l(),a("div",$s,[t("div",to,[t("h3",eo,i(e.attributeValueForm.id?"Редактировать значение":"Создать значение"),1),t("form",{onSubmit:o[33]||(o[33]=M((...s)=>e.saveAttributeValueForm&&e.saveAttributeValueForm(...s),["prevent"]))},[t("div",so,[t("div",null,[o[60]||(o[60]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Значение",-1)),v(t("input",{"onUpdate:modelValue":o[29]||(o[29]=s=>e.attributeValueForm.value=s),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[A,e.attributeValueForm.value]])]),t("div",null,[o[61]||(o[61]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Порядок сортировки",-1)),v(t("input",{"onUpdate:modelValue":o[30]||(o[30]=s=>e.attributeValueForm.sort_order=s),type:"number",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[A,e.attributeValueForm.sort_order,void 0,{number:!0}]])]),t("div",oo,[v(t("input",{"onUpdate:modelValue":o[31]||(o[31]=s=>e.attributeValueForm.is_active=s),type:"checkbox",id:"is_active",class:"mr-2"},null,512),[[Ut,e.attributeValueForm.is_active]]),o[62]||(o[62]=t("label",{for:"is_active",class:"text-white"},"Активно",-1))])]),t("div",ro,[t("button",{type:"button",onClick:o[32]||(o[32]=s=>e.showAttributeValueModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.saving},i(e.saving?"Сохранение...":"Сохранить"),9,lo)])],32)])])):b("",!0)])}const no=Tt(Dt,[["render",ao]]);export{no as default};
