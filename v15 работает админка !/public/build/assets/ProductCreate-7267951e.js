import{_ as $,g as y,p as ee,h as te,o as oe,r as le,a as n,c as a,b as t,t as m,d as re,w as se,e as ne,m as f,s as ae,j as g,v as b,k as ie,F as h,l as w,z as j,y as de,x as ue,n as v}from"./main-91539cd7.js";const ce={name:"ProductCreate",setup(){const _=de(),e=ue(),k=y(!1),o=y(!1),I=y(!1),x=ee(()=>e.params.id?"edit":"create"),C=y([]),l=y([]),i=y([]),p=y([]),U=y(!1),V=y(null),S=y(null),s=te({name:"",sku:"",description:"",price:0,stock_quantity:0,weight:0,use_matryoshka:!1,image_layers:{outer:"",inner:""},gallery_images:[""],theme_id:"",category_ids:[],attribute_values:{},meta_title:"",meta_description:"",dimensions:{length:0,width:0,height:0}}),A=async()=>{try{const r=await v.get("/admin/themes");C.value=r.data}catch(r){console.error("Ошибка загрузки тем:",r)}},M=async()=>{try{const r=await v.get("/admin/categories/tree");l.value=r.data}catch(r){console.error("Ошибка загрузки категорий:",r)}},q=async()=>{try{const r=await v.get("/admin/attributes");i.value=r.data}catch(r){console.error("Ошибка загрузки атрибутов:",r)}},E=async()=>{try{const r=await v.get("/admin/images");p.value=r.data.data||r.data||[]}catch(r){console.error("Ошибка загрузки изображений:",r)}},N=async()=>{if(x.value!=="create")try{k.value=!0;const d=(await v.get(`/admin/products/${e.params.id}`)).data,u={};d.product_attributes&&d.product_attributes.forEach(c=>{c.attribute_value_id&&(u[c.attribute_id]||(u[c.attribute_id]=[]),u[c.attribute_id].push(c.attribute_value_id)),c.custom_value&&(u[`custom_${c.attribute_id}`]=c.custom_value)}),Object.assign(s,{...d,attribute_values:u})}catch(r){console.error("Ошибка загрузки товара:",r),alert("Ошибка загрузки товара"),_.push("/admin")}finally{k.value=!1}},F=(r,d)=>{s.attribute_values[r]||(s.attribute_values[r]=[]);const u=s.attribute_values[r],c=u.indexOf(d);c>-1?u.splice(c,1):u.push(d)},D=(r,d)=>{s.attribute_values[`custom_${r}`]=d.trim()},G=(r,d)=>{const u=s.attribute_values[r];return u&&u.includes(d)},B=r=>s.attribute_values[`custom_${r}`]||"",K=()=>{s.gallery_images.push("")},R=r=>{s.gallery_images.splice(r,1)},O=(r,d=null)=>{V.value=r,S.value=d,U.value=!0,E()},P=()=>{U.value=!1,V.value=null,S.value=null},z=r=>{const d=V.value;d==="outer"?s.image_layers.outer=r:d==="inner"?s.image_layers.inner=r:d==="gallery"&&(s.gallery_images[S.value]=r),P()},J=async r=>{const d=r.target.files;if(d.length){I.value=!0;try{for(let u of d){const c=new FormData;c.append("image",u),c.append("type","product"),await v.post("/admin/images",c,{headers:{"Content-Type":"multipart/form-data"}})}alert("Изображения загружены!"),E()}catch(u){console.error("Ошибка загрузки изображений:",u),alert("Ошибка загрузки изображений")}finally{I.value=!1,r.target.value=""}}},T=()=>{s.sku="STJ-"+Date.now()},L=()=>{!s.meta_title&&s.name&&(s.meta_title=s.name.substring(0,60)),!s.meta_description&&s.description&&(s.meta_description=s.description.substring(0,160))},W=r=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(r),H=r=>r?r.startsWith("http")?r:`/storage/images/products/${r}`:"/placeholder.jpg",Q=r=>{r.target.src="/placeholder.jpg"},X=()=>{x.value==="edit"&&window.open(`/product/${s.slug}`,"_blank")},Y=async()=>{var r,d;try{o.value=!0;const u={...s,price:parseFloat(s.price)||0,stock_quantity:parseInt(s.stock_quantity)||0,weight:parseFloat(s.weight)||0};let c;x.value==="edit"?c=await v.put(`/admin/products/${e.params.id}`,u):c=await v.post("/admin/products",u),alert(x.value==="edit"?"Товар обновлен!":"Товар создан!"),_.push("/admin")}catch(u){console.error("Ошибка сохранения товара:",u);const c=((d=(r=u.response)==null?void 0:r.data)==null?void 0:d.message)||"Ошибка сохранения";alert("Ошибка: "+c)}finally{o.value=!1}},Z=async()=>{if(confirm("Вы уверены, что хотите удалить этот товар? Это действие нельзя отменить."))try{await v.delete(`/admin/products/${e.params.id}`),alert("Товар удален!"),_.push("/admin")}catch(r){console.error("Ошибка удаления товара:",r),alert("Ошибка удаления товара")}};return oe(async()=>{try{await Promise.all([A(),M(),q(),N()]),x.value==="create"&&!s.sku&&T()}catch(r){console.error("Ошибка инициализации:",r)}}),{loading:k,saving:o,uploading:I,mode:x,themes:C,categoryTree:l,attributes:i,availableImages:p,form:s,showImageSelector:U,toggleAttributeValue:F,setCustomAttributeValue:D,isAttributeValueSelected:G,getCustomAttributeValue:B,addGalleryImage:K,removeGalleryImage:R,openImageSelector:O,closeImageSelector:P,selectImage:z,uploadNewImages:J,generateSKU:T,generateMetaTags:L,formatPrice:W,getImageUrl:H,handleImageError:Q,previewProduct:X,saveProduct:Y,deleteProduct:Z}}},me={class:"min-h-screen bg-gray-900 p-6"},ge={class:"max-w-7xl mx-auto"},be={class:"flex justify-between items-center mb-8"},ye={class:"text-3xl font-bold text-white"},pe={class:"flex space-x-3"},fe={key:0,class:"flex justify-center items-center py-12"},ve={class:"lg:col-span-2 space-y-8"},xe={class:"bg-gray-800 rounded-lg p-6"},he={class:"space-y-6"},we={class:"flex space-x-2"},_e={class:"grid grid-cols-2 gap-4"},ke={class:"grid grid-cols-2 gap-4"},Ie=["value"],Ce={class:"grid grid-cols-3 gap-2"},Ue={class:"bg-gray-800 rounded-lg p-6"},Ve={class:"flex items-center justify-between mb-4"},Se={class:"flex items-center"},je={key:0,class:"grid grid-cols-2 gap-6"},Ee={class:"space-y-3"},Pe={key:0,class:"relative"},Te=["src"],Ae={class:"space-y-3"},Me={key:0,class:"relative"},qe=["src"],Ne={class:"bg-gray-800 rounded-lg p-6"},Fe={class:"space-y-4"},De={class:"grid grid-cols-3 gap-4"},Ge={key:0,class:"relative"},Be=["src","alt"],Ke=["onClick"],Re=["onClick"],Oe={class:"border-t border-gray-700 pt-4"},ze=["disabled"],Je={class:"bg-gray-800 rounded-lg p-6"},Le={class:"space-y-4"},We={class:"text-xs text-gray-400 mt-1"},He={class:"text-xs text-gray-400 mt-1"},Qe={class:"space-y-8"},Xe={class:"bg-gray-800 rounded-lg p-6"},Ye={class:"space-y-2 max-h-64 overflow-y-auto"},Ze={class:"flex items-center space-x-2 p-2 hover:bg-gray-700 rounded"},$e=["value"],et={class:"text-white"},tt={class:"text-gray-400 text-sm"},ot={key:0,class:"ml-6 space-y-1"},lt=["value"],rt={class:"text-white"},st={class:"text-gray-400 text-sm"},nt={class:"bg-gray-800 rounded-lg p-6"},at={class:"space-y-6"},it={class:"text-white font-medium"},dt={key:0,class:"space-y-2"},ut=["checked","onChange"],ct={class:"text-white"},mt={class:"block text-sm text-gray-400 mb-1"},gt=["value","onInput"],bt={class:"bg-gray-800 rounded-lg p-6"},yt={class:"space-y-3"},pt=["disabled"],ft={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},vt={class:"bg-gray-800 rounded-lg p-6 max-w-4xl w-full max-h-96 overflow-hidden flex flex-col"},xt={class:"flex justify-between items-center mb-4"},ht={class:"flex-1 overflow-y-auto"},wt={class:"grid grid-cols-4 gap-4"},_t=["onClick"],kt=["src","alt"],It={class:"absolute bottom-1 left-1 right-1"},Ct={class:"text-white text-xs bg-black bg-opacity-50 p-1 rounded truncate"};function Ut(_,e,k,o,I,x){const C=le("router-link");return n(),a("div",me,[t("div",ge,[t("div",be,[t("div",null,[t("h1",ye,m(o.mode==="edit"?"Редактировать товар":"Создать новый товар"),1),e[33]||(e[33]=t("p",{class:"text-gray-400 mt-1"},"Заполните информацию о товаре",-1))]),t("div",pe,[re(C,{to:"/admin",class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"},{default:se(()=>e[34]||(e[34]=[ne(" ← Назад к админке ")])),_:1,__:[34]}),o.mode==="edit"?(n(),a("button",{key:0,onClick:e[0]||(e[0]=(...l)=>o.previewProduct&&o.previewProduct(...l)),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"}," Предпросмотр ")):f("",!0)])]),o.loading?(n(),a("div",fe,e[35]||(e[35]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1)]))):(n(),a("form",{key:1,onSubmit:e[30]||(e[30]=ae((...l)=>o.saveProduct&&o.saveProduct(...l),["prevent"])),class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},[t("div",ve,[t("div",xe,[e[45]||(e[45]=t("h2",{class:"text-xl font-semibold text-white mb-4"},"Основная информация",-1)),t("div",he,[t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Название товара * ",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.form.name=l),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",placeholder:"Например: Кольцо с агатом",onInput:e[2]||(e[2]=(...l)=>o.generateMetaTags&&o.generateMetaTags(...l))},null,544),[[b,o.form.name]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Артикул (SKU) ",-1)),t("div",we,[g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.form.sku=l),type:"text",class:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",placeholder:"Будет сгенерирован автоматически"},null,512),[[b,o.form.sku]]),t("button",{type:"button",onClick:e[4]||(e[4]=(...l)=>o.generateSKU&&o.generateSKU(...l)),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors"}," Генерировать ")])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Описание * ",-1)),g(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.form.description=l),required:"",rows:"4",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",placeholder:"Подробное описание товара...",onInput:e[6]||(e[6]=(...l)=>o.generateMetaTags&&o.generateMetaTags(...l))},null,544),[[b,o.form.description]])]),t("div",_e,[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Цена (рубли) * ",-1)),g(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>o.form.price=l),type:"number",required:"",min:"0",step:"0.01",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",placeholder:"0.00"},null,512),[[b,o.form.price,void 0,{number:!0}]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Количество в наличии ",-1)),g(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>o.form.stock_quantity=l),type:"number",min:"0",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",placeholder:"0"},null,512),[[b,o.form.stock_quantity,void 0,{number:!0}]])])]),t("div",ke,[t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Вес (граммы) ",-1)),g(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>o.form.weight=l),type:"number",min:"0",step:"0.1",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",placeholder:"0.0"},null,512),[[b,o.form.weight,void 0,{number:!0}]])]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Тема ",-1)),g(t("select",{"onUpdate:modelValue":e[10]||(e[10]=l=>o.form.theme_id=l),class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-blue-500 focus:outline-none"},[e[42]||(e[42]=t("option",{value:""},"Без темы",-1)),(n(!0),a(h,null,w(o.themes,l=>(n(),a("option",{key:l.id,value:l.id},m(l.name),9,Ie))),128))],512),[[ie,o.form.theme_id]])])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Размеры (мм) ",-1)),t("div",Ce,[g(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>o.form.dimensions.length=l),type:"number",min:"0",step:"0.1",placeholder:"Длина",class:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"},null,512),[[b,o.form.dimensions.length,void 0,{number:!0}]]),g(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>o.form.dimensions.width=l),type:"number",min:"0",step:"0.1",placeholder:"Ширина",class:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"},null,512),[[b,o.form.dimensions.width,void 0,{number:!0}]]),g(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>o.form.dimensions.height=l),type:"number",min:"0",step:"0.1",placeholder:"Высота",class:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"},null,512),[[b,o.form.dimensions.height,void 0,{number:!0}]])])])])]),t("div",Ue,[t("div",Ve,[e[47]||(e[47]=t("h2",{class:"text-xl font-semibold text-white"},"Эффект матрёшки",-1)),t("label",Se,[g(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>o.form.use_matryoshka=l),type:"checkbox",class:"mr-2"},null,512),[[j,o.form.use_matryoshka]]),e[46]||(e[46]=t("span",{class:"text-white"},"Использовать эффект",-1))])]),o.form.use_matryoshka?(n(),a("div",je,[t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Внешнее изображение * ",-1)),t("div",Ee,[o.form.image_layers.outer?(n(),a("div",Pe,[t("img",{src:o.getImageUrl(o.form.image_layers.outer),alt:"Внешнее изображение",class:"w-full h-32 object-cover rounded-lg",onError:e[15]||(e[15]=(...l)=>o.handleImageError&&o.handleImageError(...l))},null,40,Te),t("button",{type:"button",onClick:e[16]||(e[16]=l=>o.form.image_layers.outer=""),class:"absolute top-2 right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm"}," × ")])):f("",!0),t("button",{type:"button",onClick:e[17]||(e[17]=l=>o.openImageSelector("outer")),class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg transition-colors"},m(o.form.image_layers.outer?"Изменить изображение":"Выбрать изображение"),1)])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Внутреннее изображение * ",-1)),t("div",Ae,[o.form.image_layers.inner?(n(),a("div",Me,[t("img",{src:o.getImageUrl(o.form.image_layers.inner),alt:"Внутреннее изображение",class:"w-full h-32 object-cover rounded-lg",onError:e[18]||(e[18]=(...l)=>o.handleImageError&&o.handleImageError(...l))},null,40,qe),t("button",{type:"button",onClick:e[19]||(e[19]=l=>o.form.image_layers.inner=""),class:"absolute top-2 right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm"}," × ")])):f("",!0),t("button",{type:"button",onClick:e[20]||(e[20]=l=>o.openImageSelector("inner")),class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg transition-colors"},m(o.form.image_layers.inner?"Изменить изображение":"Выбрать изображение"),1)])])])):f("",!0)]),t("div",Ne,[e[51]||(e[51]=t("h2",{class:"text-xl font-semibold text-white mb-4"},"Галерея изображений",-1)),t("div",Fe,[t("div",De,[(n(!0),a(h,null,w(o.form.gallery_images,(l,i)=>(n(),a("div",{key:i,class:"space-y-2"},[l?(n(),a("div",Ge,[t("img",{src:o.getImageUrl(l),alt:`Изображение ${i+1}`,class:"w-full h-full object-cover rounded-lg",onError:e[21]||(e[21]=(...p)=>o.handleImageError&&o.handleImageError(...p))},null,40,Be),t("button",{type:"button",onClick:p=>o.removeGalleryImage(i),class:"absolute top-2 right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm"}," × ",8,Ke)])):f("",!0),t("button",{type:"button",onClick:p=>o.openImageSelector("gallery",i),class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors text-sm"},m(l?"Изменить":"Выбрать изображение"),9,Re)]))),128))]),t("button",{type:"button",onClick:e[22]||(e[22]=(...l)=>o.addGalleryImage&&o.addGalleryImage(...l)),class:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg transition-colors"}," + Добавить изображение "),t("div",Oe,[e[50]||(e[50]=t("h3",{class:"text-lg font-medium text-white mb-4"},"Загрузить новые изображения",-1)),t("input",{ref:"imageUpload",type:"file",multiple:"",accept:"image/*",onChange:e[23]||(e[23]=(...l)=>o.uploadNewImages&&o.uploadNewImages(...l)),class:"hidden"},null,544),t("button",{type:"button",onClick:e[24]||(e[24]=l=>_.$refs.imageUpload.click()),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg transition-colors",disabled:o.uploading},m(o.uploading?"Загрузка...":"Выбрать файлы для загрузки"),9,ze)])])]),t("div",Je,[e[54]||(e[54]=t("h2",{class:"text-xl font-semibold text-white mb-4"},"SEO и мета-теги",-1)),t("div",Le,[t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Мета-заголовок ",-1)),g(t("input",{"onUpdate:modelValue":e[25]||(e[25]=l=>o.form.meta_title=l),type:"text",maxlength:"60",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",placeholder:"Автоматически генерируется из названия"},null,512),[[b,o.form.meta_title]]),t("div",We,m(o.form.meta_title.length)+"/60 символов ",1)]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Мета-описание ",-1)),g(t("textarea",{"onUpdate:modelValue":e[26]||(e[26]=l=>o.form.meta_description=l),rows:"3",maxlength:"160",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",placeholder:"Автоматически генерируется из описания"},null,512),[[b,o.form.meta_description]]),t("div",He,m(o.form.meta_description.length)+"/160 символов ",1)])])])]),t("div",Qe,[t("div",Xe,[e[55]||(e[55]=t("h2",{class:"text-xl font-semibold text-white mb-4"},"Категории",-1)),t("div",Ye,[(n(!0),a(h,null,w(o.categoryTree,l=>(n(),a("div",{key:l.id,class:"space-y-1"},[t("label",Ze,[g(t("input",{"onUpdate:modelValue":e[27]||(e[27]=i=>o.form.category_ids=i),value:l.id,type:"checkbox",class:"rounded"},null,8,$e),[[j,o.form.category_ids]]),t("span",et,m(l.name),1),t("span",tt,"("+m(l.products_count||0)+")",1)]),l.children&&l.children.length?(n(),a("div",ot,[(n(!0),a(h,null,w(l.children,i=>(n(),a("label",{key:i.id,class:"flex items-center space-x-2 p-2 hover:bg-gray-700 rounded"},[g(t("input",{"onUpdate:modelValue":e[28]||(e[28]=p=>o.form.category_ids=p),value:i.id,type:"checkbox",class:"rounded"},null,8,lt),[[j,o.form.category_ids]]),t("span",rt,m(i.name),1),t("span",st,"("+m(i.products_count||0)+")",1)]))),128))])):f("",!0)]))),128))])]),t("div",nt,[e[56]||(e[56]=t("h2",{class:"text-xl font-semibold text-white mb-4"},"Атрибуты",-1)),t("div",at,[(n(!0),a(h,null,w(o.attributes,l=>(n(),a("div",{key:l.id,class:"space-y-3"},[t("h3",it,m(l.name),1),l.attribute_values&&l.attribute_values.length?(n(),a("div",dt,[(n(!0),a(h,null,w(l.attribute_values,i=>(n(),a("label",{key:i.id,class:"flex items-center space-x-2 p-2 hover:bg-gray-700 rounded"},[t("input",{checked:o.isAttributeValueSelected(l.id,i.id),onChange:p=>o.toggleAttributeValue(l.id,i.id),type:"checkbox",class:"rounded"},null,40,ut),t("span",ct,m(i.value),1)]))),128))])):f("",!0),t("div",null,[t("label",mt,' Кастомное значение для "'+m(l.name)+'" ',1),t("input",{value:o.getCustomAttributeValue(l.id),onInput:i=>o.setCustomAttributeValue(l.id,i.target.value),type:"text",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",placeholder:"Введите значение..."},null,40,gt)])]))),128))])]),t("div",bt,[t("div",yt,[t("button",{type:"submit",class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg transition-colors",disabled:o.saving},m(o.saving?"Сохранение...":o.mode==="edit"?"Обновить товар":"Создать товар"),9,pt),o.mode==="edit"?(n(),a("button",{key:0,type:"button",onClick:e[29]||(e[29]=(...l)=>o.deleteProduct&&o.deleteProduct(...l)),class:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg transition-colors"}," Удалить товар ")):f("",!0)])])])],32))]),o.showImageSelector?(n(),a("div",ft,[t("div",vt,[t("div",xt,[e[57]||(e[57]=t("h3",{class:"text-xl text-white"},"Выберите изображение",-1)),t("button",{onClick:e[31]||(e[31]=(...l)=>o.closeImageSelector&&o.closeImageSelector(...l)),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Закрыть ")]),t("div",ht,[t("div",wt,[(n(!0),a(h,null,w(o.availableImages,l=>(n(),a("div",{key:l.filename,class:"relative cursor-pointer group",onClick:i=>o.selectImage(l.filename)},[t("img",{src:o.getImageUrl(l.filename),alt:l.filename,class:"w-full h-24 object-cover rounded-lg group-hover:opacity-75 transition-opacity",onError:e[32]||(e[32]=(...i)=>o.handleImageError&&o.handleImageError(...i))},null,40,kt),e[58]||(e[58]=t("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-25 rounded-lg transition-opacity"},null,-1)),t("div",It,[t("p",Ct,m(l.filename),1)])],8,_t))),128))])])])])):f("",!0)])}const St=$(ce,[["render",Ut],["__scopeId","data-v-58fc24b5"]]);export{St as default};
