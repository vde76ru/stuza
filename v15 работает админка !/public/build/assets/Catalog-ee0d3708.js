import{_ as M,g as b,h as P,i as S,o as T,r as U,a as s,c as r,b as a,j as h,v as I,k as _,F as y,l as f,t as d,m as w,n as k,e as C,d as N,w as B}from"./main-91539cd7.js";const E={name:"Catalog",setup(){const u=b(!1),e=b([]),v=b([]),o=b([]),c=P({search:"",category:"",theme:"",sort:"name"}),i=P({current_page:1,per_page:12,total:0});let m=null;const t=n=>new Intl.NumberFormat("ru-RU").format(n),x=n=>{n.target.src="/images/placeholder.jpg"},p=async()=>{try{const[n,g]=await Promise.all([k.get("/admin/categories"),k.get("/admin/themes")]);v.value=n.data,o.value=g.data}catch(n){console.error("Ошибка загрузки фильтров:",n)}},l=async(n=1)=>{u.value=!0;try{const g=new URLSearchParams({page:n,per_page:i.per_page,...c}),z=await k.get(`/catalog?${g}`);e.value=z.data.data,Object.assign(i,z.data.meta)}catch(g){console.error("Ошибка загрузки товаров:",g),e.value=[]}finally{u.value=!1}},j=()=>{clearTimeout(m),m=setTimeout(()=>{i.current_page=1,l()},500)},V=n=>{n>=1&&n<=Math.ceil(i.total/i.per_page)&&(i.current_page=n,l(n),window.scrollTo({top:0,behavior:"smooth"}))},F=()=>{Object.assign(c,{search:"",category:"",theme:"",sort:"name"}),i.current_page=1,l()};return S([()=>c.category,()=>c.theme,()=>c.sort],()=>{i.current_page=1,l()}),T(()=>{p(),l()}),{loading:u,products:e,categories:v,themes:o,filters:c,pagination:i,formatPrice:t,handleImageError:x,loadProducts:l,onSearchChange:j,changePage:V,clearFilters:F}}},R={class:"catalog min-h-screen bg-stuzha-bg py-20"},D={class:"max-w-7xl mx-auto px-4"},L={class:"mb-8 bg-gray-900/50 rounded-xl p-6 backdrop-blur-sm border border-gray-800"},O={class:"flex flex-wrap items-center gap-4"},q={class:"flex-1 min-w-64"},A=["value"],G=["value"],H={key:0,class:"flex justify-center items-center py-20"},J={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},K={class:"aspect-w-1 aspect-h-1 bg-gradient-to-br from-gray-800 to-gray-900 relative overflow-hidden"},Q=["src","alt"],W={key:1,class:"flex items-center justify-center h-full"},X={key:2,class:"absolute top-3 left-3"},Y={class:"p-4"},Z={class:"text-lg font-semibold text-white mb-2 group-hover:text-stuzha-accent transition-colors"},$={class:"text-gray-400 text-sm mb-3 line-clamp-2"},ee={class:"mb-3"},te={key:0,class:"inline-block bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded mr-2"},oe={class:"flex justify-between items-center"},ae={class:"text-2xl font-bold text-stuzha-accent"},se={key:2,class:"text-center py-20"},re={class:"max-w-md mx-auto"},ne={key:3,class:"mt-12 flex justify-center"},le={class:"flex items-center space-x-2"},ie=["disabled"],de={class:"px-4 py-2 text-sm text-gray-400"},ce=["disabled"];function ge(u,e,v,o,c,i){const m=U("router-link");return s(),r("div",R,[a("div",D,[e[22]||(e[22]=a("div",{class:"text-center mb-12"},[a("h1",{class:"text-4xl md:text-5xl font-bold text-white mb-6"},"Каталог украшений"),a("p",{class:"text-xl text-gray-400 max-w-3xl mx-auto"}," Откройте для себя уникальные украшения с натуральными камнями ")],-1)),a("div",L,[a("div",O,[a("div",q,[h(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.filters.search=t),onInput:e[1]||(e[1]=(...t)=>o.onSearchChange&&o.onSearchChange(...t)),type:"text",placeholder:"Поиск украшений...",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white placeholder-gray-400 focus:border-stuzha-accent focus:outline-none"},null,544),[[I,o.filters.search]])]),h(a("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.filters.category=t),onChange:e[3]||(e[3]=(...t)=>o.loadProducts&&o.loadProducts(...t)),class:"bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-stuzha-accent focus:outline-none"},[e[12]||(e[12]=a("option",{value:""},"Все категории",-1)),(s(!0),r(y,null,f(o.categories,t=>(s(),r("option",{key:t.id,value:t.slug},d(t.name),9,A))),128))],544),[[_,o.filters.category]]),h(a("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.filters.theme=t),onChange:e[5]||(e[5]=(...t)=>o.loadProducts&&o.loadProducts(...t)),class:"bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-stuzha-accent focus:outline-none"},[e[13]||(e[13]=a("option",{value:""},"Все темы",-1)),(s(!0),r(y,null,f(o.themes,t=>(s(),r("option",{key:t.id,value:t.id},d(t.name),9,G))),128))],544),[[_,o.filters.theme]]),h(a("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.filters.sort=t),onChange:e[7]||(e[7]=(...t)=>o.loadProducts&&o.loadProducts(...t)),class:"bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-stuzha-accent focus:outline-none"},e[14]||(e[14]=[a("option",{value:"name"},"По алфавиту",-1),a("option",{value:"price_asc"},"Сначала дешевые",-1),a("option",{value:"price_desc"},"Сначала дорогие",-1),a("option",{value:"newest"},"Новинки",-1)]),544),[[_,o.filters.sort]])])]),o.loading?(s(),r("div",H,e[15]||(e[15]=[a("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-stuzha-accent"},null,-1)]))):o.products.length>0?(s(),r("div",J,[(s(!0),r(y,null,f(o.products,t=>{var x,p;return s(),r("div",{key:t.id,class:"bg-gray-900/50 rounded-xl overflow-hidden border border-gray-800 group hover:border-stuzha-accent/50 transition-all duration-300 transform hover:scale-105"},[a("div",K,[((x=t.gallery_images)==null?void 0:x.length)>0?(s(),r("img",{key:0,src:t.gallery_images[0],alt:t.name,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:e[8]||(e[8]=l=>o.handleImageError(l))},null,40,Q)):(s(),r("div",W,e[16]||(e[16]=[a("p",{class:"text-gray-500 text-center"},[C("Изображение"),a("br"),C("отсутствует")],-1)]))),t.use_matryoshka?(s(),r("div",X,e[17]||(e[17]=[a("span",{class:"bg-stuzha-accent text-white text-xs px-2 py-1 rounded-full"}," Эффект матрёшки ",-1)]))):w("",!0)]),a("div",Y,[a("h3",Z,d(t.name),1),a("p",$,d(t.description),1),a("div",ee,[t.theme?(s(),r("span",te,d(t.theme),1)):w("",!0),(s(!0),r(y,null,f((p=t.attributes)==null?void 0:p.slice(0,2),l=>(s(),r("span",{key:l,class:"inline-block bg-stuzha-accent/20 text-stuzha-accent text-xs px-2 py-1 rounded mr-1"},d(l),1))),128))]),a("div",oe,[a("span",ae,d(o.formatPrice(t.price))+" ₽ ",1),N(m,{to:`/product/${t.slug}`,class:"bg-stuzha-accent hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors"},{default:B(()=>e[18]||(e[18]=[C(" Подробнее ")])),_:2,__:[18]},1032,["to"])])])])}),128))])):(s(),r("div",se,[a("div",re,[e[19]||(e[19]=a("svg",{class:"w-20 h-20 text-gray-600 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),e[20]||(e[20]=a("h3",{class:"text-xl font-semibold text-white mb-2"},"Товары не найдены",-1)),e[21]||(e[21]=a("p",{class:"text-gray-400 mb-6"}," Попробуйте изменить фильтры или поисковый запрос ",-1)),a("button",{onClick:e[9]||(e[9]=(...t)=>o.clearFilters&&o.clearFilters(...t)),class:"bg-stuzha-accent hover:bg-red-700 text-white px-6 py-2 rounded-lg transition-colors"}," Сбросить фильтры ")])])),o.pagination.total>o.pagination.per_page?(s(),r("div",ne,[a("nav",le,[a("button",{onClick:e[10]||(e[10]=t=>o.changePage(o.pagination.current_page-1)),disabled:o.pagination.current_page<=1,class:"px-3 py-2 text-sm bg-gray-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700 transition-colors"}," Назад ",8,ie),a("span",de," Страница "+d(o.pagination.current_page)+" из "+d(Math.ceil(o.pagination.total/o.pagination.per_page)),1),a("button",{onClick:e[11]||(e[11]=t=>o.changePage(o.pagination.current_page+1)),disabled:o.pagination.current_page>=Math.ceil(o.pagination.total/o.pagination.per_page),class:"px-3 py-2 text-sm bg-gray-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700 transition-colors"}," Далее ",8,ce)])])):w("",!0)])])}const me=M(E,[["render",ge],["__scopeId","data-v-2be94f82"]]);export{me as default};
