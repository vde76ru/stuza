import{_ as K,g as m,p as N,a,c as r,b as t,t as d,j as w,v as z,F as C,l as S,m as b,i as Te,s as ne,f as re,e as T,h as H,o as je,r as G,d as se,w as oe,k as ae,u as E,y as Le,n as y,q as J}from"./main-1c80cd6b.js";const ze={name:"SimpleList",props:{title:{type:String,required:!0},items:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["create","edit","delete"],setup(u){const e=m(""),i=N(()=>{if(!e.value)return u.items;const s=e.value.toLowerCase();return u.items.filter(p=>p.name.toLowerCase().includes(s)||p.slug&&p.slug.toLowerCase().includes(s))});return{searchQuery:e,filteredItems:i}}},Me={class:"space-y-4"},Fe={class:"flex justify-between items-center"},Pe={class:"text-xl font-semibold text-white"},Ie={class:"mb-4"},Ve=["placeholder"],Ue={key:0,class:"text-center py-8"},De={key:1,class:"text-center py-8"},Oe={class:"text-gray-400"},qe={key:2,class:"space-y-2"},Be={class:"text-white font-medium"},Ee={key:0,class:"text-gray-400 text-sm"},Ne={class:"flex space-x-2"},Ae=["onClick"],Re=["onClick"];function Qe(u,e,i,s,p,_){return a(),r("div",Me,[t("div",Fe,[t("h3",Pe,d(i.title),1),t("button",{onClick:e[0]||(e[0]=g=>u.$emit("create")),class:"bg-stuzha-accent hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"}," + Добавить "+d(i.title.toLowerCase()),1)]),t("div",Ie,[w(t("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>s.searchQuery=g),type:"text",placeholder:`Поиск ${i.title.toLowerCase()}...`,class:"w-full max-w-md bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white placeholder-gray-400 focus:border-stuzha-accent focus:outline-none"},null,8,Ve),[[z,s.searchQuery]])]),i.loading?(a(),r("div",Ue,e[2]||(e[2]=[t("div",{class:"text-gray-400"},"Загрузка...",-1)]))):s.filteredItems.length===0?(a(),r("div",De,[t("div",Oe,d(s.searchQuery?"Ничего не найдено":`Нет ${i.title.toLowerCase()}`),1)])):(a(),r("div",qe,[(a(!0),r(C,null,S(s.filteredItems,g=>(a(),r("div",{key:g.id,class:"bg-gray-800 rounded-lg p-4 flex justify-between items-center hover:bg-gray-700 transition-colors"},[t("div",null,[t("h4",Be,d(g.name),1),g.slug?(a(),r("p",Ee,"Slug: "+d(g.slug),1)):b("",!0)]),t("div",Ne,[t("button",{onClick:v=>u.$emit("edit",g),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Редактировать ",8,Ae),t("button",{onClick:v=>u.$emit("delete",g),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,Re)])]))),128))]))])}const We=K(ze,[["render",Qe]]),He={name:"SimpleModal",props:{mode:{type:String,required:!0,validator:u=>["create","edit"].includes(u)},entityType:{type:String,required:!0},form:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["save","close"],setup(u){const e=N(()=>u.entityType.toLowerCase()==="категорию"),i=N(()=>!(!u.form.name||e.value&&!u.form.slug));return Te(()=>u.form.name,s=>{if(e.value&&u.mode==="create"&&s){const p=s.toLowerCase().replace(/а/g,"a").replace(/б/g,"b").replace(/в/g,"v").replace(/г/g,"g").replace(/д/g,"d").replace(/е/g,"e").replace(/ё/g,"yo").replace(/ж/g,"zh").replace(/з/g,"z").replace(/и/g,"i").replace(/й/g,"y").replace(/к/g,"k").replace(/л/g,"l").replace(/м/g,"m").replace(/н/g,"n").replace(/о/g,"o").replace(/п/g,"p").replace(/р/g,"r").replace(/с/g,"s").replace(/т/g,"t").replace(/у/g,"u").replace(/ф/g,"f").replace(/х/g,"kh").replace(/ц/g,"ts").replace(/ч/g,"ch").replace(/ш/g,"sh").replace(/щ/g,"sch").replace(/ъ/g,"").replace(/ы/g,"y").replace(/ь/g,"").replace(/э/g,"e").replace(/ю/g,"yu").replace(/я/g,"ya");u.form.slug=p.replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}},{immediate:!1}),{showSlug:e,isValid:i}}},Ge={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Je={class:"bg-gray-800 rounded-lg max-w-md w-full"},Ke={class:"p-6"},Xe={class:"text-xl font-semibold mb-6 text-white"},Ye=["placeholder"],Ze={key:0},$e={class:"flex justify-end space-x-3 pt-4"},et=["disabled"];function tt(u,e,i,s,p,_){return a(),r("div",Ge,[t("div",Je,[t("div",Ke,[t("h3",Xe,d(i.mode==="create"?`Добавить ${i.entityType}`:`Редактировать ${i.entityType}`),1),t("form",{onSubmit:e[3]||(e[3]=ne(g=>u.$emit("save"),["prevent"])),class:"space-y-4"},[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium mb-1 text-white"},"Название *",-1)),w(t("input",{"onUpdate:modelValue":e[0]||(e[0]=g=>i.form.name=g),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:border-stuzha-accent focus:outline-none",placeholder:`Введите название ${i.entityType.toLowerCase()}`},null,8,Ye),[[z,i.form.name]])]),s.showSlug?(a(),r("div",Ze,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium mb-1 text-white"},"Slug *",-1)),w(t("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>i.form.slug=g),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:border-stuzha-accent focus:outline-none",placeholder:"url-slug"},null,512),[[z,i.form.slug]]),e[6]||(e[6]=t("p",{class:"text-gray-400 text-xs mt-1"},"Используется в URL. Только латиница, цифры и дефисы.",-1))])):b("",!0),t("div",$e,[t("button",{type:"button",onClick:e[2]||(e[2]=g=>u.$emit("close")),class:"px-4 py-2 text-gray-400 hover:text-white transition-colors"}," Отмена "),t("button",{type:"submit",disabled:!s.isValid||i.loading,class:"bg-stuzha-accent hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50"},d(i.loading?"Сохранение...":"Сохранить"),9,et)])],32)])])])}const st=K(He,[["render",tt]]),ot={name:"ConfirmModal",props:{itemName:{type:String,required:!0},entityType:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["confirm","cancel"]},at={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},nt={class:"bg-gray-800 rounded-lg max-w-md w-full"},rt={class:"p-6"},lt={class:"mb-6"},it={class:"text-gray-300"},dt={class:"font-semibold text-white"},ct={key:0,class:"mb-6 p-3 bg-yellow-900/30 border border-yellow-600 rounded-lg"},gt={class:"flex justify-end space-x-3"},ut=["disabled"],mt=["disabled"],yt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"};function pt(u,e,i,s,p,_){return a(),r("div",at,[t("div",nt,[t("div",rt,[e[7]||(e[7]=re('<div class="flex items-center mb-4"><div class="flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-4"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div><h3 class="text-lg font-semibold text-white">Подтвердите удаление</h3></div></div>',1)),t("div",lt,[t("p",it,[e[2]||(e[2]=T(" Вы действительно хотите удалить ")),t("span",dt,d(i.itemName),1),e[3]||(e[3]=T("? "))]),e[4]||(e[4]=t("p",{class:"text-gray-400 text-sm mt-2"}," Это действие нельзя отменить. ",-1))]),i.entityType==="product"?(a(),r("div",ct,e[5]||(e[5]=[t("p",{class:"text-yellow-200 text-sm"},[t("strong",null,"Внимание:"),T(" При удалении товара также будут удалены все связанные изображения и связи с категориями. ")],-1)]))):b("",!0),t("div",gt,[t("button",{type:"button",onClick:e[0]||(e[0]=g=>u.$emit("cancel")),class:"px-4 py-2 text-gray-400 hover:text-white transition-colors",disabled:i.loading}," Отмена ",8,ut),t("button",{type:"button",onClick:e[1]||(e[1]=g=>u.$emit("confirm")),disabled:i.loading,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center"},[i.loading?(a(),r("svg",yt,e[6]||(e[6]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):b("",!0),T(" "+d(i.loading?"Удаление...":"Удалить"),1)],8,mt)])])])])}const bt=K(ot,[["render",pt]]),xt={name:"AdminPanel",components:{SimpleList:We,SimpleModal:st,ConfirmModal:bt},setup(){const u=Le(),e=m("products"),i=m(!1),s=m(!1),p=m("create"),_=m("category"),g=m(!1),v=m(null),A=m(""),R=m(""),I=m(""),V=m(null),j=m("product"),U=m([]),M=m(!1),f=H({current_page:1,per_page:24,total:0}),D=m([]),o=m([]),x=m([]),O=m([]),q=m(null),L=H({id:null,name:"",slug:""}),X=H({current_password:"",new_password:"",new_password_confirmation:""}),F=H({current_page:1,per_page:15,total:0}),le=m([{id:"wildberries",name:"Wildberries",description:"Российский маркетплейс товаров для дома и семьи",status:"disconnected"},{id:"ozon",name:"Ozon",description:"Крупнейший российский интернет-ритейлер",status:"disconnected"},{id:"yandex_market",name:"Яндекс.Маркет",description:"Торговая площадка Яндекса",status:"disconnected"},{id:"flowwow",name:"Flowwow",description:"Платформа для доставки цветов и подарков",status:"disconnected"}]),Y=m(!1),ie=[{id:"products",name:"Товары"},{id:"images",name:"Изображения"},{id:"categories",name:"Категории"},{id:"themes",name:"Темы"},{id:"attributes",name:"Атрибуты"},{id:"quiz",name:"Квиз"},{id:"marketplace",name:"Маркетплейсы"},{id:"settings",name:"Настройки"}],de=N(()=>Math.ceil(F.total/F.per_page)),ce=N(()=>Math.ceil(f.total/f.per_page)),Q=async(n=1)=>{var l,c,h;i.value=!0;try{const k={page:n,per_page:F.per_page,search:A.value,theme_id:R.value,status:I.value},P=await y.get("/admin/products",{params:k});D.value=P.data.data,Object.assign(F,P.data.meta||P.data)}catch(k){console.error("Ошибка загрузки товаров:",k),((l=k.response)==null?void 0:l.status)===401?B():alert("Ошибка загрузки товаров: "+(((h=(c=k.response)==null?void 0:c.data)==null?void 0:h.message)||"Неизвестная ошибка"))}finally{i.value=!1}},ge=()=>{clearTimeout(V.value),V.value=setTimeout(()=>{Q(1)},500)},W=async(n=1)=>{M.value=!0;try{const l={page:n,per_page:f.per_page,type:j.value},c=await y.get("/admin/images",{params:l});U.value=c.data.images||[],Object.assign(f,c.data.pagination||{})}catch(l){console.error("Ошибка загрузки изображений:",l),alert("Ошибка загрузки изображений")}finally{M.value=!1}},ue=async n=>{var h,k;const l=n.target.files[0];if(!l)return;const c=new FormData;c.append("image",l),c.append("type",j.value);try{i.value=!0,await y.post("/admin/images/upload",c,{headers:{"Content-Type":"multipart/form-data"}}),alert("Изображение успешно загружено"),W(f.current_page)}catch(P){console.error("Ошибка загрузки изображения:",P),alert("Ошибка загрузки изображения: "+(((k=(h=P.response)==null?void 0:h.data)==null?void 0:k.message)||"Неизвестная ошибка"))}finally{i.value=!1,n.target.value=""}},me=n=>{navigator.clipboard.writeText(n).then(()=>{alert("URL скопирован в буфер обмена")})},ye=async n=>{if(confirm(`Удалить изображение ${n.filename}?`))try{await y.delete(`/admin/images/${n.filename}`,{params:{type:j.value}}),alert("Изображение удалено"),W(f.current_page)}catch(l){console.error("Ошибка удаления изображения:",l),alert("Ошибка удаления изображения")}},Z=async()=>{var n;try{const l=await y.get("/admin/categories");o.value=l.data||[]}catch(l){console.error("Ошибка загрузки категорий:",l),((n=l.response)==null?void 0:n.status)===401?B():alert("Ошибка загрузки категорий")}},$=async()=>{var n;try{const l=await y.get("/admin/themes");x.value=l.data||[]}catch(l){console.error("Ошибка загрузки тем:",l),((n=l.response)==null?void 0:n.status)===401?B():alert("Ошибка загрузки тем")}},ee=async()=>{var n;try{const l=await y.get("/admin/attributes");O.value=l.data||[]}catch(l){console.error("Ошибка загрузки атрибутов:",l),((n=l.response)==null?void 0:n.status)===401?B():alert("Ошибка загрузки атрибутов")}},te=async()=>{try{const n=await y.get("/admin/stats");q.value=n.data||{}}catch(n){console.error("Ошибка загрузки статистики:",n)}},pe=n=>{p.value="create",_.value=n,ke(),s.value=!0},be=(n,l)=>{p.value="edit",_.value=l,Object.assign(L,{id:n.id,name:n.name,slug:n.slug||""}),s.value=!0},xe=async()=>{var n,l;i.value=!0;try{const c=`/admin/${_.value}s`;switch(p.value==="create"?await y.post(c,L):await y.put(`${c}/${L.id}`,L),s.value=!1,_.value){case"category":Z();break;case"theme":$();break;case"attribute":ee();break}te()}catch(c){console.error("Ошибка сохранения:",c),alert(((l=(n=c.response)==null?void 0:n.data)==null?void 0:l.message)||"Ошибка сохранения")}finally{i.value=!1}},ve=(n,l)=>{v.value={item:n,type:l},g.value=!0},fe=async()=>{var n,l;if(v.value){i.value=!0;try{const{item:c,type:h}=v.value;switch(h){case"product":await y.delete(`/admin/products/${c.id}`),Q(F.current_page);break;case"category":await y.delete(`/admin/categories/${c.id}`),Z();break;case"theme":await y.delete(`/admin/themes/${c.id}`),$();break;case"attribute":await y.delete(`/admin/attributes/${c.id}`),ee();break}g.value=!1,v.value=null,te()}catch(c){console.error("Ошибка удаления:",c),alert(((l=(n=c.response)==null?void 0:n.data)==null?void 0:l.message)||"Ошибка удаления")}finally{i.value=!1}}},he=async()=>{var n,l;i.value=!0;try{await y.put("/admin/change-password",X),alert("Пароль успешно изменен"),Object.assign(X,{current_password:"",new_password:"",new_password_confirmation:""})}catch(c){console.error("Ошибка смены пароля:",c),alert(((l=(n=c.response)==null?void 0:n.data)==null?void 0:l.message)||"Ошибка смены пароля")}finally{i.value=!1}},we=async n=>{var l,c;Y.value=!0;try{await y.post("/marketplace/sync",{marketplace:n}),alert("Синхронизация завершена")}catch(h){console.error("Ошибка синхронизации:",h),alert("Ошибка синхронизации: "+(((c=(l=h.response)==null?void 0:l.data)==null?void 0:c.message)||"Неизвестная ошибка"))}finally{Y.value=!1}},_e=n=>{alert(`Настройка ${n} в разработке`)},ke=()=>{Object.assign(L,{id:null,name:"",slug:""})},B=()=>{localStorage.removeItem("auth_token"),delete y.defaults.headers.common.Authorization,u.push("/admin/login")},Ce=n=>new Intl.NumberFormat("ru-RU").format(n),Se=n=>({category:"категорию",theme:"тему",attribute:"атрибут"})[n]||n;return je(()=>{Q(),Z(),$(),ee(),te(),W()}),{activeTab:e,loading:i,modalOpen:s,modalMode:p,modalType:_,deleteConfirmOpen:g,itemToDelete:v,productSearch:A,productThemeFilter:R,productStatusFilter:I,products:D,categories:o,themes:x,attributes:O,stats:q,simpleForm:L,passwordForm:X,productsPagination:F,imageType:j,images:U,imagesLoading:M,imagesPagination:f,marketplaces:le,syncLoading:Y,tabs:ie,totalPages:de,imagesTotalPages:ce,loadProducts:Q,debounceSearch:ge,loadImages:W,uploadImage:ue,copyImageUrl:me,deleteImage:ye,openCreateSimple:pe,openEditSimple:be,saveSimple:xe,confirmDelete:ve,deleteItem:fe,changePassword:he,syncMarketplace:we,configureMarketplace:_e,logout:B,formatPrice:Ce,getEntityTypeName:Se}}},vt={class:"admin-panel min-h-screen bg-gray-900 p-6"},ft={class:"max-w-7xl mx-auto"},ht={class:"flex justify-between items-center mb-8"},wt={class:"hidden lg:flex space-x-4"},_t={key:0,class:"bg-gray-800 rounded-lg p-4 text-center"},kt={class:"text-2xl font-bold text-blue-400"},Ct={key:1,class:"bg-gray-800 rounded-lg p-4 text-center"},St={class:"text-2xl font-bold text-green-400"},Tt={key:2,class:"bg-gray-800 rounded-lg p-4 text-center"},jt={class:"text-2xl font-bold text-purple-400"},Lt={class:"bg-gray-800 rounded-lg p-2 mb-8"},zt={class:"flex flex-wrap space-x-1"},Mt=["onClick"],Ft={class:"bg-gray-800 rounded-lg p-6"},Pt={key:0},It={class:"flex justify-between items-center mb-6"},Vt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Ut=["value"],Dt={key:0,class:"text-center py-8"},Ot={key:1,class:"text-center py-8"},qt={key:2,class:"space-y-4"},Bt={class:"flex items-center space-x-4"},Et=["src","alt"],Nt={key:1,class:"w-16 h-16 bg-gray-600 rounded-lg flex items-center justify-center"},At={class:"text-white font-medium"},Rt={class:"text-gray-400 text-sm"},Qt={class:"text-gray-500 text-xs"},Wt={class:"flex space-x-2 mt-1"},Ht={key:0,class:"bg-purple-600 text-white px-2 py-1 rounded text-xs"},Gt={class:"bg-gray-600 text-gray-300 px-2 py-1 rounded text-xs"},Jt={class:"flex space-x-2"},Kt=["onClick"],Xt={key:0,class:"flex justify-center space-x-2 mt-6"},Yt=["onClick"],Zt={key:1},$t={class:"flex justify-between items-center mb-6"},es={class:"flex space-x-2"},ts={class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg cursor-pointer transition-colors"},ss={key:0,class:"text-center py-8"},os={key:1,class:"text-center py-8"},as={key:2},ns={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6"},rs=["src","alt"],ls={class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},is={class:"flex space-x-2"},ds=["onClick"],cs=["onClick"],gs={class:"p-2"},us={class:"text-white text-xs truncate"},ms={class:"text-gray-400 text-xs"},ys={key:0,class:"flex justify-center space-x-2"},ps=["onClick"],bs={key:5},xs={key:6},vs={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fs={class:"flex items-center justify-between mb-4"},hs={class:"text-lg font-semibold text-white"},ws={class:"text-gray-300 text-sm mb-4"},_s={class:"flex space-x-2"},ks=["onClick","disabled"],Cs=["onClick"],Ss={key:7},Ts={class:"space-y-6"},js={class:"bg-gray-700 rounded-lg p-6"},Ls=["disabled"],zs={key:0,class:"bg-gray-700 rounded-lg p-6"},Ms={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Fs={class:"text-center"},Ps={class:"text-2xl font-bold text-blue-400"},Is={class:"text-center"},Vs={class:"text-2xl font-bold text-purple-400"},Us={class:"text-center"},Ds={class:"text-2xl font-bold text-green-400"},Os={class:"text-center"},qs={class:"text-2xl font-bold text-yellow-400"};function Bs(u,e,i,s,p,_){var I,V,j,U,M,f,D;const g=G("router-link"),v=G("SimpleList"),A=G("SimpleModal"),R=G("ConfirmModal");return a(),r("div",vt,[t("div",ft,[t("div",ht,[e[28]||(e[28]=t("div",null,[t("h1",{class:"text-3xl font-bold text-white"},'Админ-панель "Стужа"'),t("p",{class:"text-gray-400 mt-1"},"Управление интернет-магазином украшений")],-1)),t("div",wt,[s.stats?(a(),r("div",_t,[t("div",kt,d(((I=s.stats.products)==null?void 0:I.total)||0),1),e[25]||(e[25]=t("div",{class:"text-gray-400 text-sm"},"Товаров",-1))])):b("",!0),s.stats?(a(),r("div",Ct,[t("div",St,d(s.stats.categories||0),1),e[26]||(e[26]=t("div",{class:"text-gray-400 text-sm"},"Категорий",-1))])):b("",!0),s.stats?(a(),r("div",Tt,[t("div",jt,d(((V=s.stats.products)==null?void 0:V.matryoshka)||0),1),e[27]||(e[27]=t("div",{class:"text-gray-400 text-sm"},"Матрёшек",-1))])):b("",!0)]),t("button",{onClick:e[0]||(e[0]=(...o)=>s.logout&&s.logout(...o)),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors"}," Выйти ")]),t("div",Lt,[t("nav",zt,[(a(!0),r(C,null,S(s.tabs,o=>(a(),r("button",{key:o.id,onClick:x=>s.activeTab=o.id,class:J(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",s.activeTab===o.id?"bg-stuzha-accent text-white":"text-gray-300 hover:text-white hover:bg-gray-700"])},d(o.name),11,Mt))),128))])]),t("div",Ft,[s.activeTab==="products"?(a(),r("div",Pt,[t("div",It,[e[30]||(e[30]=t("h2",{class:"text-2xl font-semibold text-white"},"Товары",-1)),se(g,{to:"/admin/products/create",class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-colors"},{default:oe(()=>e[29]||(e[29]=[T(" Создать товар ")])),_:1,__:[29]})]),t("div",Vt,[w(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.productSearch=o),onInput:e[2]||(e[2]=(...o)=>s.debounceSearch&&s.debounceSearch(...o)),placeholder:"Поиск товаров...",class:"bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"},null,544),[[z,s.productSearch]]),w(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.productThemeFilter=o),onChange:e[4]||(e[4]=o=>s.loadProducts(1)),class:"bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"},[e[31]||(e[31]=t("option",{value:""},"Все темы",-1)),(a(!0),r(C,null,S(s.themes,o=>(a(),r("option",{key:o.id,value:o.id},d(o.name),9,Ut))),128))],544),[[ae,s.productThemeFilter]]),w(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.productStatusFilter=o),onChange:e[6]||(e[6]=o=>s.loadProducts(1)),class:"bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"},e[32]||(e[32]=[t("option",{value:""},"Все товары",-1),t("option",{value:"matryoshka"},"Только матрёшки",-1),t("option",{value:"regular"},"Обычные товары",-1)]),544),[[ae,s.productStatusFilter]])]),s.loading?(a(),r("div",Dt,e[33]||(e[33]=[t("div",{class:"text-gray-400"},"Загрузка товаров...",-1)]))):s.products.length===0?(a(),r("div",Ot,[e[35]||(e[35]=t("div",{class:"text-gray-400"},"Товары не найдены",-1)),se(g,{to:"/admin/products/create",class:"inline-block mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors"},{default:oe(()=>e[34]||(e[34]=[T(" Создать первый товар ")])),_:1,__:[34]})])):(a(),r("div",qt,[(a(!0),r(C,null,S(s.products,o=>{var x,O,q;return a(),r("div",{key:o.id,class:"bg-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-600 transition-colors"},[t("div",Bt,[(x=o.gallery_images)!=null&&x[0]?(a(),r("img",{key:0,src:o.gallery_images[0],alt:o.name,class:"w-16 h-16 object-cover rounded-lg"},null,8,Et)):(a(),r("div",Nt,e[36]||(e[36]=[t("span",{class:"text-gray-400 text-xs"},"Нет фото",-1)]))),t("div",null,[t("h4",At,d(o.name),1),t("p",Rt,d(s.formatPrice(o.price))+" ₽",1),t("p",Qt,"Тема: "+d(((O=o.theme)==null?void 0:O.name)||"Не указана"),1),t("div",Wt,[o.use_matryoshka?(a(),r("span",Ht," Матрёшка ")):b("",!0),t("span",Gt,d(((q=o.categories)==null?void 0:q.length)||0)+" категорий ",1)])])]),t("div",Jt,[se(g,{to:`/admin/products/edit/${o.id}`,class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"},{default:oe(()=>e[37]||(e[37]=[T(" Редактировать ")])),_:2,__:[37]},1032,["to"]),t("button",{onClick:L=>s.confirmDelete(o,"product"),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,Kt)])])}),128)),s.totalPages>1?(a(),r("div",Xt,[(a(!0),r(C,null,S(s.totalPages,o=>(a(),r("button",{key:o,onClick:x=>s.loadProducts(o),class:J(["px-3 py-1 rounded transition-colors",s.productsPagination.current_page===o?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},d(o),11,Yt))),128))])):b("",!0)]))])):s.activeTab==="images"?(a(),r("div",Zt,[t("div",$t,[e[40]||(e[40]=t("h2",{class:"text-2xl font-semibold text-white"},"Файловый менеджер",-1)),t("div",es,[w(t("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.imageType=o),onChange:e[8]||(e[8]=o=>s.loadImages(1)),class:"bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600"},e[38]||(e[38]=[t("option",{value:"product"},"Товары",-1),t("option",{value:"matryoshka_outer"},"Матрёшка (внешний слой)",-1),t("option",{value:"matryoshka_inner"},"Матрёшка (внутренний слой)",-1)]),544),[[ae,s.imageType]]),t("label",ts,[t("input",{type:"file",onChange:e[9]||(e[9]=(...o)=>s.uploadImage&&s.uploadImage(...o)),accept:"image/*",class:"hidden"},null,32),e[39]||(e[39]=T(" Загрузить изображение "))])])]),s.imagesLoading?(a(),r("div",ss,e[41]||(e[41]=[t("div",{class:"text-gray-400"},"Загрузка изображений...",-1)]))):s.images.length===0?(a(),r("div",os,e[42]||(e[42]=[t("div",{class:"text-gray-400"},"Изображения не найдены",-1)]))):(a(),r("div",as,[t("div",ns,[(a(!0),r(C,null,S(s.images,o=>(a(),r("div",{key:o.filename,class:"relative group bg-gray-700 rounded-lg overflow-hidden"},[t("img",{src:o.url,alt:o.filename,class:"w-full h-32 object-cover"},null,8,rs),t("div",ls,[t("div",is,[t("button",{onClick:x=>s.copyImageUrl(o.url),class:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded text-xs",title:"Скопировать URL"}," 📋 ",8,ds),t("button",{onClick:x=>s.deleteImage(o),class:"bg-red-600 hover:bg-red-700 text-white p-2 rounded text-xs",title:"Удалить"}," 🗑️ ",8,cs)])]),t("div",gs,[t("div",us,d(o.filename),1),t("div",ms,d(o.size_human),1)])]))),128))]),s.imagesTotalPages>1?(a(),r("div",ys,[(a(!0),r(C,null,S(s.imagesTotalPages,o=>(a(),r("button",{key:o,onClick:x=>s.loadImages(o),class:J(["px-3 py-1 rounded transition-colors",s.imagesPagination.current_page===o?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},d(o),11,ps))),128))])):b("",!0)]))])):s.activeTab==="categories"?(a(),E(v,{key:2,title:"Категории",items:s.categories,loading:s.loading,onCreate:e[10]||(e[10]=o=>s.openCreateSimple("category")),onEdit:e[11]||(e[11]=o=>s.openEditSimple(o,"category")),onDelete:e[12]||(e[12]=o=>s.confirmDelete(o,"category"))},null,8,["items","loading"])):s.activeTab==="themes"?(a(),E(v,{key:3,title:"Темы",items:s.themes,loading:s.loading,onCreate:e[13]||(e[13]=o=>s.openCreateSimple("theme")),onEdit:e[14]||(e[14]=o=>s.openEditSimple(o,"theme")),onDelete:e[15]||(e[15]=o=>s.confirmDelete(o,"theme"))},null,8,["items","loading"])):s.activeTab==="attributes"?(a(),E(v,{key:4,title:"Атрибуты",items:s.attributes,loading:s.loading,onCreate:e[16]||(e[16]=o=>s.openCreateSimple("attribute")),onEdit:e[17]||(e[17]=o=>s.openEditSimple(o,"attribute")),onDelete:e[18]||(e[18]=o=>s.confirmDelete(o,"attribute"))},null,8,["items","loading"])):s.activeTab==="quiz"?(a(),r("div",bs,e[43]||(e[43]=[re('<h2 class="text-2xl font-semibold text-white mb-6">Правила астрологического квиза</h2><p class="text-gray-400 mb-4">Управление правилами подбора камней по дате рождения</p><div class="bg-gray-700 rounded-lg p-4"><p class="text-gray-300">Функционал в разработке</p><button class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"> Создать правило </button></div>',3)]))):s.activeTab==="marketplace"?(a(),r("div",xs,[e[44]||(e[44]=t("h2",{class:"text-2xl font-semibold text-white mb-6"},"Синхронизация с маркетплейсами",-1)),e[45]||(e[45]=t("p",{class:"text-gray-400 mb-4"},"Управление синхронизацией с Wildberries, Ozon, Яндекс.Маркет, flowwow",-1)),t("div",vs,[(a(!0),r(C,null,S(s.marketplaces,o=>(a(),r("div",{key:o.id,class:"bg-gray-700 rounded-lg p-4"},[t("div",fs,[t("h3",hs,d(o.name),1),t("span",{class:J(["px-3 py-1 rounded-full text-xs font-medium",o.status==="connected"?"bg-green-600 text-white":"bg-red-600 text-white"])},d(o.status==="connected"?"Подключен":"Отключен"),3)]),t("p",ws,d(o.description),1),t("div",_s,[t("button",{onClick:x=>s.syncMarketplace(o.id),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm transition-colors",disabled:s.syncLoading},d(s.syncLoading?"Синхронизация...":"Синхронизировать"),9,ks),t("button",{onClick:x=>s.configureMarketplace(o.id),class:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded text-sm transition-colors"}," Настройки ",8,Cs)])]))),128))])])):s.activeTab==="settings"?(a(),r("div",Ss,[e[52]||(e[52]=t("h2",{class:"text-2xl font-semibold text-white mb-6"},"Настройки",-1)),t("div",Ts,[t("div",js,[e[46]||(e[46]=t("h3",{class:"text-lg font-semibold text-white mb-4"},"Смена пароля",-1)),t("form",{onSubmit:e[22]||(e[22]=ne((...o)=>s.changePassword&&s.changePassword(...o),["prevent"])),class:"space-y-4"},[w(t("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>s.passwordForm.current_password=o),type:"password",placeholder:"Текущий пароль",class:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg border border-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[z,s.passwordForm.current_password]]),w(t("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>s.passwordForm.new_password=o),type:"password",placeholder:"Новый пароль",class:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg border border-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[z,s.passwordForm.new_password]]),w(t("input",{"onUpdate:modelValue":e[21]||(e[21]=o=>s.passwordForm.new_password_confirmation=o),type:"password",placeholder:"Подтверждение нового пароля",class:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg border border-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[z,s.passwordForm.new_password_confirmation]]),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",disabled:s.loading},d(s.loading?"Изменение...":"Изменить пароль"),9,Ls)],32)]),s.stats?(a(),r("div",zs,[e[51]||(e[51]=t("h3",{class:"text-lg font-semibold text-white mb-4"},"Статистика системы",-1)),t("div",Ms,[t("div",Fs,[t("div",Ps,d(((j=s.stats.products)==null?void 0:j.total)||0),1),e[47]||(e[47]=t("div",{class:"text-gray-400 text-sm"},"Всего товаров",-1))]),t("div",Is,[t("div",Vs,d(((U=s.stats.products)==null?void 0:U.matryoshka)||0),1),e[48]||(e[48]=t("div",{class:"text-gray-400 text-sm"},"Матрёшки",-1))]),t("div",Us,[t("div",Ds,d(s.stats.categories||0),1),e[49]||(e[49]=t("div",{class:"text-gray-400 text-sm"},"Категорий",-1))]),t("div",Os,[t("div",qs,d(((M=s.stats.storage)==null?void 0:M.total_size_human)||"0 B"),1),e[50]||(e[50]=t("div",{class:"text-gray-400 text-sm"},"Размер файлов",-1))])])])):b("",!0)])])):b("",!0)])]),s.modalOpen?(a(),E(A,{key:0,mode:s.modalMode,"entity-type":s.getEntityTypeName(s.modalType),form:s.simpleForm,loading:s.loading,onSave:s.saveSimple,onClose:e[23]||(e[23]=o=>s.modalOpen=!1)},null,8,["mode","entity-type","form","loading","onSave"])):b("",!0),s.deleteConfirmOpen?(a(),E(R,{key:1,"item-name":((D=(f=s.itemToDelete)==null?void 0:f.item)==null?void 0:D.name)||"элемент",loading:s.loading,onConfirm:s.deleteItem,onCancel:e[24]||(e[24]=o=>s.deleteConfirmOpen=!1)},null,8,["item-name","loading","onConfirm"])):b("",!0)])}const Ns=K(xt,[["render",Bs]]);export{Ns as default};
