import{_ as jt,g as u,h as R,p as Tt,o as Mt,r as St,a as l,c as a,b as t,t as i,m as b,F as y,l as v,d as X,w as Y,e as E,j as m,v as C,k as W,s as j,z as Pt,y as Ut,n as d,q as L}from"./main-07a7457e.js";const It={name:"AdminPanel",setup(){const G=Ut(),s=u("products"),F=u(!1),e=u(!1),T=u({data:[],current_page:1,last_page:1}),H=u([]),M=u([]),S=u([]),f=u([]),o=u(null),c=u([]),x=u(null),J=u(""),K=u(""),Q=u("created_at"),U=u(!1),I=u(!1),D=u(!1),O=u(!1),_=R({id:null,name:"",parent_id:null,sort_order:0}),w=R({id:null,name:""}),k=R({id:null,name:""}),h=R({id:null,attribute_id:null,value:"",sort_order:0,is_active:!0}),Z=[{id:"products",name:"Товары"},{id:"categories",name:"Категории"},{id:"themes",name:"Темы"},{id:"attributes",name:"Атрибуты"},{id:"images",name:"Изображения"}],$=Tt(()=>{const r=[],n=T.value.current_page,g=T.value.last_page;for(let p=Math.max(1,n-2);p<=Math.min(g,n+2);p++)r.push(p);return r}),A=async()=>{try{const r=await d.get("/admin/stats");x.value=r.data}catch(r){console.error("Ошибка загрузки статистики:",r)}},P=async(r=1)=>{try{F.value=!0;const n={page:r,search:J.value,theme_id:K.value,sort_by:Q.value},g=await d.get("/admin/products",{params:n});T.value=g.data}catch(n){console.error("Ошибка загрузки товаров:",n)}finally{F.value=!1}},z=async()=>{try{const r=await d.get("/admin/categories");H.value=r.data}catch(r){console.error("Ошибка загрузки категорий:",r)}},q=async()=>{try{const r=await d.get("/admin/themes");M.value=r.data}catch(r){console.error("Ошибка загрузки тем:",r)}},V=async()=>{try{const r=await d.get("/admin/attributes");S.value=r.data}catch(r){console.error("Ошибка загрузки атрибутов:",r)}},N=async r=>{try{const n=await d.get(`/admin/attributes/${r}/values`);f.value=n.data.values}catch(n){console.error("Ошибка загрузки значений атрибутов:",n),f.value=[]}},B=async()=>{try{F.value=!0;const r=await d.get("/admin/images");c.value=r.data.data||r.data}catch(r){console.error("Ошибка загрузки изображений:",r)}finally{F.value=!1}},tt=async r=>{if(confirm("Удалить этот товар? Это действие нельзя отменить."))try{await d.delete(`/admin/products/${r}`),alert("Товар удален!"),P(),A()}catch(n){console.error("Ошибка удаления товара:",n),alert("Ошибка удаления товара")}},et=()=>{Object.assign(_,{id:null,name:"",parent_id:null,sort_order:0}),U.value=!0},ot=r=>{Object.assign(_,{id:r.id,name:r.name,parent_id:r.parent_id,sort_order:r.sort_order||0}),U.value=!0},st=async()=>{try{e.value=!0,_.id?(await d.put(`/admin/categories/${_.id}`,_),alert("Категория обновлена!")):(await d.post("/admin/categories",_),alert("Категория создана!")),U.value=!1,z(),A()}catch(r){console.error("Ошибка сохранения категории:",r),alert("Ошибка сохранения категории")}finally{e.value=!1}},rt=async r=>{if(confirm("Удалить эту категорию? Все товары в ней потеряют категорию."))try{await d.delete(`/admin/categories/${r}`),alert("Категория удалена!"),z(),A()}catch(n){console.error("Ошибка удаления категории:",n),alert("Ошибка удаления категории")}},lt=()=>{Object.assign(w,{id:null,name:""}),I.value=!0},at=r=>{Object.assign(w,{id:r.id,name:r.name}),I.value=!0},it=async()=>{try{e.value=!0,w.id?(await d.put(`/admin/themes/${w.id}`,w),alert("Тема обновлена!")):(await d.post("/admin/themes",w),alert("Тема создана!")),I.value=!1,q(),A()}catch(r){console.error("Ошибка сохранения темы:",r),alert("Ошибка сохранения темы")}finally{e.value=!1}},nt=async r=>{if(confirm("Удалить эту тему? Все товары в ней потеряют тему."))try{await d.delete(`/admin/themes/${r}`),alert("Тема удалена!"),q(),A()}catch(n){console.error("Ошибка удаления темы:",n),alert("Ошибка удаления темы")}},dt=r=>{o.value=r,N(r.id)},ct=()=>{Object.assign(k,{id:null,name:""}),D.value=!0},ut=r=>{Object.assign(k,{id:r.id,name:r.name}),D.value=!0},bt=async()=>{try{e.value=!0,k.id?(await d.put(`/admin/attributes/${k.id}`,k),alert("Атрибут обновлен!")):(await d.post("/admin/attributes",k),alert("Атрибут создан!")),D.value=!1,V()}catch(r){console.error("Ошибка сохранения атрибута:",r),alert("Ошибка сохранения атрибута")}finally{e.value=!1}},gt=async r=>{var n;if(confirm("Удалить этот атрибут? Все связанные товары потеряют этот атрибут."))try{await d.delete(`/admin/attributes/${r}`),alert("Атрибут удален!"),V(),((n=o.value)==null?void 0:n.id)===r&&(o.value=null,f.value=[])}catch(g){console.error("Ошибка удаления атрибута:",g),alert("Ошибка удаления атрибута")}},mt=()=>{if(!o.value){alert("Сначала выберите атрибут");return}Object.assign(h,{id:null,attribute_id:o.value.id,value:"",sort_order:0,is_active:!0}),O.value=!0},xt=r=>{Object.assign(h,{id:r.id,attribute_id:r.attribute_id,value:r.value,sort_order:r.sort_order||0,is_active:r.is_active}),O.value=!0},yt=async()=>{try{e.value=!0,h.id?(await d.put(`/admin/attribute-values/${h.id}`,h),alert("Значение обновлено!")):(await d.post(`/admin/attributes/${h.attribute_id}/values`,h),alert("Значение создано!")),O.value=!1,N(o.value.id),V()}catch(r){console.error("Ошибка сохранения значения:",r),alert("Ошибка сохранения значения")}finally{e.value=!1}},vt=async r=>{if(confirm("Удалить это значение?"))try{await d.delete(`/admin/attribute-values/${r}`),alert("Значение удалено!"),N(o.value.id),V()}catch(n){console.error("Ошибка удаления значения:",n),alert("Ошибка удаления значения")}},ht=async r=>{const n=r.target.files;if(!n.length)return;const g=new FormData;for(let p of n)g.append("images[]",p);try{e.value=!0,await d.post("/admin/images/upload",g,{headers:{"Content-Type":"multipart/form-data"}}),alert("Изображения загружены!"),B()}catch(p){console.error("Ошибка загрузки изображений:",p),alert("Ошибка загрузки изображений")}finally{e.value=!1,r.target.value=""}},pt=async r=>{if(confirm("Удалить это изображение?"))try{await d.delete(`/admin/images/${r}`),alert("Изображение удалено!"),B()}catch(n){console.error("Ошибка удаления изображения:",n),alert("Ошибка удаления изображения")}},ft=r=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(r),_t=r=>new Date(r).toLocaleDateString("ru-RU"),wt=()=>{J.value="",K.value="",Q.value="created_at",P()},kt=Ct(()=>{P()},500);function Ct(r,n){let g;return function(...At){const Vt=()=>{clearTimeout(g),r(...At)};clearTimeout(g),g=setTimeout(Vt,n)}}const Ft=async()=>{try{await d.post("/admin/logout")}catch(r){console.error("Ошибка выхода:",r)}finally{localStorage.removeItem("auth_token"),delete d.defaults.headers.common.Authorization,G.push("/admin/login")}};return Mt(()=>{A(),P(),z(),q(),V(),B()}),{activeTab:s,loading:F,saving:e,tabs:Z,products:T,categories:H,themes:M,attributes:S,attributeValues:f,selectedAttribute:o,images:c,stats:x,productSearch:J,productThemeFilter:K,productSort:Q,showCategoryModal:U,showThemeModal:I,showAttributeModal:D,showAttributeValueModal:O,categoryForm:_,themeForm:w,attributeForm:k,attributeValueForm:h,paginationPages:$,loadProducts:P,loadCategories:z,loadThemes:q,loadAttributes:V,loadAttributeValues:N,loadImages:B,deleteProduct:tt,createCategory:et,editCategory:ot,saveCategoryForm:st,deleteCategory:rt,createTheme:lt,editTheme:at,saveThemeForm:it,deleteTheme:nt,selectAttribute:dt,createAttribute:ct,editAttribute:ut,saveAttributeForm:bt,deleteAttribute:gt,createAttributeValue:mt,editAttributeValue:xt,saveAttributeValueForm:yt,deleteAttributeValue:vt,uploadImages:ht,deleteImage:pt,formatPrice:ft,formatDate:_t,clearFilters:wt,debouncedSearch:kt,logout:Ft}}},Dt={class:"admin-panel min-h-screen bg-gray-900 p-6"},Ot={class:"max-w-7xl mx-auto"},zt={class:"flex justify-between items-center mb-8"},qt={class:"hidden lg:flex space-x-4"},Nt={key:0,class:"bg-gray-800 rounded-lg p-4 text-center"},Bt={class:"text-2xl font-bold text-blue-400"},Rt={key:1,class:"bg-gray-800 rounded-lg p-4 text-center"},Et={class:"text-2xl font-bold text-green-400"},Lt={key:2,class:"bg-gray-800 rounded-lg p-4 text-center"},Gt={class:"text-2xl font-bold text-purple-400"},Ht={class:"bg-gray-800 rounded-lg p-2 mb-8"},Jt={class:"flex flex-wrap space-x-1"},Kt=["onClick"],Qt={class:"bg-gray-800 rounded-lg p-6"},Wt={key:0},Xt={class:"flex justify-between items-center mb-6"},Yt={class:"flex space-x-2"},Zt=["disabled"],$t={class:"bg-gray-700 rounded-lg p-4 mb-6"},te={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ee=["value"],oe={class:"flex items-end"},se={class:"bg-gray-700 rounded-lg overflow-hidden"},re={class:"overflow-x-auto"},le={class:"w-full"},ae={class:"px-4 py-3"},ie={class:"flex items-center space-x-3"},ne={class:"w-12 h-12 bg-gray-500 rounded-lg flex items-center justify-center"},de=["src"],ce={key:1,class:"text-gray-400 text-xs"},ue={class:"text-white font-medium"},be={class:"text-gray-400 text-sm"},ge={class:"px-4 py-3 text-white"},me={class:"px-4 py-3 text-gray-300"},xe={class:"px-4 py-3"},ye={class:"px-4 py-3 text-gray-300"},ve={class:"px-4 py-3"},he={class:"flex justify-center space-x-2"},pe=["onClick"],fe={key:0,class:"bg-gray-600 px-4 py-3 flex justify-between items-center"},_e={class:"text-gray-300 text-sm"},we={class:"flex space-x-2"},ke=["onClick"],Ce={key:1},Fe={class:"flex justify-between items-center mb-6"},Ae={class:"bg-gray-700 rounded-lg overflow-hidden"},Ve={class:"w-full"},je={class:"px-4 py-3"},Te={class:"text-white font-medium"},Me={class:"text-gray-400 text-sm"},Se={class:"px-4 py-3 text-gray-300"},Pe={class:"px-4 py-3 text-gray-300"},Ue={class:"px-4 py-3 text-gray-300"},Ie={class:"px-4 py-3"},De={class:"flex justify-center space-x-2"},Oe=["onClick"],ze=["onClick"],qe={key:2},Ne={class:"flex justify-between items-center mb-6"},Be={class:"bg-gray-700 rounded-lg overflow-hidden"},Re={class:"w-full"},Ee={class:"px-4 py-3 text-white font-medium"},Le={class:"px-4 py-3 text-gray-300"},Ge={class:"px-4 py-3 text-gray-300"},He={class:"px-4 py-3"},Je={class:"flex justify-center space-x-2"},Ke=["onClick"],Qe=["onClick"],We={key:3},Xe={class:"flex justify-between items-center mb-6"},Ye={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ze={class:"bg-gray-700 rounded-lg overflow-hidden"},$e={class:"max-h-96 overflow-y-auto"},to=["onClick"],eo={class:"flex justify-between items-center"},oo={class:"text-white font-medium"},so={class:"text-gray-400 text-sm"},ro={key:0,class:"ml-2 px-2 py-1 bg-purple-600 text-purple-100 rounded-full text-xs"},lo={class:"flex space-x-2"},ao=["onClick"],io=["onClick"],no={class:"bg-gray-700 rounded-lg overflow-hidden"},co={class:"bg-gray-600 px-4 py-3 flex justify-between items-center"},uo={class:"text-white font-medium"},bo={class:"max-h-96 overflow-y-auto"},go={key:0},mo={class:"flex justify-between items-center"},xo={class:"text-white font-medium"},yo={class:"text-gray-400 text-sm"},vo={key:0,class:"ml-2 px-2 py-1 bg-gray-500 text-gray-200 rounded-full text-xs"},ho={class:"flex space-x-2"},po=["onClick"],fo=["onClick"],_o={key:1,class:"px-4 py-8 text-center text-gray-400"},wo={key:2,class:"px-4 py-8 text-center text-gray-400"},ko={key:4},Co={class:"flex justify-between items-center mb-6"},Fo={class:"flex space-x-2"},Ao=["disabled"],Vo={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},jo=["src"],To={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity flex items-center justify-center"},Mo=["onClick"],So={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-2"},Po={class:"text-xs truncate"},Uo={key:0,class:"text-center py-12 text-gray-400"},Io={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Do={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},Oo={class:"text-xl text-white mb-4"},zo={class:"space-y-4"},qo=["value"],No={class:"flex justify-end space-x-3 mt-6"},Bo=["disabled"],Ro={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Eo={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},Lo={class:"text-xl text-white mb-4"},Go={class:"space-y-4"},Ho={class:"flex justify-end space-x-3 mt-6"},Jo=["disabled"],Ko={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Qo={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},Wo={class:"text-xl text-white mb-4"},Xo={class:"space-y-4"},Yo={class:"flex justify-end space-x-3 mt-6"},Zo=["disabled"],$o={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ts={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},es={class:"text-xl text-white mb-4"},os={class:"space-y-4"},ss={class:"flex items-center"},rs={class:"flex justify-end space-x-3 mt-6"},ls=["disabled"];function as(G,s,F,e,T,H){var S,f;const M=St("router-link");return l(),a("div",Dt,[t("div",Ot,[t("div",zt,[s[37]||(s[37]=t("div",null,[t("h1",{class:"text-3xl font-bold text-white"},'Админ-панель "Стужа"'),t("p",{class:"text-gray-400 mt-1"},"Управление интернет-магазином украшений")],-1)),t("div",qt,[e.stats?(l(),a("div",Nt,[t("div",Bt,i(((S=e.stats.products)==null?void 0:S.total)||0),1),s[34]||(s[34]=t("div",{class:"text-gray-400 text-sm"},"Товаров",-1))])):b("",!0),e.stats?(l(),a("div",Rt,[t("div",Et,i(e.stats.categories||0),1),s[35]||(s[35]=t("div",{class:"text-gray-400 text-sm"},"Категорий",-1))])):b("",!0),e.stats?(l(),a("div",Lt,[t("div",Gt,i(((f=e.stats.products)==null?void 0:f.matryoshka)||0),1),s[36]||(s[36]=t("div",{class:"text-gray-400 text-sm"},"Матрёшек",-1))])):b("",!0)]),t("button",{onClick:s[0]||(s[0]=(...o)=>e.logout&&e.logout(...o)),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors"}," Выйти ")]),t("div",Ht,[t("nav",Jt,[(l(!0),a(y,null,v(e.tabs,o=>(l(),a("button",{key:o.id,onClick:c=>e.activeTab=o.id,class:L(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",e.activeTab===o.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"])},i(o.name),11,Kt))),128))])]),t("div",Qt,[e.activeTab==="products"?(l(),a("div",Wt,[t("div",Xt,[s[39]||(s[39]=t("h2",{class:"text-xl font-semibold text-white"},"Управление товарами",-1)),t("div",Yt,[X(M,{to:"/admin/products/create",class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"},{default:Y(()=>s[38]||(s[38]=[E(" + Создать товар ")])),_:1,__:[38]}),t("button",{onClick:s[1]||(s[1]=(...o)=>e.loadProducts&&e.loadProducts(...o)),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.loading},i(e.loading?"Загрузка...":"Обновить"),9,Zt)])]),t("div",$t,[t("div",te,[t("div",null,[s[40]||(s[40]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Поиск",-1)),m(t("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>e.productSearch=o),type:"text",placeholder:"Название товара...",class:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white",onInput:s[3]||(s[3]=(...o)=>e.debouncedSearch&&e.debouncedSearch(...o))},null,544),[[C,e.productSearch]])]),t("div",null,[s[42]||(s[42]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Тема",-1)),m(t("select",{"onUpdate:modelValue":s[4]||(s[4]=o=>e.productThemeFilter=o),class:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white",onChange:s[5]||(s[5]=(...o)=>e.loadProducts&&e.loadProducts(...o))},[s[41]||(s[41]=t("option",{value:""},"Все темы",-1)),(l(!0),a(y,null,v(e.themes,o=>(l(),a("option",{key:o.id,value:o.id},i(o.name),9,ee))),128))],544),[[W,e.productThemeFilter]])]),t("div",null,[s[44]||(s[44]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Сортировка",-1)),m(t("select",{"onUpdate:modelValue":s[6]||(s[6]=o=>e.productSort=o),class:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white",onChange:s[7]||(s[7]=(...o)=>e.loadProducts&&e.loadProducts(...o))},s[43]||(s[43]=[t("option",{value:"created_at"},"По дате создания",-1),t("option",{value:"name"},"По названию",-1),t("option",{value:"price"},"По цене",-1)]),544),[[W,e.productSort]])]),t("div",oe,[t("button",{onClick:s[8]||(s[8]=(...o)=>e.clearFilters&&e.clearFilters(...o)),class:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg transition-colors w-full"}," Сбросить ")])])]),t("div",se,[t("div",re,[t("table",le,[s[46]||(s[46]=t("thead",{class:"bg-gray-600"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Товар"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Цена"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Тема"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Тип"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Дата"),t("th",{class:"px-4 py-3 text-center text-white font-medium"},"Действия")])],-1)),t("tbody",null,[(l(!0),a(y,null,v(e.products.data,o=>{var c;return l(),a("tr",{key:o.id,class:"border-t border-gray-600 hover:bg-gray-600"},[t("td",ae,[t("div",ie,[t("div",ne,[o.main_image?(l(),a("img",{key:0,src:`/storage/images/${o.main_image}`,class:"w-full h-full object-cover rounded-lg",onError:s[9]||(s[9]=x=>x.target.style.display="none")},null,40,de)):(l(),a("span",ce,"Нет фото"))]),t("div",null,[t("div",ue,i(o.name),1),t("div",be,i(o.slug),1)])])]),t("td",ge,i(e.formatPrice(o.price)),1),t("td",me,i(((c=o.theme)==null?void 0:c.name)||"Без темы"),1),t("td",xe,[t("span",{class:L(["px-2 py-1 rounded-full text-xs font-medium",o.use_matryoshka?"bg-purple-600 text-purple-100":"bg-blue-600 text-blue-100"])},i(o.use_matryoshka?"Матрёшка":"Обычный"),3)]),t("td",ye,i(e.formatDate(o.created_at)),1),t("td",ve,[t("div",he,[X(M,{to:`/admin/products/edit/${o.id}`,class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"},{default:Y(()=>s[45]||(s[45]=[E(" Редактировать ")])),_:2,__:[45]},1032,["to"]),t("button",{onClick:x=>e.deleteProduct(o.id),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,pe)])])])}),128))])])]),e.products.last_page>1?(l(),a("div",fe,[t("div",_e," Показано "+i(e.products.from)+"-"+i(e.products.to)+" из "+i(e.products.total),1),t("div",we,[(l(!0),a(y,null,v(e.paginationPages,o=>(l(),a("button",{key:o,onClick:c=>e.loadProducts(o),class:L(["px-3 py-1 rounded text-sm transition-colors",o===e.products.current_page?"bg-blue-600 text-white":"bg-gray-500 text-gray-300 hover:bg-gray-400"])},i(o),11,ke))),128))])])):b("",!0)])])):b("",!0),e.activeTab==="categories"?(l(),a("div",Ce,[t("div",Fe,[s[47]||(s[47]=t("h2",{class:"text-xl font-semibold text-white"},"Управление категориями",-1)),t("button",{onClick:s[10]||(s[10]=(...o)=>e.createCategory&&e.createCategory(...o)),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Создать категорию ")]),t("div",Ae,[t("table",Ve,[s[48]||(s[48]=t("thead",{class:"bg-gray-600"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Название"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Родитель"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Товаров"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Порядок"),t("th",{class:"px-4 py-3 text-center text-white font-medium"},"Действия")])],-1)),t("tbody",null,[(l(!0),a(y,null,v(e.categories,o=>{var c;return l(),a("tr",{key:o.id,class:"border-t border-gray-600 hover:bg-gray-600"},[t("td",je,[t("div",Te,i(o.name),1),t("div",Me,i(o.slug),1)]),t("td",Se,i(((c=o.parent)==null?void 0:c.name)||"Корневая"),1),t("td",Pe,i(o.products_count||0),1),t("td",Ue,i(o.sort_order||0),1),t("td",Ie,[t("div",De,[t("button",{onClick:x=>e.editCategory(o),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Редактировать ",8,Oe),t("button",{onClick:x=>e.deleteCategory(o.id),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,ze)])])])}),128))])])])])):b("",!0),e.activeTab==="themes"?(l(),a("div",qe,[t("div",Ne,[s[49]||(s[49]=t("h2",{class:"text-xl font-semibold text-white"},"Управление темами",-1)),t("button",{onClick:s[11]||(s[11]=(...o)=>e.createTheme&&e.createTheme(...o)),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Создать тему ")]),t("div",Be,[t("table",Re,[s[50]||(s[50]=t("thead",{class:"bg-gray-600"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Название"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Товаров"),t("th",{class:"px-4 py-3 text-left text-white font-medium"},"Дата создания"),t("th",{class:"px-4 py-3 text-center text-white font-medium"},"Действия")])],-1)),t("tbody",null,[(l(!0),a(y,null,v(e.themes,o=>(l(),a("tr",{key:o.id,class:"border-t border-gray-600 hover:bg-gray-600"},[t("td",Ee,i(o.name),1),t("td",Le,i(o.products_count||0),1),t("td",Ge,i(e.formatDate(o.created_at)),1),t("td",He,[t("div",Je,[t("button",{onClick:c=>e.editTheme(o),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Редактировать ",8,Ke),t("button",{onClick:c=>e.deleteTheme(o.id),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,Qe)])])]))),128))])])])])):b("",!0),e.activeTab==="attributes"?(l(),a("div",We,[t("div",Xe,[s[51]||(s[51]=t("h2",{class:"text-xl font-semibold text-white"},"Управление атрибутами",-1)),t("button",{onClick:s[12]||(s[12]=(...o)=>e.createAttribute&&e.createAttribute(...o)),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Создать атрибут ")]),t("div",Ye,[t("div",Ze,[s[52]||(s[52]=t("div",{class:"bg-gray-600 px-4 py-3"},[t("h3",{class:"text-white font-medium"},"Атрибуты")],-1)),t("div",$e,[(l(!0),a(y,null,v(e.attributes,o=>{var c;return l(),a("div",{key:o.id,class:L(["px-4 py-3 border-b border-gray-600 hover:bg-gray-600 cursor-pointer",((c=e.selectedAttribute)==null?void 0:c.id)===o.id?"bg-gray-600":""]),onClick:x=>e.selectAttribute(o)},[t("div",eo,[t("div",null,[t("div",oo,i(o.name),1),t("div",so,[E(i(o.values_count||0)+" значений, "+i(o.products_count||0)+" товаров ",1),o.is_stone?(l(),a("span",ro," Камень ")):b("",!0)])]),t("div",lo,[t("button",{onClick:j(x=>e.editAttribute(o),["stop"]),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Редактировать ",8,ao),t("button",{onClick:j(x=>e.deleteAttribute(o.id),["stop"]),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,io)])])],10,to)}),128))])]),t("div",no,[t("div",co,[t("h3",uo,i(e.selectedAttribute?`Значения: ${e.selectedAttribute.name}`:"Выберите атрибут"),1),e.selectedAttribute?(l(),a("button",{key:0,onClick:s[13]||(s[13]=(...o)=>e.createAttributeValue&&e.createAttributeValue(...o)),class:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm transition-colors"}," + Добавить ")):b("",!0)]),t("div",bo,[e.selectedAttribute&&e.attributeValues.length>0?(l(),a("div",go,[(l(!0),a(y,null,v(e.attributeValues,o=>(l(),a("div",{key:o.id,class:"px-4 py-3 border-b border-gray-600 hover:bg-gray-600"},[t("div",mo,[t("div",null,[t("div",xo,i(o.value),1),t("div",yo,[E(i(o.products_count||0)+" товаров ",1),o.is_active?b("",!0):(l(),a("span",vo," Неактивен "))])]),t("div",ho,[t("button",{onClick:c=>e.editAttributeValue(o),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Редактировать ",8,po),t("button",{onClick:c=>e.deleteAttributeValue(o.id),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,fo)])])]))),128))])):e.selectedAttribute?(l(),a("div",_o," У этого атрибута пока нет значений ")):(l(),a("div",wo," Выберите атрибут для просмотра его значений "))])])])])):b("",!0),e.activeTab==="images"?(l(),a("div",ko,[t("div",Co,[s[53]||(s[53]=t("h2",{class:"text-xl font-semibold text-white"},"Управление изображениями",-1)),t("div",Fo,[t("input",{ref:"imageUpload",type:"file",multiple:"",accept:"image/*",onChange:s[14]||(s[14]=(...o)=>e.uploadImages&&e.uploadImages(...o)),class:"hidden"},null,544),t("button",{onClick:s[15]||(s[15]=o=>G.$refs.imageUpload.click()),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Загрузить изображения "),t("button",{onClick:s[16]||(s[16]=(...o)=>e.loadImages&&e.loadImages(...o)),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.loading},i(e.loading?"Загрузка...":"Обновить"),9,Ao)])]),t("div",Vo,[(l(!0),a(y,null,v(e.images,o=>(l(),a("div",{key:o,class:"relative group bg-gray-700 rounded-lg overflow-hidden"},[t("img",{src:`/storage/images/${o}`,class:"w-full h-32 object-cover",onError:s[17]||(s[17]=c=>c.target.style.display="none")},null,40,jo),t("div",To,[t("button",{onClick:c=>e.deleteImage(o),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-sm transition-colors opacity-0 group-hover:opacity-100"}," Удалить ",8,Mo)]),t("div",So,[t("div",Po,i(o),1)])]))),128))]),e.images.length===0?(l(),a("div",Uo," Нет загруженных изображений ")):b("",!0)])):b("",!0)])]),e.showCategoryModal?(l(),a("div",Io,[t("div",Do,[t("h3",Oo,i(e.categoryForm.id?"Редактировать категорию":"Создать категорию"),1),t("form",{onSubmit:s[22]||(s[22]=j((...o)=>e.saveCategoryForm&&e.saveCategoryForm(...o),["prevent"]))},[t("div",zo,[t("div",null,[s[54]||(s[54]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название",-1)),m(t("input",{"onUpdate:modelValue":s[18]||(s[18]=o=>e.categoryForm.name=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[C,e.categoryForm.name]])]),t("div",null,[s[56]||(s[56]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Родительская категория",-1)),m(t("select",{"onUpdate:modelValue":s[19]||(s[19]=o=>e.categoryForm.parent_id=o),class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},[s[55]||(s[55]=t("option",{value:""},"Корневая категория",-1)),(l(!0),a(y,null,v(e.categories,o=>(l(),a("option",{key:o.id,value:o.id},i(o.name),9,qo))),128))],512),[[W,e.categoryForm.parent_id]])]),t("div",null,[s[57]||(s[57]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Порядок сортировки",-1)),m(t("input",{"onUpdate:modelValue":s[20]||(s[20]=o=>e.categoryForm.sort_order=o),type:"number",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[C,e.categoryForm.sort_order,void 0,{number:!0}]])])]),t("div",No,[t("button",{type:"button",onClick:s[21]||(s[21]=o=>e.showCategoryModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.saving},i(e.saving?"Сохранение...":"Сохранить"),9,Bo)])],32)])])):b("",!0),e.showThemeModal?(l(),a("div",Ro,[t("div",Eo,[t("h3",Lo,i(e.themeForm.id?"Редактировать тему":"Создать тему"),1),t("form",{onSubmit:s[25]||(s[25]=j((...o)=>e.saveThemeForm&&e.saveThemeForm(...o),["prevent"]))},[t("div",Go,[t("div",null,[s[58]||(s[58]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название",-1)),m(t("input",{"onUpdate:modelValue":s[23]||(s[23]=o=>e.themeForm.name=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[C,e.themeForm.name]])])]),t("div",Ho,[t("button",{type:"button",onClick:s[24]||(s[24]=o=>e.showThemeModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.saving},i(e.saving?"Сохранение...":"Сохранить"),9,Jo)])],32)])])):b("",!0),e.showAttributeModal?(l(),a("div",Ko,[t("div",Qo,[t("h3",Wo,i(e.attributeForm.id?"Редактировать атрибут":"Создать атрибут"),1),t("form",{onSubmit:s[28]||(s[28]=j((...o)=>e.saveAttributeForm&&e.saveAttributeForm(...o),["prevent"]))},[t("div",Xo,[t("div",null,[s[59]||(s[59]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название",-1)),m(t("input",{"onUpdate:modelValue":s[26]||(s[26]=o=>e.attributeForm.name=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[C,e.attributeForm.name]])])]),t("div",Yo,[t("button",{type:"button",onClick:s[27]||(s[27]=o=>e.showAttributeModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.saving},i(e.saving?"Сохранение...":"Сохранить"),9,Zo)])],32)])])):b("",!0),e.showAttributeValueModal?(l(),a("div",$o,[t("div",ts,[t("h3",es,i(e.attributeValueForm.id?"Редактировать значение":"Создать значение"),1),t("form",{onSubmit:s[33]||(s[33]=j((...o)=>e.saveAttributeValueForm&&e.saveAttributeValueForm(...o),["prevent"]))},[t("div",os,[t("div",null,[s[60]||(s[60]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Значение",-1)),m(t("input",{"onUpdate:modelValue":s[29]||(s[29]=o=>e.attributeValueForm.value=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[C,e.attributeValueForm.value]])]),t("div",null,[s[61]||(s[61]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Порядок сортировки",-1)),m(t("input",{"onUpdate:modelValue":s[30]||(s[30]=o=>e.attributeValueForm.sort_order=o),type:"number",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[C,e.attributeValueForm.sort_order,void 0,{number:!0}]])]),t("div",ss,[m(t("input",{"onUpdate:modelValue":s[31]||(s[31]=o=>e.attributeValueForm.is_active=o),type:"checkbox",id:"is_active",class:"mr-2"},null,512),[[Pt,e.attributeValueForm.is_active]]),s[62]||(s[62]=t("label",{for:"is_active",class:"text-white"},"Активно",-1))])]),t("div",rs,[t("button",{type:"button",onClick:s[32]||(s[32]=o=>e.showAttributeValueModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:e.saving},i(e.saving?"Сохранение...":"Сохранить"),9,ls)])],32)])])):b("",!0)])}const ns=jt(It,[["render",as]]);export{ns as default};
