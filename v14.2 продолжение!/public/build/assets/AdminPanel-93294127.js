import{_ as Dt,g as u,h as C,p as Rt,o as Lt,r as Qt,a as i,c as l,b as t,t as n,m,F as y,l as v,d as et,w as st,e as ot,j as g,v as x,k as O,s as j,z as rt,y as Gt,n as c,q as K}from"./main-8c208f58.js";const Kt={name:"AdminPanel",setup(){const F=Gt(),e=u("products"),V=u(!1),s=u(!1),S=u({data:[],current_page:1,last_page:1}),N=u([]),P=u([]),U=u([]),I=u([]),o=u([]),d=u(null),h=u([]),W=u(null),H=u(""),J=u(""),X=u(""),Y=u("created_at"),M=u(!1),q=u(!1),B=u(!1),E=u(!1),p=C({id:null,name:"",parent_id:null,sort_order:0}),f=C({id:null,name:""}),_=C({id:null,name:"",is_stone:!1}),w=C({id:null,attribute_id:null,value:"",sort_order:0,is_active:!0}),Z=C({stone_priority:70,theme_priority:30}),it=C({wb_token:""}),$=C({shop_name:"Стужа",notification_email:"",telegram_token:"",telegram_username:""}),lt=[{id:"products",name:"Товары"},{id:"images",name:"Изображения"},{id:"categories",name:"Категории"},{id:"themes",name:"Темы"},{id:"attributes",name:"Атрибуты"},{id:"quiz",name:"Квиз"},{id:"marketplace",name:"Маркетплейсы"},{id:"settings",name:"Настройки"}],nt=Rt(()=>{const r=S.value.current_page,a=S.value.last_page,b=[];for(let k=Math.max(1,r-2);k<=Math.min(a,r+2);k++)b.push(k);return b}),T=async()=>{try{const r=await c.get("/admin/stats");W.value=r.data}catch(r){console.error("Ошибка загрузки статистики:",r)}},A=async(r=1)=>{try{V.value=!0;const a={page:r,search:H.value,theme_id:J.value,category_id:X.value,sort_by:Y.value},b=await c.get("/admin/products",{params:a});S.value=b.data}catch(a){console.error("Ошибка загрузки товаров:",a),alert("Ошибка загрузки товаров")}finally{V.value=!1}},D=async()=>{try{const r=await c.get("/admin/categories");N.value=r.data}catch(r){console.error("Ошибка загрузки категорий:",r)}},R=async()=>{try{const r=await c.get("/admin/categories/tree");P.value=r.data}catch(r){console.error("Ошибка загрузки дерева категорий:",r)}},L=async()=>{try{const r=await c.get("/admin/themes");U.value=r.data}catch(r){console.error("Ошибка загрузки тем:",r)}},z=async()=>{try{const r=await c.get("/admin/attributes");I.value=r.data}catch(r){console.error("Ошибка загрузки атрибутов:",r)}},Q=async r=>{try{const a=await c.get(`/admin/attributes/${r}/values`);o.value=a.data}catch(a){console.error("Ошибка загрузки значений атрибута:",a)}},G=async()=>{try{const r=await c.get("/admin/images");h.value=r.data}catch(r){console.error("Ошибка загрузки изображений:",r)}},at=()=>{A(1)},dt=()=>{A(1)},ct=()=>{A(1)},ut=async r=>{if(confirm("Удалить этот товар?"))try{await c.delete(`/admin/products/${r}`),alert("Товар удален!"),A(),T()}catch(a){console.error("Ошибка удаления товара:",a),alert("Ошибка удаления товара")}},gt=async r=>{const a=r.target.files;if(!a.length)return;const b=new FormData;for(let k of a)b.append("images[]",k);try{V.value=!0,await c.post("/admin/images/upload",b,{headers:{"Content-Type":"multipart/form-data"}}),alert("Изображения загружены!"),G()}catch(k){console.error("Ошибка загрузки изображений:",k),alert("Ошибка загрузки изображений")}finally{V.value=!1}},mt=async r=>{if(confirm("Удалить это изображение?"))try{await c.delete(`/admin/images/${r}`),alert("Изображение удалено!"),G()}catch(a){console.error("Ошибка удаления изображения:",a),alert("Ошибка удаления изображения")}},bt=r=>{const a=tt(r);navigator.clipboard.writeText(a),alert("URL скопирован в буфер обмена!")},xt=()=>{Object.assign(p,{id:null,name:"",parent_id:null,sort_order:0}),M.value=!0},yt=r=>{Object.assign(p,{id:null,name:"",parent_id:r,sort_order:0}),M.value=!0},vt=r=>{Object.assign(p,{id:r.id,name:r.name,parent_id:r.parent_id,sort_order:r.sort_order||0}),M.value=!0},pt=async()=>{try{s.value=!0,p.id?(await c.put(`/admin/categories/${p.id}`,p),alert("Категория обновлена!")):(await c.post("/admin/categories",p),alert("Категория создана!")),M.value=!1,D(),R(),T()}catch(r){console.error("Ошибка сохранения категории:",r),alert("Ошибка сохранения категории")}finally{s.value=!1}},ht=async r=>{if(confirm("Удалить эту категорию? Все связанные товары потеряют связь с категорией."))try{await c.delete(`/admin/categories/${r}`),alert("Категория удалена!"),D(),R(),T()}catch(a){console.error("Ошибка удаления категории:",a),alert("Ошибка удаления категории")}},ft=()=>{Object.assign(f,{id:null,name:""}),q.value=!0},_t=r=>{Object.assign(f,{id:r.id,name:r.name}),q.value=!0},wt=async()=>{try{s.value=!0,f.id?(await c.put(`/admin/themes/${f.id}`,f),alert("Тема обновлена!")):(await c.post("/admin/themes",f),alert("Тема создана!")),q.value=!1,L(),T()}catch(r){console.error("Ошибка сохранения темы:",r),alert("Ошибка сохранения темы")}finally{s.value=!1}},kt=async r=>{if(confirm("Удалить эту тему? Все связанные товары потеряют тему."))try{await c.delete(`/admin/themes/${r}`),alert("Тема удалена!"),L(),T()}catch(a){console.error("Ошибка удаления темы:",a),alert("Ошибка удаления темы")}},Ct=r=>{d.value=r,Q(r.id)},Ft=()=>{Object.assign(_,{id:null,name:"",is_stone:!1}),B.value=!0},Vt=r=>{Object.assign(_,{id:r.id,name:r.name,is_stone:r.is_stone||!1}),B.value=!0},Tt=async()=>{try{s.value=!0,_.id?(await c.put(`/admin/attributes/${_.id}`,_),alert("Атрибут обновлен!")):(await c.post("/admin/attributes",_),alert("Атрибут создан!")),B.value=!1,z()}catch(r){console.error("Ошибка сохранения атрибута:",r),alert("Ошибка сохранения атрибута")}finally{s.value=!1}},At=async r=>{var a;if(confirm("Удалить этот атрибут? Все связанные товары потеряют этот атрибут."))try{await c.delete(`/admin/attributes/${r}`),alert("Атрибут удален!"),z(),((a=d.value)==null?void 0:a.id)===r&&(d.value=null,o.value=[])}catch(b){console.error("Ошибка удаления атрибута:",b),alert("Ошибка удаления атрибута")}},jt=()=>{if(!d.value){alert("Сначала выберите атрибут");return}Object.assign(w,{id:null,attribute_id:d.value.id,value:"",sort_order:0,is_active:!0}),E.value=!0},St=r=>{Object.assign(w,{id:r.id,attribute_id:r.attribute_id,value:r.value,sort_order:r.sort_order||0,is_active:r.is_active}),E.value=!0},Pt=async()=>{try{s.value=!0,w.id?(await c.put(`/admin/attribute-values/${w.id}`,w),alert("Значение обновлено!")):(await c.post("/admin/attribute-values",w),alert("Значение создано!")),E.value=!1,Q(d.value.id),z()}catch(r){console.error("Ошибка сохранения значения:",r),alert("Ошибка сохранения значения")}finally{s.value=!1}},Ut=async r=>{if(confirm("Удалить это значение?"))try{await c.delete(`/admin/attribute-values/${r}`),alert("Значение удалено!"),Q(d.value.id),z()}catch(a){console.error("Ошибка удаления значения:",a),alert("Ошибка удаления значения")}},It=async()=>{try{s.value=!0,await c.post("/admin/quiz/settings",Z),alert("Настройки квиза сохранены!")}catch(r){console.error("Ошибка сохранения настроек квиза:",r),alert("Ошибка сохранения настроек")}finally{s.value=!1}},Mt=async r=>{try{const a=await c.post(`/admin/marketplace/test/${r}`);alert(`Подключение к ${r}: ${a.data.status}`)}catch{alert("Ошибка подключения к маркетплейсу")}},zt=async()=>{try{s.value=!0,await c.post("/admin/settings",$),alert("Настройки сохранены!")}catch(r){console.error("Ошибка сохранения настроек:",r),alert("Ошибка сохранения настроек")}finally{s.value=!1}},qt=async()=>{try{await c.post("/admin/logout"),localStorage.removeItem("auth_token"),delete c.defaults.headers.common.Authorization,F.push("/admin/login")}catch(r){console.error("Ошибка выхода:",r),localStorage.removeItem("auth_token"),delete c.defaults.headers.common.Authorization,F.push("/admin/login")}},Bt=r=>new Intl.NumberFormat("ru-RU").format(r),Et=r=>{const a=["Bytes","KB","MB","GB"];if(r===0)return"0 Byte";const b=Math.floor(Math.log(r)/Math.log(1024));return Math.round(r/Math.pow(1024,b)*100)/100+" "+a[b]},Ot=r=>{var a,b;return r.use_matryoshka&&((a=r.image_layers)!=null&&a.outer)?`/storage/images/${r.image_layers.outer}`:((b=r.gallery_images)==null?void 0:b.length)>0?`/storage/images/${r.gallery_images[0]}`:"/images/placeholder.jpg"},tt=r=>`/storage/images/${r}`,Nt=r=>{r.target.src="/images/placeholder.jpg"};return Lt(async()=>{try{await T(),await new Promise(r=>setTimeout(r,100)),await A(),await new Promise(r=>setTimeout(r,100)),await D(),await new Promise(r=>setTimeout(r,100)),await R(),await new Promise(r=>setTimeout(r,100)),await L(),await new Promise(r=>setTimeout(r,100)),await z(),await new Promise(r=>setTimeout(r,100)),await G()}catch(r){console.error("Ошибка инициализации админ-панели:",r)}}),{activeTab:e,loading:V,saving:s,products:S,categories:N,categoryTree:P,themes:U,attributes:I,attributeValues:o,selectedAttribute:d,images:h,stats:W,productSearch:H,productThemeFilter:J,productCategoryFilter:X,productSort:Y,showCategoryModal:M,showThemeModal:q,showAttributeModal:B,showAttributeValueModal:E,categoryForm:p,themeForm:f,attributeForm:_,attributeValueForm:w,quizSettings:Z,marketplaceSettings:it,settings:$,tabs:lt,visiblePages:nt,loadProducts:A,searchProducts:at,filterProducts:dt,sortProducts:ct,deleteProduct:ut,uploadImages:gt,deleteImage:mt,copyImageUrl:bt,createCategory:xt,createSubcategory:yt,editCategory:vt,saveCategoryForm:pt,deleteCategory:ht,createTheme:ft,editTheme:_t,saveThemeForm:wt,deleteTheme:kt,selectAttribute:Ct,createAttribute:Ft,editAttribute:Vt,saveAttributeForm:Tt,deleteAttribute:At,createAttributeValue:jt,editAttributeValue:St,saveAttributeValueForm:Pt,deleteAttributeValue:Ut,saveQuizSettings:It,testMarketplaceConnection:Mt,saveSettings:zt,logout:qt,formatPrice:Bt,formatFileSize:Et,getProductImage:Ot,getImageUrl:tt,handleImageError:Nt}}},Wt={class:"admin-panel min-h-screen bg-gray-900 p-6"},Ht={class:"max-w-7xl mx-auto"},Jt={class:"flex justify-between items-center mb-8"},Xt={class:"hidden lg:flex space-x-4"},Yt={key:0,class:"bg-gray-800 rounded-lg p-4 text-center"},Zt={class:"text-2xl font-bold text-blue-400"},$t={key:1,class:"bg-gray-800 rounded-lg p-4 text-center"},te={class:"text-2xl font-bold text-green-400"},ee={key:2,class:"bg-gray-800 rounded-lg p-4 text-center"},se={class:"text-2xl font-bold text-purple-400"},oe={class:"bg-gray-800 rounded-lg p-2 mb-8"},re={class:"flex flex-wrap space-x-1"},ie=["onClick"],le={class:"bg-gray-800 rounded-lg p-6"},ne={key:0},ae={class:"flex justify-between items-center mb-6"},de={class:"flex space-x-2"},ce=["disabled"],ue={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},ge=["value"],me=["value"],be={class:"space-y-4"},xe={class:"flex items-center space-x-4"},ye=["src","alt"],ve={class:"text-white font-medium"},pe={class:"text-gray-400 text-sm"},he={class:"flex items-center space-x-2 text-xs"},fe={key:0,class:"bg-purple-600 text-white px-2 py-1 rounded"},_e={key:1,class:"bg-blue-600 text-white px-2 py-1 rounded"},we={class:"bg-gray-600 text-gray-300 px-2 py-1 rounded"},ke={class:"flex space-x-2"},Ce=["onClick"],Fe={key:0,class:"flex justify-center items-center space-x-2 mt-6"},Ve=["onClick"],Te={key:1},Ae={class:"flex justify-between items-center mb-6"},je={class:"flex space-x-2"},Se={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},Pe=["src","alt"],Ue={class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},Ie={class:"flex space-x-2"},Me=["onClick"],ze=["onClick"],qe={class:"p-2"},Be={class:"text-white text-xs truncate"},Ee={class:"text-gray-400 text-xs"},Oe={key:2},Ne={class:"flex justify-between items-center mb-6"},De={class:"space-y-2"},Re={class:"flex items-center justify-between"},Le={class:"flex items-center space-x-3"},Qe={class:"text-white font-medium"},Ge={class:"bg-blue-600 text-white px-2 py-1 rounded text-xs"},Ke={key:0,class:"bg-purple-600 text-white px-2 py-1 rounded text-xs"},We={class:"flex space-x-2"},He=["onClick"],Je=["onClick"],Xe=["onClick"],Ye={key:0,class:"ml-6 mt-3 space-y-2"},Ze={class:"flex items-center space-x-3"},$e={class:"text-white"},ts={class:"bg-gray-500 text-white px-2 py-1 rounded text-xs"},es={class:"flex space-x-2"},ss=["onClick"],os=["onClick"],rs={key:3},is={class:"flex justify-between items-center mb-6"},ls={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ns={class:"flex items-center justify-between"},as={class:"text-white font-medium"},ds={class:"text-gray-400 text-sm"},cs={class:"flex space-x-2"},us=["onClick"],gs=["onClick"],ms={key:4},bs={class:"flex justify-between items-center mb-6"},xs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ys={class:"space-y-3"},vs=["onClick"],ps={class:"flex items-center justify-between"},hs={class:"flex items-center space-x-3"},fs={class:"text-white font-medium"},_s={key:0,class:"bg-purple-600 text-white px-2 py-1 rounded text-xs"},ws={class:"flex space-x-2"},ks={class:"bg-gray-600 text-gray-300 px-2 py-1 rounded text-xs"},Cs=["onClick"],Fs=["onClick"],Vs={key:0},Ts={class:"flex justify-between items-center mb-4"},As={class:"text-lg font-medium text-white"},js={key:0,class:"text-center py-8 text-gray-400"},Ss={key:1,class:"space-y-2"},Ps={class:"flex items-center space-x-3"},Us={class:"text-white"},Is={class:"bg-gray-500 text-gray-300 px-2 py-1 rounded text-xs"},Ms={key:0,class:"bg-red-600 text-white px-2 py-1 rounded text-xs"},zs={class:"flex space-x-2"},qs=["onClick"],Bs=["onClick"],Es={key:5},Os={class:"bg-gray-700 rounded-lg p-6"},Ns={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ds={class:"text-gray-400 text-sm"},Rs={class:"text-gray-400 text-sm"},Ls={key:6},Qs={class:"space-y-4"},Gs={class:"bg-gray-700 rounded-lg p-6"},Ks={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ws={key:7},Hs={class:"space-y-6"},Js={class:"bg-gray-700 rounded-lg p-6"},Xs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ys={class:"bg-gray-700 rounded-lg p-6"},Zs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$s=["disabled"],to={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},eo={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},so={class:"text-xl text-white mb-4"},oo={class:"space-y-4"},ro=["value"],io={class:"flex justify-end space-x-3 mt-6"},lo=["disabled"],no={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ao={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},co={class:"text-xl text-white mb-4"},uo={class:"space-y-4"},go={class:"flex justify-end space-x-3 mt-6"},mo=["disabled"],bo={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},xo={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},yo={class:"text-xl text-white mb-4"},vo={class:"space-y-4"},po={class:"flex items-center"},ho={class:"flex justify-end space-x-3 mt-6"},fo=["disabled"],_o={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},wo={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},ko={class:"text-xl text-white mb-4"},Co={class:"space-y-4"},Fo={class:"flex items-center"},Vo={class:"flex justify-end space-x-3 mt-6"},To=["disabled"];function Ao(F,e,V,s,S,N){var U,I;const P=Qt("router-link");return i(),l("div",Wt,[t("div",Ht,[t("div",Jt,[e[49]||(e[49]=t("div",null,[t("h1",{class:"text-3xl font-bold text-white"},'Админ-панель "Стужа"'),t("p",{class:"text-gray-400 mt-1"},"Управление интернет-магазином украшений")],-1)),t("div",Xt,[s.stats?(i(),l("div",Yt,[t("div",Zt,n(((U=s.stats.products)==null?void 0:U.total)||0),1),e[46]||(e[46]=t("div",{class:"text-gray-400 text-sm"},"Товаров",-1))])):m("",!0),s.stats?(i(),l("div",$t,[t("div",te,n(s.stats.categories||0),1),e[47]||(e[47]=t("div",{class:"text-gray-400 text-sm"},"Категорий",-1))])):m("",!0),s.stats?(i(),l("div",ee,[t("div",se,n(((I=s.stats.products)==null?void 0:I.matryoshka)||0),1),e[48]||(e[48]=t("div",{class:"text-gray-400 text-sm"},"Матрёшек",-1))])):m("",!0)]),t("button",{onClick:e[0]||(e[0]=(...o)=>s.logout&&s.logout(...o)),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors"}," Выйти ")]),t("div",oe,[t("nav",re,[(i(!0),l(y,null,v(s.tabs,o=>(i(),l("button",{key:o.id,onClick:d=>s.activeTab=o.id,class:K(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",s.activeTab===o.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"])},n(o.name),11,ie))),128))])]),t("div",le,[s.activeTab==="products"?(i(),l("div",ne,[t("div",ae,[e[51]||(e[51]=t("h2",{class:"text-xl font-semibold text-white"},"Управление товарами",-1)),t("div",de,[et(P,{to:"/admin/products/create",class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"},{default:st(()=>e[50]||(e[50]=[ot(" + Создать товар ")])),_:1,__:[50]}),t("button",{onClick:e[1]||(e[1]=(...o)=>s.loadProducts&&s.loadProducts(...o)),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:s.loading},n(s.loading?"Загрузка...":"Обновить"),9,ce)])]),t("div",ue,[g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.productSearch=o),onInput:e[3]||(e[3]=(...o)=>s.searchProducts&&s.searchProducts(...o)),type:"text",placeholder:"Поиск товаров...",class:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white placeholder-gray-400"},null,544),[[x,s.productSearch]]),g(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.productThemeFilter=o),onChange:e[5]||(e[5]=(...o)=>s.filterProducts&&s.filterProducts(...o)),class:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},[e[52]||(e[52]=t("option",{value:""},"Все темы",-1)),(i(!0),l(y,null,v(s.themes,o=>(i(),l("option",{key:o.id,value:o.id},n(o.name),9,ge))),128))],544),[[O,s.productThemeFilter]]),g(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.productCategoryFilter=o),onChange:e[7]||(e[7]=(...o)=>s.filterProducts&&s.filterProducts(...o)),class:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},[e[53]||(e[53]=t("option",{value:""},"Все категории",-1)),(i(!0),l(y,null,v(s.categories,o=>(i(),l("option",{key:o.id,value:o.id},n(o.name),9,me))),128))],544),[[O,s.productCategoryFilter]]),g(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.productSort=o),onChange:e[9]||(e[9]=(...o)=>s.sortProducts&&s.sortProducts(...o)),class:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},e[54]||(e[54]=[t("option",{value:"created_at"},"По дате создания",-1),t("option",{value:"name"},"По названию",-1),t("option",{value:"price"},"По цене",-1)]),544),[[O,s.productSort]])]),t("div",be,[(i(!0),l(y,null,v(s.products.data,o=>(i(),l("div",{key:o.id,class:"bg-gray-700 rounded-lg p-4 flex items-center justify-between"},[t("div",xe,[t("img",{src:s.getProductImage(o),alt:o.name,class:"w-16 h-16 object-cover rounded-lg bg-gray-600",onError:e[10]||(e[10]=(...d)=>s.handleImageError&&s.handleImageError(...d))},null,40,ye),t("div",null,[t("h3",ve,n(o.name),1),t("p",pe,n(s.formatPrice(o.price))+" ₽",1),t("div",he,[o.theme?(i(),l("span",fe,n(o.theme.name),1)):m("",!0),o.use_matryoshka?(i(),l("span",_e,"Матрёшка")):m("",!0),t("span",we,n(o.categories_count||0)+" категорий",1)])])]),t("div",ke,[et(P,{to:`/admin/products/edit/${o.id}`,class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"},{default:st(()=>e[55]||(e[55]=[ot(" Изменить ")])),_:2,__:[55]},1032,["to"]),t("button",{onClick:d=>s.deleteProduct(o.id),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,Ce)])]))),128))]),s.products.last_page>1?(i(),l("div",Fe,[(i(!0),l(y,null,v(s.visiblePages,o=>(i(),l("button",{key:o,onClick:d=>s.loadProducts(o),class:K(["px-3 py-2 rounded text-sm transition-colors",o===s.products.current_page?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},n(o),11,Ve))),128))])):m("",!0)])):s.activeTab==="images"?(i(),l("div",Te,[t("div",Ae,[e[56]||(e[56]=t("h2",{class:"text-xl font-semibold text-white"},"Управление изображениями",-1)),t("div",je,[t("input",{ref:"imageInput",type:"file",multiple:"",accept:"image/*",onChange:e[11]||(e[11]=(...o)=>s.uploadImages&&s.uploadImages(...o)),class:"hidden"},null,544),t("button",{onClick:e[12]||(e[12]=o=>F.$refs.imageInput.click()),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Загрузить изображения "),t("button",{onClick:e[13]||(e[13]=(...o)=>F.loadImages&&F.loadImages(...o)),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"}," Обновить ")])]),t("div",Se,[(i(!0),l(y,null,v(s.images,o=>(i(),l("div",{key:o.filename,class:"relative group bg-gray-700 rounded-lg overflow-hidden"},[t("img",{src:s.getImageUrl(o.filename),alt:o.filename,class:"w-full h-32 object-cover",onError:e[14]||(e[14]=(...d)=>s.handleImageError&&s.handleImageError(...d))},null,40,Pe),t("div",Ue,[t("div",Ie,[t("button",{onClick:d=>s.copyImageUrl(o.filename),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs"}," Копировать URL ",8,Me),t("button",{onClick:d=>s.deleteImage(o.filename),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs"}," Удалить ",8,ze)])]),t("div",qe,[t("p",Be,n(o.filename),1),t("p",Ee,n(s.formatFileSize(o.size)),1)])]))),128))])])):s.activeTab==="categories"?(i(),l("div",Oe,[t("div",Ne,[e[57]||(e[57]=t("h2",{class:"text-xl font-semibold text-white"},"Управление категориями",-1)),t("button",{onClick:e[15]||(e[15]=(...o)=>s.createCategory&&s.createCategory(...o)),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Создать категорию ")]),t("div",De,[(i(!0),l(y,null,v(s.categoryTree,o=>(i(),l("div",{key:o.id,class:"bg-gray-700 rounded-lg p-4"},[t("div",Re,[t("div",Le,[t("span",Qe,n(o.name),1),t("span",Ge,n(o.products_count||0)+" товаров ",1),o.children&&o.children.length?(i(),l("span",Ke,n(o.children.length)+" подкатегорий ",1)):m("",!0)]),t("div",We,[t("button",{onClick:d=>s.createSubcategory(o.id),class:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs transition-colors"}," + Подкатегория ",8,He),t("button",{onClick:d=>s.editCategory(o),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Изменить ",8,Je),t("button",{onClick:d=>s.deleteCategory(o.id),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,Xe)])]),o.children&&o.children.length?(i(),l("div",Ye,[(i(!0),l(y,null,v(o.children,d=>(i(),l("div",{key:d.id,class:"bg-gray-600 rounded p-3 flex items-center justify-between"},[t("div",Ze,[e[58]||(e[58]=t("span",{class:"text-gray-300"},"→",-1)),t("span",$e,n(d.name),1),t("span",ts,n(d.products_count||0)+" товаров ",1)]),t("div",es,[t("button",{onClick:h=>s.editCategory(d),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Изменить ",8,ss),t("button",{onClick:h=>s.deleteCategory(d.id),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,os)])]))),128))])):m("",!0)]))),128))])])):s.activeTab==="themes"?(i(),l("div",rs,[t("div",is,[e[59]||(e[59]=t("h2",{class:"text-xl font-semibold text-white"},"Управление темами",-1)),t("button",{onClick:e[16]||(e[16]=(...o)=>s.createTheme&&s.createTheme(...o)),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Создать тему ")]),t("div",ls,[(i(!0),l(y,null,v(s.themes,o=>(i(),l("div",{key:o.id,class:"bg-gray-700 rounded-lg p-4"},[t("div",ns,[t("div",null,[t("h3",as,n(o.name),1),t("p",ds,n(o.products_count||0)+" товаров",1)]),t("div",cs,[t("button",{onClick:d=>s.editTheme(o),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Изменить ",8,us),t("button",{onClick:d=>s.deleteTheme(o.id),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,gs)])])]))),128))])])):s.activeTab==="attributes"?(i(),l("div",ms,[t("div",bs,[e[60]||(e[60]=t("h2",{class:"text-xl font-semibold text-white"},"Управление атрибутами",-1)),t("button",{onClick:e[17]||(e[17]=(...o)=>s.createAttribute&&s.createAttribute(...o)),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}," + Создать атрибут ")]),t("div",xs,[t("div",ys,[e[61]||(e[61]=t("h3",{class:"text-lg font-medium text-white mb-4"},"Атрибуты",-1)),(i(!0),l(y,null,v(s.attributes,o=>{var d;return i(),l("div",{key:o.id,class:K(["bg-gray-700 rounded-lg p-4 cursor-pointer transition-colors",((d=s.selectedAttribute)==null?void 0:d.id)===o.id?"ring-2 ring-blue-500":"hover:bg-gray-600"]),onClick:h=>s.selectAttribute(o)},[t("div",ps,[t("div",hs,[t("span",fs,n(o.name),1),o.is_stone?(i(),l("span",_s," Камень ")):m("",!0)]),t("div",ws,[t("span",ks,n(o.values_count||0)+" значений ",1),t("button",{onClick:j(h=>s.editAttribute(o),["stop"]),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Изменить ",8,Cs),t("button",{onClick:j(h=>s.deleteAttribute(o.id),["stop"]),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,Fs)])])],10,vs)}),128))]),s.selectedAttribute?(i(),l("div",Vs,[t("div",Ts,[t("h3",As,' Значения "'+n(s.selectedAttribute.name)+'" ',1),t("button",{onClick:e[18]||(e[18]=(...o)=>s.createAttributeValue&&s.createAttributeValue(...o)),class:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm transition-colors"}," + Добавить ")]),s.attributeValues.length?(i(),l("div",Ss,[(i(!0),l(y,null,v(s.attributeValues,o=>(i(),l("div",{key:o.id,class:"bg-gray-600 rounded p-3 flex items-center justify-between"},[t("div",Ps,[t("span",Us,n(o.value),1),t("span",Is,n(o.products_count||0)+" товаров ",1),o.is_active?m("",!0):(i(),l("span",Ms," Неактивно "))]),t("div",zs,[t("button",{onClick:d=>s.editAttributeValue(o),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Изменить ",8,qs),t("button",{onClick:d=>s.deleteAttributeValue(o.id),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,Bs)])]))),128))])):(i(),l("div",js," Нет значений для данного атрибута "))])):m("",!0)])])):s.activeTab==="quiz"?(i(),l("div",Es,[e[65]||(e[65]=t("h2",{class:"text-xl font-semibold text-white mb-6"},"Управление квизом",-1)),t("div",Os,[e[64]||(e[64]=t("p",{class:"text-gray-300 mb-4"},"Настройки алгоритма подбора украшений",-1)),t("div",Ns,[t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Приоритет камней (%)",-1)),g(t("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>s.quizSettings.stone_priority=o),type:"range",min:"0",max:"100",class:"w-full"},null,512),[[x,s.quizSettings.stone_priority,void 0,{number:!0}]]),t("span",Ds,n(s.quizSettings.stone_priority)+"%",1)]),t("div",null,[e[63]||(e[63]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Приоритет темы (%)",-1)),g(t("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>s.quizSettings.theme_priority=o),type:"range",min:"0",max:"100",class:"w-full"},null,512),[[x,s.quizSettings.theme_priority,void 0,{number:!0}]]),t("span",Rs,n(s.quizSettings.theme_priority)+"%",1)])]),t("button",{onClick:e[21]||(e[21]=(...o)=>s.saveQuizSettings&&s.saveQuizSettings(...o)),class:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"}," Сохранить настройки ")])])):s.activeTab==="marketplace"?(i(),l("div",Ls,[e[69]||(e[69]=t("h2",{class:"text-xl font-semibold text-white mb-6"},"Интеграция с маркетплейсами",-1)),t("div",Qs,[t("div",Gs,[e[68]||(e[68]=t("h3",{class:"text-lg font-medium text-white mb-4"},"Wildberries",-1)),t("div",Ks,[t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium text-white mb-2"},"API Token",-1)),g(t("input",{"onUpdate:modelValue":e[22]||(e[22]=o=>s.marketplaceSettings.wb_token=o),type:"password",class:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[x,s.marketplaceSettings.wb_token]])]),e[67]||(e[67]=t("div",null,[t("label",{class:"block text-sm font-medium text-white mb-2"},"Статус"),t("span",{class:"text-green-400"},"Подключено")],-1))]),t("button",{onClick:e[23]||(e[23]=o=>s.testMarketplaceConnection("wb")),class:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"}," Тестировать подключение ")])])])):s.activeTab==="settings"?(i(),l("div",Ws,[e[76]||(e[76]=t("h2",{class:"text-xl font-semibold text-white mb-6"},"Настройки системы",-1)),t("div",Hs,[t("div",Js,[e[72]||(e[72]=t("h3",{class:"text-lg font-medium text-white mb-4"},"Общие настройки",-1)),t("div",Xs,[t("div",null,[e[70]||(e[70]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название магазина",-1)),g(t("input",{"onUpdate:modelValue":e[24]||(e[24]=o=>s.settings.shop_name=o),type:"text",class:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[x,s.settings.shop_name]])]),t("div",null,[e[71]||(e[71]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Email для уведомлений",-1)),g(t("input",{"onUpdate:modelValue":e[25]||(e[25]=o=>s.settings.notification_email=o),type:"email",class:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[x,s.settings.notification_email]])])])]),t("div",Ys,[e[75]||(e[75]=t("h3",{class:"text-lg font-medium text-white mb-4"},"Telegram бот",-1)),t("div",Zs,[t("div",null,[e[73]||(e[73]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Bot Token",-1)),g(t("input",{"onUpdate:modelValue":e[26]||(e[26]=o=>s.settings.telegram_token=o),type:"password",class:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[x,s.settings.telegram_token]])]),t("div",null,[e[74]||(e[74]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Username бота",-1)),g(t("input",{"onUpdate:modelValue":e[27]||(e[27]=o=>s.settings.telegram_username=o),type:"text",class:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[x,s.settings.telegram_username]])])])]),t("button",{onClick:e[28]||(e[28]=(...o)=>s.saveSettings&&s.saveSettings(...o)),class:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors",disabled:s.saving},n(s.saving?"Сохранение...":"Сохранить настройки"),9,$s)])])):m("",!0)])]),s.showCategoryModal?(i(),l("div",to,[t("div",eo,[t("h3",so,n(s.categoryForm.id?"Редактировать категорию":"Создать категорию"),1),t("form",{onSubmit:e[33]||(e[33]=j((...o)=>s.saveCategoryForm&&s.saveCategoryForm(...o),["prevent"]))},[t("div",oo,[t("div",null,[e[77]||(e[77]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название",-1)),g(t("input",{"onUpdate:modelValue":e[29]||(e[29]=o=>s.categoryForm.name=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[x,s.categoryForm.name]])]),t("div",null,[e[79]||(e[79]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Родительская категория",-1)),g(t("select",{"onUpdate:modelValue":e[30]||(e[30]=o=>s.categoryForm.parent_id=o),class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},[e[78]||(e[78]=t("option",{value:""},"Корневая категория",-1)),(i(!0),l(y,null,v(s.categories,o=>(i(),l("option",{key:o.id,value:o.id},n(o.name),9,ro))),128))],512),[[O,s.categoryForm.parent_id]])]),t("div",null,[e[80]||(e[80]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Порядок сортировки",-1)),g(t("input",{"onUpdate:modelValue":e[31]||(e[31]=o=>s.categoryForm.sort_order=o),type:"number",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[x,s.categoryForm.sort_order,void 0,{number:!0}]])])]),t("div",io,[t("button",{type:"button",onClick:e[32]||(e[32]=o=>s.showCategoryModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:s.saving},n(s.saving?"Сохранение...":"Сохранить"),9,lo)])],32)])])):m("",!0),s.showThemeModal?(i(),l("div",no,[t("div",ao,[t("h3",co,n(s.themeForm.id?"Редактировать тему":"Создать тему"),1),t("form",{onSubmit:e[36]||(e[36]=j((...o)=>s.saveThemeForm&&s.saveThemeForm(...o),["prevent"]))},[t("div",uo,[t("div",null,[e[81]||(e[81]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название темы",-1)),g(t("input",{"onUpdate:modelValue":e[34]||(e[34]=o=>s.themeForm.name=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white",placeholder:"Например: Минимализм, Готика, Винтаж"},null,512),[[x,s.themeForm.name]])])]),t("div",go,[t("button",{type:"button",onClick:e[35]||(e[35]=o=>s.showThemeModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:s.saving},n(s.saving?"Сохранение...":"Сохранить"),9,mo)])],32)])])):m("",!0),s.showAttributeModal?(i(),l("div",bo,[t("div",xo,[t("h3",yo,n(s.attributeForm.id?"Редактировать атрибут":"Создать атрибут"),1),t("form",{onSubmit:e[40]||(e[40]=j((...o)=>s.saveAttributeForm&&s.saveAttributeForm(...o),["prevent"]))},[t("div",vo,[t("div",null,[e[82]||(e[82]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Название атрибута",-1)),g(t("input",{"onUpdate:modelValue":e[37]||(e[37]=o=>s.attributeForm.name=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white",placeholder:"Например: Материал, Камень, Размер"},null,512),[[x,s.attributeForm.name]])]),t("div",po,[g(t("input",{"onUpdate:modelValue":e[38]||(e[38]=o=>s.attributeForm.is_stone=o),type:"checkbox",id:"is_stone",class:"mr-2"},null,512),[[rt,s.attributeForm.is_stone]]),e[83]||(e[83]=t("label",{for:"is_stone",class:"text-white"},"Это атрибут камня (для квиза)",-1))])]),t("div",ho,[t("button",{type:"button",onClick:e[39]||(e[39]=o=>s.showAttributeModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:s.saving},n(s.saving?"Сохранение...":"Сохранить"),9,fo)])],32)])])):m("",!0),s.showAttributeValueModal?(i(),l("div",_o,[t("div",wo,[t("h3",ko,n(s.attributeValueForm.id?"Редактировать значение":"Создать значение"),1),t("form",{onSubmit:e[45]||(e[45]=j((...o)=>s.saveAttributeValueForm&&s.saveAttributeValueForm(...o),["prevent"]))},[t("div",Co,[t("div",null,[e[84]||(e[84]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Значение",-1)),g(t("input",{"onUpdate:modelValue":e[41]||(e[41]=o=>s.attributeValueForm.value=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white",placeholder:"Например: Серебро, Агат, Большой"},null,512),[[x,s.attributeValueForm.value]])]),t("div",null,[e[85]||(e[85]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Порядок сортировки",-1)),g(t("input",{"onUpdate:modelValue":e[42]||(e[42]=o=>s.attributeValueForm.sort_order=o),type:"number",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"},null,512),[[x,s.attributeValueForm.sort_order,void 0,{number:!0}]])]),t("div",Fo,[g(t("input",{"onUpdate:modelValue":e[43]||(e[43]=o=>s.attributeValueForm.is_active=o),type:"checkbox",id:"is_active",class:"mr-2"},null,512),[[rt,s.attributeValueForm.is_active]]),e[86]||(e[86]=t("label",{for:"is_active",class:"text-white"},"Активно",-1))])]),t("div",Vo,[t("button",{type:"button",onClick:e[44]||(e[44]=o=>s.showAttributeValueModal=!1),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"}," Отмена "),t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:s.saving},n(s.saving?"Сохранение...":"Сохранить"),9,To)])],32)])])):m("",!0)])}const So=Dt(Kt,[["render",Ao],["__scopeId","data-v-0f516a5c"]]);export{So as default};
