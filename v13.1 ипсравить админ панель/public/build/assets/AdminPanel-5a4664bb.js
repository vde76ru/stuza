import{_ as K,g as m,p as A,a as n,c as r,b as s,t as i,j as h,v as z,F as C,l as S,m as b,i as je,s as re,f as le,e as T,h as H,o as Le,r as G,d as oe,w as ae,k as ne,u as N,y as ze,n as y,q as J}from"./main-8e29405a.js";const Me={name:"SimpleList",props:{title:{type:String,required:!0},items:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["create","edit","delete"],setup(u){const e=m(""),d=A(()=>{if(!e.value)return u.items;const t=e.value.toLowerCase();return u.items.filter(p=>p.name.toLowerCase().includes(t)||p.slug&&p.slug.toLowerCase().includes(t))});return{searchQuery:e,filteredItems:d}}},Fe={class:"space-y-4"},Pe={class:"flex justify-between items-center"},Ie={class:"text-xl font-semibold text-white"},Ve={class:"mb-4"},Ue=["placeholder"],De={key:0,class:"text-center py-8"},Oe={key:1,class:"text-center py-8"},qe={class:"text-gray-400"},Ee={key:2,class:"space-y-2"},Be={class:"text-white font-medium"},Ne={key:0,class:"text-gray-400 text-sm"},Ae={class:"flex space-x-2"},Re=["onClick"],Qe=["onClick"];function We(u,e,d,t,p,_){return n(),r("div",Fe,[s("div",Pe,[s("h3",Ie,i(d.title),1),s("button",{onClick:e[0]||(e[0]=g=>u.$emit("create")),class:"bg-stuzha-accent hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"}," + Добавить "+i(d.title.toLowerCase()),1)]),s("div",Ve,[h(s("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>t.searchQuery=g),type:"text",placeholder:`Поиск ${d.title.toLowerCase()}...`,class:"w-full max-w-md bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white placeholder-gray-400 focus:border-stuzha-accent focus:outline-none"},null,8,Ue),[[z,t.searchQuery]])]),d.loading?(n(),r("div",De,e[2]||(e[2]=[s("div",{class:"text-gray-400"},"Загрузка...",-1)]))):t.filteredItems.length===0?(n(),r("div",Oe,[s("div",qe,i(t.searchQuery?"Ничего не найдено":`Нет ${d.title.toLowerCase()}`),1)])):(n(),r("div",Ee,[(n(!0),r(C,null,S(t.filteredItems,g=>(n(),r("div",{key:g.id,class:"bg-gray-800 rounded-lg p-4 flex justify-between items-center hover:bg-gray-700 transition-colors"},[s("div",null,[s("h4",Be,i(g.name),1),g.slug?(n(),r("p",Ne,"Slug: "+i(g.slug),1)):b("",!0)]),s("div",Ae,[s("button",{onClick:w=>u.$emit("edit",g),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Редактировать ",8,Re),s("button",{onClick:w=>u.$emit("delete",g),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,Qe)])]))),128))]))])}const He=K(Me,[["render",We]]),Ge={name:"SimpleModal",props:{mode:{type:String,required:!0,validator:u=>["create","edit"].includes(u)},entityType:{type:String,required:!0},form:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["save","close"],setup(u){const e=A(()=>u.entityType.toLowerCase()==="категорию"),d=A(()=>!(!u.form.name||e.value&&!u.form.slug));return je(()=>u.form.name,t=>{if(e.value&&u.mode==="create"&&t){const p=t.toLowerCase().replace(/а/g,"a").replace(/б/g,"b").replace(/в/g,"v").replace(/г/g,"g").replace(/д/g,"d").replace(/е/g,"e").replace(/ё/g,"yo").replace(/ж/g,"zh").replace(/з/g,"z").replace(/и/g,"i").replace(/й/g,"y").replace(/к/g,"k").replace(/л/g,"l").replace(/м/g,"m").replace(/н/g,"n").replace(/о/g,"o").replace(/п/g,"p").replace(/р/g,"r").replace(/с/g,"s").replace(/т/g,"t").replace(/у/g,"u").replace(/ф/g,"f").replace(/х/g,"kh").replace(/ц/g,"ts").replace(/ч/g,"ch").replace(/ш/g,"sh").replace(/щ/g,"sch").replace(/ъ/g,"").replace(/ы/g,"y").replace(/ь/g,"").replace(/э/g,"e").replace(/ю/g,"yu").replace(/я/g,"ya");u.form.slug=p.replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}},{immediate:!1}),{showSlug:e,isValid:d}}},Je={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Ke={class:"bg-gray-800 rounded-lg max-w-md w-full"},Xe={class:"p-6"},Ye={class:"text-xl font-semibold mb-6 text-white"},Ze=["placeholder"],$e={key:0},et={class:"flex justify-end space-x-3 pt-4"},tt=["disabled"];function st(u,e,d,t,p,_){return n(),r("div",Je,[s("div",Ke,[s("div",Xe,[s("h3",Ye,i(d.mode==="create"?`Добавить ${d.entityType}`:`Редактировать ${d.entityType}`),1),s("form",{onSubmit:e[3]||(e[3]=re(g=>u.$emit("save"),["prevent"])),class:"space-y-4"},[s("div",null,[e[4]||(e[4]=s("label",{class:"block text-sm font-medium mb-1 text-white"},"Название *",-1)),h(s("input",{"onUpdate:modelValue":e[0]||(e[0]=g=>d.form.name=g),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:border-stuzha-accent focus:outline-none",placeholder:`Введите название ${d.entityType.toLowerCase()}`},null,8,Ze),[[z,d.form.name]])]),t.showSlug?(n(),r("div",$e,[e[5]||(e[5]=s("label",{class:"block text-sm font-medium mb-1 text-white"},"Slug *",-1)),h(s("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>d.form.slug=g),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:border-stuzha-accent focus:outline-none",placeholder:"url-slug"},null,512),[[z,d.form.slug]]),e[6]||(e[6]=s("p",{class:"text-gray-400 text-xs mt-1"},"Используется в URL. Только латиница, цифры и дефисы.",-1))])):b("",!0),s("div",et,[s("button",{type:"button",onClick:e[2]||(e[2]=g=>u.$emit("close")),class:"px-4 py-2 text-gray-400 hover:text-white transition-colors"}," Отмена "),s("button",{type:"submit",disabled:!t.isValid||d.loading,class:"bg-stuzha-accent hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50"},i(d.loading?"Сохранение...":"Сохранить"),9,tt)])],32)])])])}const ot=K(Ge,[["render",st]]),at={name:"ConfirmModal",props:{itemName:{type:String,required:!0},entityType:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["confirm","cancel"]},nt={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},rt={class:"bg-gray-800 rounded-lg max-w-md w-full"},lt={class:"p-6"},it={class:"mb-6"},dt={class:"text-gray-300"},ct={class:"font-semibold text-white"},gt={key:0,class:"mb-6 p-3 bg-yellow-900/30 border border-yellow-600 rounded-lg"},ut={class:"flex justify-end space-x-3"},mt=["disabled"],yt=["disabled"],pt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"};function bt(u,e,d,t,p,_){return n(),r("div",nt,[s("div",rt,[s("div",lt,[e[7]||(e[7]=le('<div class="flex items-center mb-4"><div class="flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-4"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div><h3 class="text-lg font-semibold text-white">Подтвердите удаление</h3></div></div>',1)),s("div",it,[s("p",dt,[e[2]||(e[2]=T(" Вы действительно хотите удалить ")),s("span",ct,i(d.itemName),1),e[3]||(e[3]=T("? "))]),e[4]||(e[4]=s("p",{class:"text-gray-400 text-sm mt-2"}," Это действие нельзя отменить. ",-1))]),d.entityType==="product"?(n(),r("div",gt,e[5]||(e[5]=[s("p",{class:"text-yellow-200 text-sm"},[s("strong",null,"Внимание:"),T(" При удалении товара также будут удалены все связанные изображения и связи с категориями. ")],-1)]))):b("",!0),s("div",ut,[s("button",{type:"button",onClick:e[0]||(e[0]=g=>u.$emit("cancel")),class:"px-4 py-2 text-gray-400 hover:text-white transition-colors",disabled:d.loading}," Отмена ",8,mt),s("button",{type:"button",onClick:e[1]||(e[1]=g=>u.$emit("confirm")),disabled:d.loading,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center"},[d.loading?(n(),r("svg",pt,e[6]||(e[6]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):b("",!0),T(" "+i(d.loading?"Удаление...":"Удалить"),1)],8,yt)])])])])}const xt=K(at,[["render",bt]]),vt={name:"AdminPanel",components:{SimpleList:He,SimpleModal:ot,ConfirmModal:xt},setup(){const u=a=>`/admin/${{category:"categories",theme:"themes",attribute:"attributes"}[a]}`,e=ze(),d=m("products"),t=m(!1),p=m(!1),_=m("create"),g=m("category"),w=m(!1),j=m(null),R=m(""),V=m(""),U=m(""),D=m(null),L=m("product"),O=m([]),M=m(!1),v=H({current_page:1,per_page:24,total:0}),o=m([]),x=m([]),q=m([]),E=m([]),X=m(null),F=H({id:null,name:"",slug:""}),Y=H({current_password:"",new_password:"",new_password_confirmation:""}),P=H({current_page:1,per_page:15,total:0}),ie=m([{id:"wildberries",name:"Wildberries",description:"Российский маркетплейс товаров для дома и семьи",status:"disconnected"},{id:"ozon",name:"Ozon",description:"Крупнейший российский интернет-ритейлер",status:"disconnected"},{id:"yandex_market",name:"Яндекс.Маркет",description:"Торговая площадка Яндекса",status:"disconnected"},{id:"flowwow",name:"Flowwow",description:"Платформа для доставки цветов и подарков",status:"disconnected"}]),Z=m(!1),de=[{id:"products",name:"Товары"},{id:"images",name:"Изображения"},{id:"categories",name:"Категории"},{id:"themes",name:"Темы"},{id:"attributes",name:"Атрибуты"},{id:"quiz",name:"Квиз"},{id:"marketplace",name:"Маркетплейсы"},{id:"settings",name:"Настройки"}],ce=A(()=>Math.ceil(P.total/P.per_page)),ge=A(()=>Math.ceil(v.total/v.per_page)),Q=async(a=1)=>{var l,c,f;t.value=!0;try{const k={page:a,per_page:P.per_page,search:R.value,theme_id:V.value,status:U.value},I=await y.get("/admin/products",{params:k});o.value=I.data.data,Object.assign(P,I.data.meta||I.data)}catch(k){console.error("Ошибка загрузки товаров:",k),((l=k.response)==null?void 0:l.status)===401?B():alert("Ошибка загрузки товаров: "+(((f=(c=k.response)==null?void 0:c.data)==null?void 0:f.message)||"Неизвестная ошибка"))}finally{t.value=!1}},ue=()=>{clearTimeout(D.value),D.value=setTimeout(()=>{Q(1)},500)},W=async(a=1)=>{M.value=!0;try{const l={page:a,per_page:v.per_page,type:L.value},c=await y.get("/admin/images",{params:l});O.value=c.data.images||[],Object.assign(v,c.data.pagination||{})}catch(l){console.error("Ошибка загрузки изображений:",l),alert("Ошибка загрузки изображений")}finally{M.value=!1}},me=async a=>{var f,k;const l=a.target.files[0];if(!l)return;const c=new FormData;c.append("image",l),c.append("type",L.value);try{t.value=!0,await y.post("/admin/images/upload",c,{headers:{"Content-Type":"multipart/form-data"}}),alert("Изображение успешно загружено"),W(v.current_page)}catch(I){console.error("Ошибка загрузки изображения:",I),alert("Ошибка загрузки изображения: "+(((k=(f=I.response)==null?void 0:f.data)==null?void 0:k.message)||"Неизвестная ошибка"))}finally{t.value=!1,a.target.value=""}},ye=a=>{navigator.clipboard.writeText(a).then(()=>{alert("URL скопирован в буфер обмена")})},pe=async a=>{if(confirm(`Удалить изображение ${a.filename}?`))try{await y.delete(`/admin/images/${a.filename}`,{params:{type:L.value}}),alert("Изображение удалено"),W(v.current_page)}catch(l){console.error("Ошибка удаления изображения:",l),alert("Ошибка удаления изображения")}},$=async()=>{var a;try{const l=await y.get("/admin/categories");x.value=l.data||[]}catch(l){console.error("Ошибка загрузки категорий:",l),((a=l.response)==null?void 0:a.status)===401?B():alert("Ошибка загрузки категорий")}},ee=async()=>{var a;try{const l=await y.get("/admin/themes");q.value=l.data||[]}catch(l){console.error("Ошибка загрузки тем:",l),((a=l.response)==null?void 0:a.status)===401?B():alert("Ошибка загрузки тем")}},te=async()=>{var a;try{const l=await y.get("/admin/attributes");E.value=l.data||[]}catch(l){console.error("Ошибка загрузки атрибутов:",l),((a=l.response)==null?void 0:a.status)===401?B():alert("Ошибка загрузки атрибутов")}},se=async()=>{try{const a=await y.get("/admin/stats");X.value=a.data||{}}catch(a){console.error("Ошибка загрузки статистики:",a)}},be=a=>{_.value="create",g.value=a,Ce(),p.value=!0},xe=(a,l)=>{_.value="edit",g.value=l,Object.assign(F,{id:a.id,name:a.name,slug:a.slug||""}),p.value=!0},ve=async()=>{var a,l;t.value=!0;try{const c=u(g.value);switch(_.value==="create"?await y.post(c,F):await y.put(`${c}/${F.id}`,F),p.value=!1,g.value){case"category":$();break;case"theme":ee();break;case"attribute":te();break}se()}catch(c){console.error("Ошибка сохранения:",c),alert(((l=(a=c.response)==null?void 0:a.data)==null?void 0:l.message)||"Ошибка сохранения")}finally{t.value=!1}},fe=(a,l)=>{j.value={item:a,type:l},w.value=!0},he=async()=>{var a,l;if(j.value){t.value=!0;try{const{item:c,type:f}=j.value;switch(f){case"product":await y.delete(`/admin/products/${c.id}`),Q(P.current_page);break;case"category":await y.delete(`/admin/categories/${c.id}`),$();break;case"theme":await y.delete(`/admin/themes/${c.id}`),ee();break;case"attribute":await y.delete(`/admin/attributes/${c.id}`),te();break}w.value=!1,j.value=null,se()}catch(c){console.error("Ошибка удаления:",c),alert(((l=(a=c.response)==null?void 0:a.data)==null?void 0:l.message)||"Ошибка удаления")}finally{t.value=!1}}},we=async()=>{var a,l;t.value=!0;try{await y.put("/admin/change-password",Y),alert("Пароль успешно изменен"),Object.assign(Y,{current_password:"",new_password:"",new_password_confirmation:""})}catch(c){console.error("Ошибка смены пароля:",c),alert(((l=(a=c.response)==null?void 0:a.data)==null?void 0:l.message)||"Ошибка смены пароля")}finally{t.value=!1}},_e=async a=>{var l,c;Z.value=!0;try{await y.post("/marketplace/sync",{marketplace:a}),alert("Синхронизация завершена")}catch(f){console.error("Ошибка синхронизации:",f),alert("Ошибка синхронизации: "+(((c=(l=f.response)==null?void 0:l.data)==null?void 0:c.message)||"Неизвестная ошибка"))}finally{Z.value=!1}},ke=a=>{alert(`Настройка ${a} в разработке`)},Ce=()=>{Object.assign(F,{id:null,name:"",slug:""})},B=()=>{localStorage.removeItem("auth_token"),delete y.defaults.headers.common.Authorization,e.push("/admin/login")},Se=a=>new Intl.NumberFormat("ru-RU").format(a),Te=a=>({category:"категорию",theme:"тему",attribute:"атрибут"})[a]||a;return Le(()=>{Q(),$(),ee(),te(),se(),W()}),{activeTab:d,loading:t,modalOpen:p,modalMode:_,modalType:g,deleteConfirmOpen:w,itemToDelete:j,productSearch:R,productThemeFilter:V,productStatusFilter:U,products:o,categories:x,themes:q,attributes:E,stats:X,simpleForm:F,passwordForm:Y,productsPagination:P,imageType:L,images:O,imagesLoading:M,imagesPagination:v,marketplaces:ie,syncLoading:Z,tabs:de,totalPages:ce,imagesTotalPages:ge,loadProducts:Q,debounceSearch:ue,loadImages:W,uploadImage:me,copyImageUrl:ye,deleteImage:pe,openCreateSimple:be,openEditSimple:xe,saveSimple:ve,confirmDelete:fe,deleteItem:he,changePassword:we,syncMarketplace:_e,configureMarketplace:ke,logout:B,formatPrice:Se,getEntityTypeName:Te}}},ft={class:"admin-panel min-h-screen bg-gray-900 p-6"},ht={class:"max-w-7xl mx-auto"},wt={class:"flex justify-between items-center mb-8"},_t={class:"hidden lg:flex space-x-4"},kt={key:0,class:"bg-gray-800 rounded-lg p-4 text-center"},Ct={class:"text-2xl font-bold text-blue-400"},St={key:1,class:"bg-gray-800 rounded-lg p-4 text-center"},Tt={class:"text-2xl font-bold text-green-400"},jt={key:2,class:"bg-gray-800 rounded-lg p-4 text-center"},Lt={class:"text-2xl font-bold text-purple-400"},zt={class:"bg-gray-800 rounded-lg p-2 mb-8"},Mt={class:"flex flex-wrap space-x-1"},Ft=["onClick"],Pt={class:"bg-gray-800 rounded-lg p-6"},It={key:0},Vt={class:"flex justify-between items-center mb-6"},Ut={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Dt=["value"],Ot={key:0,class:"text-center py-8"},qt={key:1,class:"text-center py-8"},Et={key:2,class:"space-y-4"},Bt={class:"flex items-center space-x-4"},Nt=["src","alt"],At={key:1,class:"w-16 h-16 bg-gray-600 rounded-lg flex items-center justify-center"},Rt={class:"text-white font-medium"},Qt={class:"text-gray-400 text-sm"},Wt={class:"text-gray-500 text-xs"},Ht={class:"flex space-x-2 mt-1"},Gt={key:0,class:"bg-purple-600 text-white px-2 py-1 rounded text-xs"},Jt={class:"bg-gray-600 text-gray-300 px-2 py-1 rounded text-xs"},Kt={class:"flex space-x-2"},Xt=["onClick"],Yt={key:0,class:"flex justify-center space-x-2 mt-6"},Zt=["onClick"],$t={key:1},es={class:"flex justify-between items-center mb-6"},ts={class:"flex space-x-2"},ss={class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg cursor-pointer transition-colors"},os={key:0,class:"text-center py-8"},as={key:1,class:"text-center py-8"},ns={key:2},rs={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6"},ls=["src","alt"],is={class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},ds={class:"flex space-x-2"},cs=["onClick"],gs=["onClick"],us={class:"p-2"},ms={class:"text-white text-xs truncate"},ys={class:"text-gray-400 text-xs"},ps={key:0,class:"flex justify-center space-x-2"},bs=["onClick"],xs={key:5},vs={key:6},fs={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},hs={class:"flex items-center justify-between mb-4"},ws={class:"text-lg font-semibold text-white"},_s={class:"text-gray-300 text-sm mb-4"},ks={class:"flex space-x-2"},Cs=["onClick","disabled"],Ss=["onClick"],Ts={key:7},js={class:"space-y-6"},Ls={class:"bg-gray-700 rounded-lg p-6"},zs=["disabled"],Ms={key:0,class:"bg-gray-700 rounded-lg p-6"},Fs={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Ps={class:"text-center"},Is={class:"text-2xl font-bold text-blue-400"},Vs={class:"text-center"},Us={class:"text-2xl font-bold text-purple-400"},Ds={class:"text-center"},Os={class:"text-2xl font-bold text-green-400"},qs={class:"text-center"},Es={class:"text-2xl font-bold text-yellow-400"};function Bs(u,e,d,t,p,_){var V,U,D,L,O,M,v;const g=G("router-link"),w=G("SimpleList"),j=G("SimpleModal"),R=G("ConfirmModal");return n(),r("div",ft,[s("div",ht,[s("div",wt,[e[28]||(e[28]=s("div",null,[s("h1",{class:"text-3xl font-bold text-white"},'Админ-панель "Стужа"'),s("p",{class:"text-gray-400 mt-1"},"Управление интернет-магазином украшений")],-1)),s("div",_t,[t.stats?(n(),r("div",kt,[s("div",Ct,i(((V=t.stats.products)==null?void 0:V.total)||0),1),e[25]||(e[25]=s("div",{class:"text-gray-400 text-sm"},"Товаров",-1))])):b("",!0),t.stats?(n(),r("div",St,[s("div",Tt,i(t.stats.categories||0),1),e[26]||(e[26]=s("div",{class:"text-gray-400 text-sm"},"Категорий",-1))])):b("",!0),t.stats?(n(),r("div",jt,[s("div",Lt,i(((U=t.stats.products)==null?void 0:U.matryoshka)||0),1),e[27]||(e[27]=s("div",{class:"text-gray-400 text-sm"},"Матрёшек",-1))])):b("",!0)]),s("button",{onClick:e[0]||(e[0]=(...o)=>t.logout&&t.logout(...o)),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors"}," Выйти ")]),s("div",zt,[s("nav",Mt,[(n(!0),r(C,null,S(t.tabs,o=>(n(),r("button",{key:o.id,onClick:x=>t.activeTab=o.id,class:J(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",t.activeTab===o.id?"bg-stuzha-accent text-white":"text-gray-300 hover:text-white hover:bg-gray-700"])},i(o.name),11,Ft))),128))])]),s("div",Pt,[t.activeTab==="products"?(n(),r("div",It,[s("div",Vt,[e[30]||(e[30]=s("h2",{class:"text-2xl font-semibold text-white"},"Товары",-1)),oe(g,{to:"/admin/products/create",class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-colors"},{default:ae(()=>e[29]||(e[29]=[T(" Создать товар ")])),_:1,__:[29]})]),s("div",Ut,[h(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.productSearch=o),onInput:e[2]||(e[2]=(...o)=>t.debounceSearch&&t.debounceSearch(...o)),placeholder:"Поиск товаров...",class:"bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"},null,544),[[z,t.productSearch]]),h(s("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.productThemeFilter=o),onChange:e[4]||(e[4]=o=>t.loadProducts(1)),class:"bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"},[e[31]||(e[31]=s("option",{value:""},"Все темы",-1)),(n(!0),r(C,null,S(t.themes,o=>(n(),r("option",{key:o.id,value:o.id},i(o.name),9,Dt))),128))],544),[[ne,t.productThemeFilter]]),h(s("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.productStatusFilter=o),onChange:e[6]||(e[6]=o=>t.loadProducts(1)),class:"bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"},e[32]||(e[32]=[s("option",{value:""},"Все товары",-1),s("option",{value:"matryoshka"},"Только матрёшки",-1),s("option",{value:"regular"},"Обычные товары",-1)]),544),[[ne,t.productStatusFilter]])]),t.loading?(n(),r("div",Ot,e[33]||(e[33]=[s("div",{class:"text-gray-400"},"Загрузка товаров...",-1)]))):t.products.length===0?(n(),r("div",qt,[e[35]||(e[35]=s("div",{class:"text-gray-400"},"Товары не найдены",-1)),oe(g,{to:"/admin/products/create",class:"inline-block mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors"},{default:ae(()=>e[34]||(e[34]=[T(" Создать первый товар ")])),_:1,__:[34]})])):(n(),r("div",Et,[(n(!0),r(C,null,S(t.products,o=>{var x,q,E;return n(),r("div",{key:o.id,class:"bg-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-600 transition-colors"},[s("div",Bt,[(x=o.gallery_images)!=null&&x[0]?(n(),r("img",{key:0,src:o.gallery_images[0],alt:o.name,class:"w-16 h-16 object-cover rounded-lg"},null,8,Nt)):(n(),r("div",At,e[36]||(e[36]=[s("span",{class:"text-gray-400 text-xs"},"Нет фото",-1)]))),s("div",null,[s("h4",Rt,i(o.name),1),s("p",Qt,i(t.formatPrice(o.price))+" ₽",1),s("p",Wt,"Тема: "+i(((q=o.theme)==null?void 0:q.name)||"Не указана"),1),s("div",Ht,[o.use_matryoshka?(n(),r("span",Gt," Матрёшка ")):b("",!0),s("span",Jt,i(((E=o.categories)==null?void 0:E.length)||0)+" категорий ",1)])])]),s("div",Kt,[oe(g,{to:`/admin/products/edit/${o.id}`,class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"},{default:ae(()=>e[37]||(e[37]=[T(" Редактировать ")])),_:2,__:[37]},1032,["to"]),s("button",{onClick:X=>t.confirmDelete(o,"product"),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,Xt)])])}),128)),t.totalPages>1?(n(),r("div",Yt,[(n(!0),r(C,null,S(t.totalPages,o=>(n(),r("button",{key:o,onClick:x=>t.loadProducts(o),class:J(["px-3 py-1 rounded transition-colors",t.productsPagination.current_page===o?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},i(o),11,Zt))),128))])):b("",!0)]))])):t.activeTab==="images"?(n(),r("div",$t,[s("div",es,[e[40]||(e[40]=s("h2",{class:"text-2xl font-semibold text-white"},"Файловый менеджер",-1)),s("div",ts,[h(s("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.imageType=o),onChange:e[8]||(e[8]=o=>t.loadImages(1)),class:"bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600"},e[38]||(e[38]=[s("option",{value:"product"},"Товары",-1),s("option",{value:"matryoshka_outer"},"Матрёшка (внешний слой)",-1),s("option",{value:"matryoshka_inner"},"Матрёшка (внутренний слой)",-1)]),544),[[ne,t.imageType]]),s("label",ss,[s("input",{type:"file",onChange:e[9]||(e[9]=(...o)=>t.uploadImage&&t.uploadImage(...o)),accept:"image/*",class:"hidden"},null,32),e[39]||(e[39]=T(" Загрузить изображение "))])])]),t.imagesLoading?(n(),r("div",os,e[41]||(e[41]=[s("div",{class:"text-gray-400"},"Загрузка изображений...",-1)]))):t.images.length===0?(n(),r("div",as,e[42]||(e[42]=[s("div",{class:"text-gray-400"},"Изображения не найдены",-1)]))):(n(),r("div",ns,[s("div",rs,[(n(!0),r(C,null,S(t.images,o=>(n(),r("div",{key:o.filename,class:"relative group bg-gray-700 rounded-lg overflow-hidden"},[s("img",{src:o.url,alt:o.filename,class:"w-full h-32 object-cover"},null,8,ls),s("div",is,[s("div",ds,[s("button",{onClick:x=>t.copyImageUrl(o.url),class:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded text-xs",title:"Скопировать URL"}," 📋 ",8,cs),s("button",{onClick:x=>t.deleteImage(o),class:"bg-red-600 hover:bg-red-700 text-white p-2 rounded text-xs",title:"Удалить"}," 🗑️ ",8,gs)])]),s("div",us,[s("div",ms,i(o.filename),1),s("div",ys,i(o.size_human),1)])]))),128))]),t.imagesTotalPages>1?(n(),r("div",ps,[(n(!0),r(C,null,S(t.imagesTotalPages,o=>(n(),r("button",{key:o,onClick:x=>t.loadImages(o),class:J(["px-3 py-1 rounded transition-colors",t.imagesPagination.current_page===o?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},i(o),11,bs))),128))])):b("",!0)]))])):t.activeTab==="categories"?(n(),N(w,{key:2,title:"Категории",items:t.categories,loading:t.loading,onCreate:e[10]||(e[10]=o=>t.openCreateSimple("category")),onEdit:e[11]||(e[11]=o=>t.openEditSimple(o,"category")),onDelete:e[12]||(e[12]=o=>t.confirmDelete(o,"category"))},null,8,["items","loading"])):t.activeTab==="themes"?(n(),N(w,{key:3,title:"Темы",items:t.themes,loading:t.loading,onCreate:e[13]||(e[13]=o=>t.openCreateSimple("theme")),onEdit:e[14]||(e[14]=o=>t.openEditSimple(o,"theme")),onDelete:e[15]||(e[15]=o=>t.confirmDelete(o,"theme"))},null,8,["items","loading"])):t.activeTab==="attributes"?(n(),N(w,{key:4,title:"Атрибуты",items:t.attributes,loading:t.loading,onCreate:e[16]||(e[16]=o=>t.openCreateSimple("attribute")),onEdit:e[17]||(e[17]=o=>t.openEditSimple(o,"attribute")),onDelete:e[18]||(e[18]=o=>t.confirmDelete(o,"attribute"))},null,8,["items","loading"])):t.activeTab==="quiz"?(n(),r("div",xs,e[43]||(e[43]=[le('<h2 class="text-2xl font-semibold text-white mb-6">Правила астрологического квиза</h2><p class="text-gray-400 mb-4">Управление правилами подбора камней по дате рождения</p><div class="bg-gray-700 rounded-lg p-4"><p class="text-gray-300">Функционал в разработке</p><button class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"> Создать правило </button></div>',3)]))):t.activeTab==="marketplace"?(n(),r("div",vs,[e[44]||(e[44]=s("h2",{class:"text-2xl font-semibold text-white mb-6"},"Синхронизация с маркетплейсами",-1)),e[45]||(e[45]=s("p",{class:"text-gray-400 mb-4"},"Управление синхронизацией с Wildberries, Ozon, Яндекс.Маркет, flowwow",-1)),s("div",fs,[(n(!0),r(C,null,S(t.marketplaces,o=>(n(),r("div",{key:o.id,class:"bg-gray-700 rounded-lg p-4"},[s("div",hs,[s("h3",ws,i(o.name),1),s("span",{class:J(["px-3 py-1 rounded-full text-xs font-medium",o.status==="connected"?"bg-green-600 text-white":"bg-red-600 text-white"])},i(o.status==="connected"?"Подключен":"Отключен"),3)]),s("p",_s,i(o.description),1),s("div",ks,[s("button",{onClick:x=>t.syncMarketplace(o.id),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm transition-colors",disabled:t.syncLoading},i(t.syncLoading?"Синхронизация...":"Синхронизировать"),9,Cs),s("button",{onClick:x=>t.configureMarketplace(o.id),class:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded text-sm transition-colors"}," Настройки ",8,Ss)])]))),128))])])):t.activeTab==="settings"?(n(),r("div",Ts,[e[52]||(e[52]=s("h2",{class:"text-2xl font-semibold text-white mb-6"},"Настройки",-1)),s("div",js,[s("div",Ls,[e[46]||(e[46]=s("h3",{class:"text-lg font-semibold text-white mb-4"},"Смена пароля",-1)),s("form",{onSubmit:e[22]||(e[22]=re((...o)=>t.changePassword&&t.changePassword(...o),["prevent"])),class:"space-y-4"},[h(s("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>t.passwordForm.current_password=o),type:"password",placeholder:"Текущий пароль",class:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg border border-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[z,t.passwordForm.current_password]]),h(s("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>t.passwordForm.new_password=o),type:"password",placeholder:"Новый пароль",class:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg border border-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[z,t.passwordForm.new_password]]),h(s("input",{"onUpdate:modelValue":e[21]||(e[21]=o=>t.passwordForm.new_password_confirmation=o),type:"password",placeholder:"Подтверждение нового пароля",class:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg border border-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[z,t.passwordForm.new_password_confirmation]]),s("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",disabled:t.loading},i(t.loading?"Изменение...":"Изменить пароль"),9,zs)],32)]),t.stats?(n(),r("div",Ms,[e[51]||(e[51]=s("h3",{class:"text-lg font-semibold text-white mb-4"},"Статистика системы",-1)),s("div",Fs,[s("div",Ps,[s("div",Is,i(((D=t.stats.products)==null?void 0:D.total)||0),1),e[47]||(e[47]=s("div",{class:"text-gray-400 text-sm"},"Всего товаров",-1))]),s("div",Vs,[s("div",Us,i(((L=t.stats.products)==null?void 0:L.matryoshka)||0),1),e[48]||(e[48]=s("div",{class:"text-gray-400 text-sm"},"Матрёшки",-1))]),s("div",Ds,[s("div",Os,i(t.stats.categories||0),1),e[49]||(e[49]=s("div",{class:"text-gray-400 text-sm"},"Категорий",-1))]),s("div",qs,[s("div",Es,i(((O=t.stats.storage)==null?void 0:O.total_size_human)||"0 B"),1),e[50]||(e[50]=s("div",{class:"text-gray-400 text-sm"},"Размер файлов",-1))])])])):b("",!0)])])):b("",!0)])]),t.modalOpen?(n(),N(j,{key:0,mode:t.modalMode,"entity-type":t.getEntityTypeName(t.modalType),form:t.simpleForm,loading:t.loading,onSave:t.saveSimple,onClose:e[23]||(e[23]=o=>t.modalOpen=!1)},null,8,["mode","entity-type","form","loading","onSave"])):b("",!0),t.deleteConfirmOpen?(n(),N(R,{key:1,"item-name":((v=(M=t.itemToDelete)==null?void 0:M.item)==null?void 0:v.name)||"элемент",loading:t.loading,onConfirm:t.deleteItem,onCancel:e[24]||(e[24]=o=>t.deleteConfirmOpen=!1)},null,8,["item-name","loading","onConfirm"])):b("",!0)])}const As=K(vt,[["render",Bs]]);export{As as default};
