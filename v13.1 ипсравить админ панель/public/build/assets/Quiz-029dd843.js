import{_ as z,g as y,h as k,a as r,c as l,b as e,j as f,k as x,F as c,l as b,t as i,v as Q,m as p,s as V,n as q,r as _,d as w,w as F,e as R}from"./main-8e29405a.js";const N={name:"QuizForm",emits:["result"],setup(u,{emit:t}){const d=y(!1),o=y(""),g=k({day:"",month:"",year:"",hour:""});return{form:g,loading:d,error:o,months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],submitQuiz:async()=>{var a,m;d.value=!0,o.value="";try{const n=await q.post("/quiz",g);t("result",n.data)}catch(n){o.value=((m=(a=n.response)==null?void 0:a.data)==null?void 0:m.message)||"Ошибка при подборе украшений"}finally{d.value=!1}}}}},S={class:"quiz-form bg-gray-900/50 rounded-xl p-8 backdrop-blur-sm border border-gray-800"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},j=["value"],B=["value"],C=["value"],M={key:0,class:"text-red-500 text-center"},P={class:"text-center"},D=["disabled"],T={key:0},E={key:1};function I(u,t,d,o,g,v){return r(),l("div",S,[e("form",{onSubmit:t[4]||(t[4]=V((...s)=>o.submitQuiz&&o.submitQuiz(...s),["prevent"])),class:"space-y-6"},[e("div",U,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-white font-semibold mb-2"},"День рождения",-1)),f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.form.day=s),required:"",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-stuzha-accent focus:outline-none"},[t[5]||(t[5]=e("option",{value:""},"Выберите день",-1)),(r(),l(c,null,b(31,s=>e("option",{key:s,value:s},i(s),9,j)),64))],512),[[x,o.form.day]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-white font-semibold mb-2"},"Месяц рождения",-1)),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.form.month=s),required:"",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-stuzha-accent focus:outline-none"},[t[7]||(t[7]=e("option",{value:""},"Выберите месяц",-1)),(r(!0),l(c,null,b(o.months,(s,a)=>(r(),l("option",{key:a,value:a+1},i(s),9,B))),128))],512),[[x,o.form.month]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-white font-semibold mb-2"},"Год рождения",-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.form.year=s),type:"number",min:1920,max:2024,required:"",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-stuzha-accent focus:outline-none",placeholder:"1990"},null,512),[[Q,o.form.year]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-white font-semibold mb-2"},"Час рождения",-1)),f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.hour=s),required:"",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-stuzha-accent focus:outline-none"},[t[10]||(t[10]=e("option",{value:""},"Выберите час",-1)),(r(),l(c,null,b(24,s=>e("option",{key:s-1,value:s-1},i((s-1).toString().padStart(2,"0"))+":00",9,C)),64))],512),[[x,o.form.hour]])])]),o.error?(r(),l("div",M,i(o.error),1)):p("",!0),e("div",P,[e("button",{type:"submit",disabled:o.loading,class:"bg-stuzha-accent hover:bg-red-700 text-white px-8 py-3 rounded-lg text-lg font-semibold transition-all duration-300 transform hover:scale-105 disabled:opacity-50"},[o.loading?(r(),l("span",T,"Вычисляем...")):(r(),l("span",E,"Подобрать украшения"))],8,D)])],32)])}const L=z(N,[["render",I]]),A={name:"Quiz",components:{QuizForm:L},setup(){const u=y(null);return{result:u,formatPrice:o=>new Intl.NumberFormat("ru-RU").format(o),onQuizResult:o=>{u.value=o}}}},G={class:"quiz min-h-screen bg-stuzha-bg py-20"},H={class:"max-w-4xl mx-auto px-4"},J={key:0,class:"mt-16"},K={class:"bg-gray-900/50 rounded-xl p-8 backdrop-blur-sm border border-gray-800 mb-8"},O={class:"flex flex-wrap gap-3 mb-6"},W={key:0},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Y={class:"aspect-w-1 aspect-h-1 bg-gradient-to-br from-gray-800 to-gray-900"},Z=["src","alt"],$={key:1,class:"flex items-center justify-center h-full"},tt={class:"p-4"},et={class:"text-lg font-semibold text-white mb-2"},ot={class:"flex justify-between items-center"},st={class:"text-xl font-bold text-stuzha-accent"};function rt(u,t,d,o,g,v){var m;const s=_("QuizForm"),a=_("router-link");return r(),l("div",G,[e("div",H,[t[4]||(t[4]=e("div",{class:"text-center mb-12"},[e("h1",{class:"text-4xl md:text-5xl font-bold text-white mb-6"},"Астрологический подбор"),e("p",{class:"text-xl text-gray-400 max-w-3xl mx-auto"}," Введите данные вашего рождения, и мы подберем идеальные камни для вас ")],-1)),w(s,{onResult:o.onQuizResult},null,8,["onResult"]),o.result?(r(),l("div",J,[e("div",K,[t[0]||(t[0]=e("h2",{class:"text-2xl font-bold text-white mb-4"},"Ваши рекомендуемые камни:",-1)),e("div",O,[(r(!0),l(c,null,b(o.result.recommended_stones,n=>(r(),l("span",{key:n,class:"bg-stuzha-accent text-white px-4 py-2 rounded-full font-semibold"},i(n),1))),128))])]),((m=o.result.products)==null?void 0:m.length)>0?(r(),l("div",W,[t[3]||(t[3]=e("h3",{class:"text-2xl font-bold text-white mb-8 text-center"},"Подходящие украшения:",-1)),e("div",X,[(r(!0),l(c,null,b(o.result.products,n=>{var h;return r(),l("div",{key:n.id,class:"bg-gray-900/50 rounded-xl overflow-hidden border border-gray-800 hover:border-stuzha-accent/50 transition-all duration-300"},[e("div",Y,[((h=n.gallery_images)==null?void 0:h.length)>0?(r(),l("img",{key:0,src:n.gallery_images[0],alt:n.name,class:"w-full h-full object-cover"},null,8,Z)):(r(),l("div",$,t[1]||(t[1]=[e("p",{class:"text-gray-500"},"Изображение отсутствует",-1)])))]),e("div",tt,[e("h4",et,i(n.name),1),e("div",ot,[e("span",st,i(o.formatPrice(n.price))+" ₽",1),w(a,{to:`/product/${n.slug}`,class:"bg-stuzha-accent hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors"},{default:F(()=>t[2]||(t[2]=[R(" Подробнее ")])),_:2,__:[2]},1032,["to"])])])])}),128))])])):p("",!0)])):p("",!0)])])}const nt=z(A,[["render",rt]]);export{nt as default};
