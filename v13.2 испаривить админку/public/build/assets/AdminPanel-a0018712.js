import{_ as L,g as y,p as U,a as l,c as i,b as e,t as a,j as p,v as f,F as C,l as V,m,i as Q,s as A,f as re,e as z,h as q,o as le,k as ie,z as E,y as ne,n as h,q as P}from"./main-df5ed99e.js";const ae={name:"SimpleList",props:{title:{type:String,required:!0},items:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["create","edit","delete"],setup(d){const t=y(""),n=U(()=>{if(!t.value)return d.items;const s=t.value.toLowerCase();return d.items.filter(x=>x.name.toLowerCase().includes(s)||x.slug&&x.slug.toLowerCase().includes(s))});return{searchQuery:t,filteredItems:n}}},de={class:"space-y-4"},ce={class:"flex justify-between items-center"},ue={class:"text-xl font-semibold text-white"},ge={class:"mb-4"},be=["placeholder"],me={key:0,class:"text-center py-8"},xe={key:1,class:"text-center py-8"},ye={class:"text-gray-400"},pe={key:2,class:"space-y-2"},ve={class:"text-white font-medium"},he={key:0,class:"text-gray-400 text-sm"},fe={class:"flex space-x-2"},_e=["onClick"],we=["onClick"];function ke(d,t,n,s,x,k){return l(),i("div",de,[e("div",ce,[e("h3",ue,a(n.title),1),e("button",{onClick:t[0]||(t[0]=c=>d.$emit("create")),class:"bg-stuzha-accent hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"}," + Добавить "+a(n.title.toLowerCase()),1)]),e("div",ge,[p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>s.searchQuery=c),type:"text",placeholder:`Поиск ${n.title.toLowerCase()}...`,class:"w-full max-w-md bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white placeholder-gray-400 focus:border-stuzha-accent focus:outline-none"},null,8,be),[[f,s.searchQuery]])]),n.loading?(l(),i("div",me,t[2]||(t[2]=[e("div",{class:"text-gray-400"},"Загрузка...",-1)]))):s.filteredItems.length===0?(l(),i("div",xe,[e("div",ye,a(s.searchQuery?"Ничего не найдено":`Нет ${n.title.toLowerCase()}`),1)])):(l(),i("div",pe,[(l(!0),i(C,null,V(s.filteredItems,c=>(l(),i("div",{key:c.id,class:"bg-gray-800 rounded-lg p-4 flex justify-between items-center hover:bg-gray-700 transition-colors"},[e("div",null,[e("h4",ve,a(c.name),1),c.slug?(l(),i("p",he,"Slug: "+a(c.slug),1)):m("",!0)]),e("div",fe,[e("button",{onClick:_=>d.$emit("edit",c),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Редактировать ",8,_e),e("button",{onClick:_=>d.$emit("delete",c),class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors"}," Удалить ",8,we)])]))),128))]))])}const Ce=L(ae,[["render",ke]]),Ve={name:"SimpleModal",props:{mode:{type:String,required:!0,validator:d=>["create","edit"].includes(d)},entityType:{type:String,required:!0},form:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["save","close"],setup(d){const t=U(()=>d.entityType.toLowerCase()==="категорию"),n=U(()=>!(!d.form.name||t.value&&!d.form.slug));return Q(()=>d.form.name,s=>{if(t.value&&d.mode==="create"&&s){const x=s.toLowerCase().replace(/а/g,"a").replace(/б/g,"b").replace(/в/g,"v").replace(/г/g,"g").replace(/д/g,"d").replace(/е/g,"e").replace(/ё/g,"yo").replace(/ж/g,"zh").replace(/з/g,"z").replace(/и/g,"i").replace(/й/g,"y").replace(/к/g,"k").replace(/л/g,"l").replace(/м/g,"m").replace(/н/g,"n").replace(/о/g,"o").replace(/п/g,"p").replace(/р/g,"r").replace(/с/g,"s").replace(/т/g,"t").replace(/у/g,"u").replace(/ф/g,"f").replace(/х/g,"kh").replace(/ц/g,"ts").replace(/ч/g,"ch").replace(/ш/g,"sh").replace(/щ/g,"sch").replace(/ъ/g,"").replace(/ы/g,"y").replace(/ь/g,"").replace(/э/g,"e").replace(/ю/g,"yu").replace(/я/g,"ya");d.form.slug=x.replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}},{immediate:!1}),{showSlug:t,isValid:n}}},Ae={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},je={class:"bg-gray-800 rounded-lg max-w-md w-full"},Fe={class:"p-6"},Se={class:"text-xl font-semibold mb-6 text-white"},ze=["placeholder"],Me={key:0},Le={class:"flex justify-end space-x-3 pt-4"},Te=["disabled"];function qe(d,t,n,s,x,k){return l(),i("div",Ae,[e("div",je,[e("div",Fe,[e("h3",Se,a(n.mode==="create"?`Добавить ${n.entityType}`:`Редактировать ${n.entityType}`),1),e("form",{onSubmit:t[3]||(t[3]=A(c=>d.$emit("save"),["prevent"])),class:"space-y-4"},[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium mb-1 text-white"},"Название *",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>n.form.name=c),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:border-stuzha-accent focus:outline-none",placeholder:`Введите название ${n.entityType.toLowerCase()}`},null,8,ze),[[f,n.form.name]])]),s.showSlug?(l(),i("div",Me,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium mb-1 text-white"},"Slug *",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>n.form.slug=c),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:border-stuzha-accent focus:outline-none",placeholder:"url-slug"},null,512),[[f,n.form.slug]]),t[6]||(t[6]=e("p",{class:"text-gray-400 text-xs mt-1"},"Используется в URL. Только латиница, цифры и дефисы.",-1))])):m("",!0),e("div",Le,[e("button",{type:"button",onClick:t[2]||(t[2]=c=>d.$emit("close")),class:"px-4 py-2 text-gray-400 hover:text-white transition-colors"}," Отмена "),e("button",{type:"submit",disabled:!s.isValid||n.loading,class:"bg-stuzha-accent hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50"},a(n.loading?"Сохранение...":"Сохранить"),9,Te)])],32)])])])}const Ue=L(Ve,[["render",qe]]),Be={name:"ConfirmModal",props:{itemName:{type:String,required:!0},entityType:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["confirm","cancel"]},Oe={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},De={class:"bg-gray-800 rounded-lg max-w-md w-full"},Ne={class:"p-6"},Ee={class:"mb-6"},Pe={class:"text-gray-300"},Qe={class:"font-semibold text-white"},Ie={key:0,class:"mb-6 p-3 bg-yellow-900/30 border border-yellow-600 rounded-lg"},Re={class:"flex justify-end space-x-3"},$e=["disabled"],He=["disabled"],Xe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"};function Ge(d,t,n,s,x,k){return l(),i("div",Oe,[e("div",De,[e("div",Ne,[t[7]||(t[7]=re('<div class="flex items-center mb-4"><div class="flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-4"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div><h3 class="text-lg font-semibold text-white">Подтвердите удаление</h3></div></div>',1)),e("div",Ee,[e("p",Pe,[t[2]||(t[2]=z(" Вы действительно хотите удалить ")),e("span",Qe,a(n.itemName),1),t[3]||(t[3]=z("? "))]),t[4]||(t[4]=e("p",{class:"text-gray-400 text-sm mt-2"}," Это действие нельзя отменить. ",-1))]),n.entityType==="product"?(l(),i("div",Ie,t[5]||(t[5]=[e("p",{class:"text-yellow-200 text-sm"},[e("strong",null,"Внимание:"),z(" При удалении товара также будут удалены все связанные изображения и связи с категориями. ")],-1)]))):m("",!0),e("div",Re,[e("button",{type:"button",onClick:t[0]||(t[0]=c=>d.$emit("cancel")),class:"px-4 py-2 text-gray-400 hover:text-white transition-colors",disabled:n.loading}," Отмена ",8,$e),e("button",{type:"button",onClick:t[1]||(t[1]=c=>d.$emit("confirm")),disabled:n.loading,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center"},[n.loading?(l(),i("svg",Xe,t[6]||(t[6]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),z(" "+a(n.loading?"Удаление...":"Удалить"),1)],8,He)])])])])}const Je=L(Be,[["render",Ge]]),Ke={name:"AdminPanel",components:{SimpleList:Ce,SimpleModal:Ue,ConfirmModal:Je},setup(){const d=ne(),t=y("products"),n=y(!1),s=y([]),x=y([]),k=y([]),c=y([]),_=y(null),o=y(null),g=y(!1),j=y(!1),M=y(!1),v=q({id:null,name:"",slug:"",parent_id:null,sort_order:0}),F=q({id:null,name:"",is_stone:!1}),w=q({id:null,attribute_id:null,value:"",sort_order:0,is_active:!0}),I=[{id:"products",name:"Товары"},{id:"images",name:"Изображения"},{id:"categories",name:"Категории"},{id:"themes",name:"Темы"},{id:"attributes",name:"Атрибуты"},{id:"quiz",name:"Квиз"},{id:"marketplace",name:"Маркетплейсы"},{id:"settings",name:"Настройки"}],B=async()=>{try{const r=await h.get("/admin/categories/tree");x.value=r.data}catch(r){console.error("Ошибка загрузки дерева категорий:",r)}},O=async()=>{try{const r=await h.get("/admin/categories");s.value=r.data}catch(r){console.error("Ошибка загрузки категорий:",r)}},D=async()=>{try{const r=await h.get("/admin/attributes");k.value=r.data}catch(r){console.error("Ошибка загрузки атрибутов:",r)}},T=async r=>{try{_.value=r;const b=await h.get(`/admin/attributes/${r}/values`);c.value=b.data}catch(b){console.error("Ошибка загрузки значений атрибута:",b)}},R=()=>{Object.assign(v,{id:null,name:"",slug:"",parent_id:null,sort_order:0}),g.value=!0},$=r=>{Object.assign(v,{id:null,name:"",slug:"",parent_id:r,sort_order:0}),g.value=!0},H=r=>{Object.assign(v,{id:r.id,name:r.name,slug:r.slug,parent_id:r.parent_id,sort_order:r.sort_order||0}),g.value=!0},X=async()=>{var r,b;try{n.value=!0;const u=v.id,S=u?`/admin/categories/${v.id}`:"/admin/categories";await h[u?"put":"post"](S,v),g.value=!1,await Promise.all([O(),B()]),alert(u?"Категория обновлена!":"Категория создана!")}catch(u){console.error("Ошибка сохранения категории:",u),alert("Ошибка: "+(((b=(r=u.response)==null?void 0:r.data)==null?void 0:b.message)||"Неизвестная ошибка"))}finally{n.value=!1}},G=()=>{Object.assign(F,{id:null,name:"",is_stone:!1}),j.value=!0},J=r=>{Object.assign(F,{id:r.id,name:r.name,is_stone:r.is_stone}),j.value=!0},K=async()=>{var r,b;try{n.value=!0;const u=F.id,S=u?`/admin/attributes/${F.id}`:"/admin/attributes";await h[u?"put":"post"](S,F),j.value=!1,await D(),alert(u?"Атрибут обновлен!":"Атрибут создан!")}catch(u){console.error("Ошибка сохранения атрибута:",u),alert("Ошибка: "+(((b=(r=u.response)==null?void 0:r.data)==null?void 0:b.message)||"Неизвестная ошибка"))}finally{n.value=!1}},W=r=>{Object.assign(w,{id:null,attribute_id:r,value:"",sort_order:0,is_active:!0}),M.value=!0},Y=r=>{Object.assign(w,{id:r.id,attribute_id:r.attribute_id,value:r.value,sort_order:r.sort_order,is_active:r.is_active}),M.value=!0},Z=async()=>{var r,b;try{n.value=!0;const u=w.id,S=u?`/admin/attribute-values/${w.id}`:`/admin/attributes/${w.attribute_id}/values`;await h[u?"put":"post"](S,w),M.value=!1,await T(w.attribute_id),alert(u?"Значение обновлено!":"Значение создано!")}catch(u){console.error("Ошибка сохранения значения:",u),alert("Ошибка: "+(((b=(r=u.response)==null?void 0:r.data)==null?void 0:b.message)||"Неизвестная ошибка"))}finally{n.value=!1}},ee=async r=>{if(confirm("Удалить это значение атрибута?"))try{await h.delete(`/admin/attribute-values/${r}`),await T(_.value),alert("Значение удалено!")}catch(b){console.error("Ошибка удаления значения:",b),alert("Ошибка удаления")}},te=r=>{const b=k.value.find(u=>u.id===r);return b?b.name:"Неизвестный атрибут"},se=(r,b)=>{confirm(`Удалить ${b} "${r.name}"?`)},oe=()=>{localStorage.removeItem("auth_token"),delete h.defaults.headers.common.Authorization,d.push("/admin/login")};return Q(()=>v.name,r=>{r&&!v.id&&(v.slug=r.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"))}),le(async()=>{await Promise.all([O(),B(),D()])}),{activeTab:t,loading:n,categories:s,categoryTree:x,attributes:k,attributeValues:c,selectedAttribute:_,stats:o,showCategoryModal:g,showAttributeModal:j,showAttributeValueModal:M,categoryForm:v,attributeForm:F,attributeValueForm:w,tabs:I,createCategory:R,createSubcategory:$,editCategory:H,saveCategory:X,createAttribute:G,editAttribute:J,saveAttribute:K,createAttributeValue:W,editAttributeValue:Y,saveAttributeValue:Z,deleteAttributeValue:ee,loadAttributeValues:T,getAttributeName:te,confirmDelete:se,logout:oe}}},We={class:"admin-panel min-h-screen bg-gray-900 p-6"},Ye={class:"max-w-7xl mx-auto"},Ze={class:"flex justify-between items-center mb-8"},et={class:"hidden lg:flex space-x-4"},tt={key:0,class:"bg-gray-800 rounded-lg p-4 text-center"},st={class:"text-2xl font-bold text-blue-400"},ot={key:1,class:"bg-gray-800 rounded-lg p-4 text-center"},rt={class:"text-2xl font-bold text-green-400"},lt={key:2,class:"bg-gray-800 rounded-lg p-4 text-center"},it={class:"text-2xl font-bold text-purple-400"},nt={class:"bg-gray-800 rounded-lg p-2 mb-8"},at={class:"flex flex-wrap space-x-1"},dt=["onClick"],ct={class:"bg-gray-800 rounded-lg p-6"},ut={key:0},gt={class:"flex justify-between items-center mb-6"},bt={class:"flex space-x-2"},mt={class:"space-y-2"},xt={class:"flex items-center justify-between"},yt={class:"flex items-center space-x-3"},pt={class:"text-white font-medium"},vt={class:"bg-blue-600 text-white px-2 py-1 rounded text-xs"},ht={key:0,class:"bg-purple-600 text-white px-2 py-1 rounded text-xs"},ft={class:"flex space-x-2"},_t=["onClick"],wt=["onClick"],kt=["onClick"],Ct={key:0,class:"ml-6 mt-3 space-y-2"},Vt={class:"flex items-center space-x-3"},At={class:"text-white"},jt={class:"bg-gray-500 text-white px-2 py-1 rounded text-xs"},Ft={class:"flex space-x-2"},St=["onClick"],zt=["onClick"],Mt={key:1},Lt={class:"flex justify-between items-center mb-6"},Tt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},qt={class:"space-y-3"},Ut=["onClick"],Bt={class:"flex items-center justify-between"},Ot={class:"flex items-center space-x-3"},Dt={class:"text-white font-medium"},Nt={key:0,class:"bg-purple-600 text-white px-2 py-1 rounded text-xs"},Et={class:"flex space-x-2"},Pt={class:"bg-gray-600 text-gray-300 px-2 py-1 rounded text-xs"},Qt=["onClick"],It=["onClick"],Rt=["onClick"],$t={class:"text-lg font-medium text-white mb-4"},Ht={key:0,class:"text-gray-400"},Xt={key:0,class:"text-center py-8 text-gray-400"},Gt={key:1,class:"space-y-2"},Jt={class:"flex items-center space-x-3"},Kt={class:"text-white"},Wt={class:"bg-gray-600 text-gray-300 px-2 py-1 rounded text-xs"},Yt={key:0,class:"bg-red-600 text-white px-2 py-1 rounded text-xs"},Zt={class:"flex space-x-2"},es=["onClick"],ts=["onClick"],ss={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},os={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},rs={class:"text-xl text-white mb-4"},ls={class:"space-y-4"},is=["value"],ns={class:"flex justify-end space-x-3 mt-6"},as=["disabled"],ds={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},cs={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},us={class:"text-xl text-white mb-4"},gs={class:"space-y-4"},bs={class:"flex items-center"},ms={class:"flex justify-end space-x-3 mt-6"},xs=["disabled"],ys={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ps={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},vs={class:"text-xl text-white mb-4"},hs={class:"space-y-4"},fs={class:"flex items-center"},_s={class:"flex justify-end space-x-3 mt-6"},ws=["disabled"];function ks(d,t,n,s,x,k){var c,_;return l(),i("div",We,[e("div",Ye,[e("div",Ze,[t[22]||(t[22]=e("div",null,[e("h1",{class:"text-3xl font-bold text-white"},'Админ-панель "Стужа"'),e("p",{class:"text-gray-400 mt-1"},"Управление интернет-магазином украшений")],-1)),e("div",et,[s.stats?(l(),i("div",tt,[e("div",st,a(((c=s.stats.products)==null?void 0:c.total)||0),1),t[19]||(t[19]=e("div",{class:"text-gray-400 text-sm"},"Товаров",-1))])):m("",!0),s.stats?(l(),i("div",ot,[e("div",rt,a(s.stats.categories||0),1),t[20]||(t[20]=e("div",{class:"text-gray-400 text-sm"},"Категорий",-1))])):m("",!0),s.stats?(l(),i("div",lt,[e("div",it,a(((_=s.stats.products)==null?void 0:_.matryoshka)||0),1),t[21]||(t[21]=e("div",{class:"text-gray-400 text-sm"},"Матрёшек",-1))])):m("",!0)]),e("button",{onClick:t[0]||(t[0]=(...o)=>s.logout&&s.logout(...o)),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors"}," Выйти ")]),e("div",nt,[e("nav",at,[(l(!0),i(C,null,V(s.tabs,o=>(l(),i("button",{key:o.id,onClick:g=>s.activeTab=o.id,class:P(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",s.activeTab===o.id?"bg-red-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"])},a(o.name),11,dt))),128))])]),e("div",ct,[s.activeTab==="categories"?(l(),i("div",ut,[e("div",gt,[t[23]||(t[23]=e("h2",{class:"text-2xl font-semibold text-white"},"Категории и подкатегории",-1)),e("div",bt,[e("button",{onClick:t[1]||(t[1]=o=>s.createCategory()),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-colors"}," + Создать категорию ")])]),e("div",mt,[(l(!0),i(C,null,V(s.categoryTree,o=>(l(),i("div",{key:o.id,class:"bg-gray-700 rounded-lg p-4"},[e("div",xt,[e("div",yt,[e("span",pt,a(o.name),1),e("span",vt,a(o.products_count||0)+" товаров ",1),o.children&&o.children.length?(l(),i("span",ht,a(o.children.length)+" подкат. ",1)):m("",!0)]),e("div",ft,[e("button",{onClick:g=>s.createSubcategory(o.id),class:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs transition-colors"}," + Подкатегория ",8,_t),e("button",{onClick:g=>s.editCategory(o),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Изменить ",8,wt),e("button",{onClick:g=>s.confirmDelete(o,"category"),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,kt)])]),o.children&&o.children.length?(l(),i("div",Ct,[(l(!0),i(C,null,V(o.children,g=>(l(),i("div",{key:g.id,class:"bg-gray-600 rounded p-3 flex items-center justify-between"},[e("div",Vt,[t[24]||(t[24]=e("span",{class:"text-gray-300"},"→",-1)),e("span",At,a(g.name),1),e("span",jt,a(g.products_count||0)+" товаров ",1)]),e("div",Ft,[e("button",{onClick:j=>s.editCategory(g),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Изменить ",8,St),e("button",{onClick:j=>s.confirmDelete(g,"category"),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,zt)])]))),128))])):m("",!0)]))),128))])])):m("",!0),s.activeTab==="attributes"?(l(),i("div",Mt,[e("div",Lt,[t[25]||(t[25]=e("h2",{class:"text-2xl font-semibold text-white"},"Атрибуты и значения",-1)),e("button",{onClick:t[2]||(t[2]=o=>s.createAttribute()),class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-colors"}," + Создать атрибут ")]),e("div",Tt,[e("div",null,[t[26]||(t[26]=e("h3",{class:"text-lg font-medium text-white mb-4"},"Атрибуты",-1)),e("div",qt,[(l(!0),i(C,null,V(s.attributes,o=>(l(),i("div",{key:o.id,class:P(["bg-gray-700 rounded-lg p-4 cursor-pointer hover:bg-gray-600 transition-colors",{"ring-2 ring-blue-500":s.selectedAttribute===o.id}]),onClick:g=>s.loadAttributeValues(o.id)},[e("div",Bt,[e("div",Ot,[e("span",Dt,a(o.name),1),o.is_stone?(l(),i("span",Nt," Камень ")):m("",!0)]),e("div",Et,[e("span",Pt,a(o.values_count||0)+" значений ",1),e("button",{onClick:A(g=>s.createAttributeValue(o.id),["stop"]),class:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs transition-colors"}," + Значение ",8,Qt),e("button",{onClick:A(g=>s.editAttribute(o),["stop"]),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Изменить ",8,It),e("button",{onClick:A(g=>s.confirmDelete(o,"attribute"),["stop"]),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,Rt)])])],10,Ut))),128))])]),e("div",null,[e("h3",$t,[t[27]||(t[27]=z(" Значения атрибута ")),s.selectedAttribute?(l(),i("span",Ht," ("+a(s.getAttributeName(s.selectedAttribute))+") ",1)):m("",!0)]),s.selectedAttribute?(l(),i("div",Gt,[(l(!0),i(C,null,V(s.attributeValues,o=>(l(),i("div",{key:o.id,class:"bg-gray-700 rounded p-3 flex items-center justify-between"},[e("div",Jt,[e("span",Kt,a(o.value),1),e("span",Wt,a(o.products_count||0)+" товаров ",1),o.is_active?m("",!0):(l(),i("span",Yt," Неактивно "))]),e("div",Zt,[e("button",{onClick:g=>s.editAttributeValue(o),class:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Изменить ",8,es),e("button",{onClick:g=>s.deleteAttributeValue(o.id),class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-colors"}," Удалить ",8,ts)])]))),128)),e("button",{onClick:t[3]||(t[3]=o=>s.createAttributeValue(s.selectedAttribute)),class:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded text-sm transition-colors"}," + Добавить значение ")])):(l(),i("div",Xt," Выберите атрибут для просмотра значений "))])])])):m("",!0)])]),s.showCategoryModal?(l(),i("div",ss,[e("div",os,[e("h3",rs,a(s.categoryForm.id?"Редактировать":"Создать")+" категорию ",1),e("form",{onSubmit:t[9]||(t[9]=A(o=>s.saveCategory(),["prevent"]))},[e("div",ls,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Название",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.categoryForm.name=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"Название категории"},null,512),[[f,s.categoryForm.name]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Родительская категория",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.categoryForm.parent_id=o),class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"},[t[29]||(t[29]=e("option",{value:""},"Корневая категория",-1)),(l(!0),i(C,null,V(s.categories.filter(o=>!o.parent_id&&o.id!==s.categoryForm.id),o=>(l(),i("option",{key:o.id,value:o.id},a(o.name),9,is))),128))],512),[[ie,s.categoryForm.parent_id]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Slug",-1)),p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.categoryForm.slug=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"category-slug"},null,512),[[f,s.categoryForm.slug]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Порядок сортировки",-1)),p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.categoryForm.sort_order=o),type:"number",min:"0",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"},null,512),[[f,s.categoryForm.sort_order,void 0,{number:!0}]])])]),e("div",ns,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>s.showCategoryModal=!1),class:"px-4 py-2 text-gray-400 hover:text-white transition-colors"}," Отмена "),e("button",{type:"submit",disabled:s.loading,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition-colors disabled:opacity-50"},a(s.loading?"Сохранение...":"Сохранить"),9,as)])],32)])])):m("",!0),s.showAttributeModal?(l(),i("div",ds,[e("div",cs,[e("h3",us,a(s.attributeForm.id?"Редактировать":"Создать")+" атрибут ",1),e("form",{onSubmit:t[13]||(t[13]=A(o=>s.saveAttribute(),["prevent"]))},[e("div",gs,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Название атрибута",-1)),p(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.attributeForm.name=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"Например: Материал, Размер, Цвет камня"},null,512),[[f,s.attributeForm.name]])]),e("div",null,[e("label",bs,[p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.attributeForm.is_stone=o),type:"checkbox",class:"mr-2 rounded border-gray-600 bg-gray-700 text-blue-600"},null,512),[[E,s.attributeForm.is_stone]]),t[34]||(t[34]=e("span",{class:"text-white"},"Это атрибут камня",-1))])])]),e("div",ms,[e("button",{type:"button",onClick:t[12]||(t[12]=o=>s.showAttributeModal=!1),class:"px-4 py-2 text-gray-400 hover:text-white transition-colors"}," Отмена "),e("button",{type:"submit",disabled:s.loading,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition-colors disabled:opacity-50"},a(s.loading?"Сохранение...":"Сохранить"),9,xs)])],32)])])):m("",!0),s.showAttributeValueModal?(l(),i("div",ys,[e("div",ps,[e("h3",vs,a(s.attributeValueForm.id?"Редактировать":"Создать")+" значение ",1),e("form",{onSubmit:t[18]||(t[18]=A(o=>s.saveAttributeValue(),["prevent"]))},[e("div",hs,[e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Значение",-1)),p(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>s.attributeValueForm.value=o),type:"text",required:"",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"Например: Красный, Синий, XL, 925 проба"},null,512),[[f,s.attributeValueForm.value]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Порядок сортировки",-1)),p(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>s.attributeValueForm.sort_order=o),type:"number",min:"0",class:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"},null,512),[[f,s.attributeValueForm.sort_order,void 0,{number:!0}]])]),e("div",null,[e("label",fs,[p(e("input",{"onUpdate:modelValue":t[16]||(t[16]=o=>s.attributeValueForm.is_active=o),type:"checkbox",class:"mr-2 rounded border-gray-600 bg-gray-700 text-blue-600"},null,512),[[E,s.attributeValueForm.is_active]]),t[37]||(t[37]=e("span",{class:"text-white"},"Активное значение",-1))])])]),e("div",_s,[e("button",{type:"button",onClick:t[17]||(t[17]=o=>s.showAttributeValueModal=!1),class:"px-4 py-2 text-gray-400 hover:text-white transition-colors"}," Отмена "),e("button",{type:"submit",disabled:s.loading,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition-colors disabled:opacity-50"},a(s.loading?"Сохранение...":"Сохранить"),9,ws)])],32)])])):m("",!0)])}const Vs=L(Ke,[["render",ks]]);export{Vs as default};
